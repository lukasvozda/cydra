import{S as eu,i as tu,s as ru,n as $s,d as $e,f as Pt,h as Oe,J as nu,K as iu,L as su,G as qi,j as Je,k as At,m as Yt,M as qn,o as Qe,q as Kt,x as qs,N as Po,e as xr,l as Ot,p as kt}from"../chunks/DiMMRZSp.js";import"../chunks/IHki7fMi.js";import{_ as ou}from"../chunks/C1FmrZbK.js";function si(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}var Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function au(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Co={},_n={};_n.byteLength=fu;_n.toByteArray=hu;_n.fromByteArray=yu;var Ct=[],yt=[],cu=typeof Uint8Array<"u"?Uint8Array:Array,Gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Rr=0,uu=Gi.length;Rr<uu;++Rr)Ct[Rr]=Gi[Rr],yt[Gi.charCodeAt(Rr)]=Rr;yt[45]=62;yt[95]=63;function $o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function fu(t){var e=$o(t),r=e[0],n=e[1];return(r+n)*3/4-n}function lu(t,e,r){return(e+r)*3/4-r}function hu(t){var e,r=$o(t),n=r[0],i=r[1],c=new cu(lu(t,n,i)),f=0,o=i>0?n-4:n,w;for(w=0;w<o;w+=4)e=yt[t.charCodeAt(w)]<<18|yt[t.charCodeAt(w+1)]<<12|yt[t.charCodeAt(w+2)]<<6|yt[t.charCodeAt(w+3)],c[f++]=e>>16&255,c[f++]=e>>8&255,c[f++]=e&255;return i===2&&(e=yt[t.charCodeAt(w)]<<2|yt[t.charCodeAt(w+1)]>>4,c[f++]=e&255),i===1&&(e=yt[t.charCodeAt(w)]<<10|yt[t.charCodeAt(w+1)]<<4|yt[t.charCodeAt(w+2)]>>2,c[f++]=e>>8&255,c[f++]=e&255),c}function du(t){return Ct[t>>18&63]+Ct[t>>12&63]+Ct[t>>6&63]+Ct[t&63]}function pu(t,e,r){for(var n,i=[],c=e;c<r;c+=3)n=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(t[c+2]&255),i.push(du(n));return i.join("")}function yu(t){for(var e,r=t.length,n=r%3,i=[],c=16383,f=0,o=r-n;f<o;f+=c)i.push(pu(t,f,f+c>o?o:f+c));return n===1?(e=t[r-1],i.push(Ct[e>>2]+Ct[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ct[e>>10]+Ct[e>>4&63]+Ct[e<<2&63]+"=")),i.join("")}var xn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xn.read=function(t,e,r,n,i){var c,f,o=i*8-n-1,w=(1<<o)-1,b=w>>1,x=-7,N=r?i-1:0,U=r?-1:1,E=t[e+N];for(N+=U,c=E&(1<<-x)-1,E>>=-x,x+=o;x>0;c=c*256+t[e+N],N+=U,x-=8);for(f=c&(1<<-x)-1,c>>=-x,x+=n;x>0;f=f*256+t[e+N],N+=U,x-=8);if(c===0)c=1-b;else{if(c===w)return f?NaN:(E?-1:1)*(1/0);f=f+Math.pow(2,n),c=c-b}return(E?-1:1)*f*Math.pow(2,c-n)};xn.write=function(t,e,r,n,i,c){var f,o,w,b=c*8-i-1,x=(1<<b)-1,N=x>>1,U=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:c-1,y=n?1:-1,M=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,f=x):(f=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-f))<1&&(f--,w*=2),f+N>=1?e+=U/w:e+=U*Math.pow(2,1-N),e*w>=2&&(f++,w/=2),f+N>=x?(o=0,f=x):f+N>=1?(o=(e*w-1)*Math.pow(2,i),f=f+N):(o=e*Math.pow(2,N-1)*Math.pow(2,i),f=0));i>=8;t[r+E]=o&255,E+=y,o/=256,i-=8);for(f=f<<i|o,b+=i;b>0;t[r+E]=f&255,E+=y,f/=256,b-=8);t[r+E-y]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=_n,r=xn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=H,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=c(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const d=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(d,u),d.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const u=new Uint8Array(d);return Object.setPrototypeOf(u,o.prototype),u}function o(d,u,l){if(typeof d=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(d)}return w(d,u,l)}o.poolSize=8192;function w(d,u,l){if(typeof d=="string")return U(d,u);if(ArrayBuffer.isView(d))return y(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(Y(d,ArrayBuffer)||d&&Y(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(d,SharedArrayBuffer)||d&&Y(d.buffer,SharedArrayBuffer)))return M(d,u,l);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=d.valueOf&&d.valueOf();if(v!=null&&v!==d)return o.from(v,u,l);const $=C(d);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return o.from(d[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}o.from=function(d,u,l){return w(d,u,l)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function b(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function x(d,u,l){return b(d),d<=0?f(d):u!==void 0?typeof l=="string"?f(d).fill(u,l):f(d).fill(u):f(d)}o.alloc=function(d,u,l){return x(d,u,l)};function N(d){return b(d),f(d<0?0:z(d)|0)}o.allocUnsafe=function(d){return N(d)},o.allocUnsafeSlow=function(d){return N(d)};function U(d,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=K(d,u)|0;let v=f(l);const $=v.write(d,u);return $!==l&&(v=v.slice(0,$)),v}function E(d){const u=d.length<0?0:z(d.length)|0,l=f(u);for(let v=0;v<u;v+=1)l[v]=d[v]&255;return l}function y(d){if(Y(d,Uint8Array)){const u=new Uint8Array(d);return M(u.buffer,u.byteOffset,u.byteLength)}return E(d)}function M(d,u,l){if(u<0||d.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let v;return u===void 0&&l===void 0?v=new Uint8Array(d):l===void 0?v=new Uint8Array(d,u):v=new Uint8Array(d,u,l),Object.setPrototypeOf(v,o.prototype),v}function C(d){if(o.isBuffer(d)){const u=z(d.length)|0,l=f(u);return l.length===0||d.copy(l,0,0,u),l}if(d.length!==void 0)return typeof d.length!="number"||se(d.length)?f(0):E(d);if(d.type==="Buffer"&&Array.isArray(d.data))return E(d.data)}function z(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function H(d){return+d!=d&&(d=0),o.alloc(+d)}o.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==o.prototype},o.compare=function(u,l){if(Y(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),Y(l,Uint8Array)&&(l=o.from(l,l.offset,l.byteLength)),!o.isBuffer(u)||!o.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let v=u.length,$=l.length;for(let X=0,W=Math.min(v,$);X<W;++X)if(u[X]!==l[X]){v=u[X],$=l[X];break}return v<$?-1:$<v?1:0},o.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return o.alloc(0);let v;if(l===void 0)for(l=0,v=0;v<u.length;++v)l+=u[v].length;const $=o.allocUnsafe(l);let X=0;for(v=0;v<u.length;++v){let W=u[v];if(Y(W,Uint8Array))X+W.length>$.length?(o.isBuffer(W)||(W=o.from(W)),W.copy($,X)):Uint8Array.prototype.set.call($,W,X);else if(o.isBuffer(W))W.copy($,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=W.length}return $};function K(d,u){if(o.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||Y(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const l=d.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&l===0)return 0;let $=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return m(d).length;default:if($)return v?-1:s(d).length;u=(""+u).toLowerCase(),$=!0}}o.byteLength=K;function ne(d,u,l){let v=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(d||(d="utf8");;)switch(d){case"hex":return le(this,u,l);case"utf8":case"utf-8":return R(this,u,l);case"ascii":return D(this,u,l);case"latin1":case"binary":return re(this,u,l);case"base64":return A(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,u,l);default:if(v)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),v=!0}}o.prototype._isBuffer=!0;function T(d,u,l){const v=d[u];d[u]=d[l],d[l]=v}o.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)T(this,l,l+1);return this},o.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)T(this,l,l+3),T(this,l+1,l+2);return this},o.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)T(this,l,l+7),T(this,l+1,l+6),T(this,l+2,l+5),T(this,l+3,l+4);return this},o.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?R(this,0,u):ne.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(u){if(!o.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:o.compare(this,u)===0},o.prototype.inspect=function(){let u="";const l=t.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(u,l,v,$,X){if(Y(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),v===void 0&&(v=u?u.length:0),$===void 0&&($=0),X===void 0&&(X=this.length),l<0||v>u.length||$<0||X>this.length)throw new RangeError("out of range index");if($>=X&&l>=v)return 0;if($>=X)return-1;if(l>=v)return 1;if(l>>>=0,v>>>=0,$>>>=0,X>>>=0,this===u)return 0;let W=X-$,ge=v-l;const _e=Math.min(W,ge),me=this.slice($,X),we=u.slice(l,v);for(let Se=0;Se<_e;++Se)if(me[Se]!==we[Se]){W=me[Se],ge=we[Se];break}return W<ge?-1:ge<W?1:0};function j(d,u,l,v,$){if(d.length===0)return-1;if(typeof l=="string"?(v=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,se(l)&&(l=$?0:d.length-1),l<0&&(l=d.length+l),l>=d.length){if($)return-1;l=d.length-1}else if(l<0)if($)l=0;else return-1;if(typeof u=="string"&&(u=o.from(u,v)),o.isBuffer(u))return u.length===0?-1:Z(d,u,l,v,$);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(d,u,l):Uint8Array.prototype.lastIndexOf.call(d,u,l):Z(d,[u],l,v,$);throw new TypeError("val must be string, number or Buffer")}function Z(d,u,l,v,$){let X=1,W=d.length,ge=u.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(d.length<2||u.length<2)return-1;X=2,W/=2,ge/=2,l/=2}function _e(we,Se){return X===1?we[Se]:we.readUInt16BE(Se*X)}let me;if($){let we=-1;for(me=l;me<W;me++)if(_e(d,me)===_e(u,we===-1?0:me-we)){if(we===-1&&(we=me),me-we+1===ge)return we*X}else we!==-1&&(me-=me-we),we=-1}else for(l+ge>W&&(l=W-ge),me=l;me>=0;me--){let we=!0;for(let Se=0;Se<ge;Se++)if(_e(d,me+Se)!==_e(u,Se)){we=!1;break}if(we)return me}return-1}o.prototype.includes=function(u,l,v){return this.indexOf(u,l,v)!==-1},o.prototype.indexOf=function(u,l,v){return j(this,u,l,v,!0)},o.prototype.lastIndexOf=function(u,l,v){return j(this,u,l,v,!1)};function J(d,u,l,v){l=Number(l)||0;const $=d.length-l;v?(v=Number(v),v>$&&(v=$)):v=$;const X=u.length;v>X/2&&(v=X/2);let W;for(W=0;W<v;++W){const ge=parseInt(u.substr(W*2,2),16);if(se(ge))return W;d[l+W]=ge}return W}function V(d,u,l,v){return I(s(u,d.length-l),d,l,v)}function q(d,u,l,v){return I(a(u),d,l,v)}function ee(d,u,l,v){return I(m(u),d,l,v)}function te(d,u,l,v){return I(p(u,d.length-l),d,l,v)}o.prototype.write=function(u,l,v,$){if(l===void 0)$="utf8",v=this.length,l=0;else if(v===void 0&&typeof l=="string")$=l,v=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(v)?(v=v>>>0,$===void 0&&($="utf8")):($=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-l;if((v===void 0||v>X)&&(v=X),u.length>0&&(v<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let W=!1;for(;;)switch($){case"hex":return J(this,u,l,v);case"utf8":case"utf-8":return V(this,u,l,v);case"ascii":case"latin1":case"binary":return q(this,u,l,v);case"base64":return ee(this,u,l,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,u,l,v);default:if(W)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),W=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(d,u,l){return u===0&&l===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(u,l))}function R(d,u,l){l=Math.min(d.length,l);const v=[];let $=u;for(;$<l;){const X=d[$];let W=null,ge=X>239?4:X>223?3:X>191?2:1;if($+ge<=l){let _e,me,we,Se;switch(ge){case 1:X<128&&(W=X);break;case 2:_e=d[$+1],(_e&192)===128&&(Se=(X&31)<<6|_e&63,Se>127&&(W=Se));break;case 3:_e=d[$+1],me=d[$+2],(_e&192)===128&&(me&192)===128&&(Se=(X&15)<<12|(_e&63)<<6|me&63,Se>2047&&(Se<55296||Se>57343)&&(W=Se));break;case 4:_e=d[$+1],me=d[$+2],we=d[$+3],(_e&192)===128&&(me&192)===128&&(we&192)===128&&(Se=(X&15)<<18|(_e&63)<<12|(me&63)<<6|we&63,Se>65535&&Se<1114112&&(W=Se))}}W===null?(W=65533,ge=1):W>65535&&(W-=65536,v.push(W>>>10&1023|55296),W=56320|W&1023),v.push(W),$+=ge}return L(v)}const G=4096;function L(d){const u=d.length;if(u<=G)return String.fromCharCode.apply(String,d);let l="",v=0;for(;v<u;)l+=String.fromCharCode.apply(String,d.slice(v,v+=G));return l}function D(d,u,l){let v="";l=Math.min(d.length,l);for(let $=u;$<l;++$)v+=String.fromCharCode(d[$]&127);return v}function re(d,u,l){let v="";l=Math.min(d.length,l);for(let $=u;$<l;++$)v+=String.fromCharCode(d[$]);return v}function le(d,u,l){const v=d.length;(!u||u<0)&&(u=0),(!l||l<0||l>v)&&(l=v);let $="";for(let X=u;X<l;++X)$+=ue[d[X]];return $}function ye(d,u,l){const v=d.slice(u,l);let $="";for(let X=0;X<v.length-1;X+=2)$+=String.fromCharCode(v[X]+v[X+1]*256);return $}o.prototype.slice=function(u,l){const v=this.length;u=~~u,l=l===void 0?v:~~l,u<0?(u+=v,u<0&&(u=0)):u>v&&(u=v),l<0?(l+=v,l<0&&(l=0)):l>v&&(l=v),l<u&&(l=u);const $=this.subarray(u,l);return Object.setPrototypeOf($,o.prototype),$};function oe(d,u,l){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+u>l)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(u,l,v){u=u>>>0,l=l>>>0,v||oe(u,l,this.length);let $=this[u],X=1,W=0;for(;++W<l&&(X*=256);)$+=this[u+W]*X;return $},o.prototype.readUintBE=o.prototype.readUIntBE=function(u,l,v){u=u>>>0,l=l>>>0,v||oe(u,l,this.length);let $=this[u+--l],X=1;for(;l>0&&(X*=256);)$+=this[u+--l]*X;return $},o.prototype.readUint8=o.prototype.readUInt8=function(u,l){return u=u>>>0,l||oe(u,1,this.length),this[u]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||oe(u,2,this.length),this[u]|this[u+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||oe(u,2,this.length),this[u]<<8|this[u+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},o.prototype.readBigUInt64LE=he(function(u){u=u>>>0,O(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&F(u,this.length-8);const $=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,X=this[++u]+this[++u]*2**8+this[++u]*2**16+v*2**24;return BigInt($)+(BigInt(X)<<BigInt(32))}),o.prototype.readBigUInt64BE=he(function(u){u=u>>>0,O(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&F(u,this.length-8);const $=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],X=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v;return(BigInt($)<<BigInt(32))+BigInt(X)}),o.prototype.readIntLE=function(u,l,v){u=u>>>0,l=l>>>0,v||oe(u,l,this.length);let $=this[u],X=1,W=0;for(;++W<l&&(X*=256);)$+=this[u+W]*X;return X*=128,$>=X&&($-=Math.pow(2,8*l)),$},o.prototype.readIntBE=function(u,l,v){u=u>>>0,l=l>>>0,v||oe(u,l,this.length);let $=l,X=1,W=this[u+--$];for(;$>0&&(X*=256);)W+=this[u+--$]*X;return X*=128,W>=X&&(W-=Math.pow(2,8*l)),W},o.prototype.readInt8=function(u,l){return u=u>>>0,l||oe(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},o.prototype.readInt16LE=function(u,l){u=u>>>0,l||oe(u,2,this.length);const v=this[u]|this[u+1]<<8;return v&32768?v|4294901760:v},o.prototype.readInt16BE=function(u,l){u=u>>>0,l||oe(u,2,this.length);const v=this[u+1]|this[u]<<8;return v&32768?v|4294901760:v},o.prototype.readInt32LE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},o.prototype.readInt32BE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},o.prototype.readBigInt64LE=he(function(u){u=u>>>0,O(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&F(u,this.length-8);const $=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(v<<24);return(BigInt($)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),o.prototype.readBigInt64BE=he(function(u){u=u>>>0,O(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&F(u,this.length-8);const $=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt($)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v)}),o.prototype.readFloatLE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),r.read(this,u,!0,23,4)},o.prototype.readFloatBE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),r.read(this,u,!1,23,4)},o.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||oe(u,8,this.length),r.read(this,u,!0,52,8)},o.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||oe(u,8,this.length),r.read(this,u,!1,52,8)};function fe(d,u,l,v,$,X){if(!o.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>$||u<X)throw new RangeError('"value" argument is out of bounds');if(l+v>d.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(u,l,v,$){if(u=+u,l=l>>>0,v=v>>>0,!$){const ge=Math.pow(2,8*v)-1;fe(this,u,l,v,ge,0)}let X=1,W=0;for(this[l]=u&255;++W<v&&(X*=256);)this[l+W]=u/X&255;return l+v},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(u,l,v,$){if(u=+u,l=l>>>0,v=v>>>0,!$){const ge=Math.pow(2,8*v)-1;fe(this,u,l,v,ge,0)}let X=v-1,W=1;for(this[l+X]=u&255;--X>=0&&(W*=256);)this[l+X]=u/W&255;return l+v},o.prototype.writeUint8=o.prototype.writeUInt8=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,1,255,0),this[l]=u&255,l+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function Ne(d,u,l,v,$){S(u,v,$,d,l,7);let X=Number(u&BigInt(4294967295));d[l++]=X,X=X>>8,d[l++]=X,X=X>>8,d[l++]=X,X=X>>8,d[l++]=X;let W=Number(u>>BigInt(32)&BigInt(4294967295));return d[l++]=W,W=W>>8,d[l++]=W,W=W>>8,d[l++]=W,W=W>>8,d[l++]=W,l}function B(d,u,l,v,$){S(u,v,$,d,l,7);let X=Number(u&BigInt(4294967295));d[l+7]=X,X=X>>8,d[l+6]=X,X=X>>8,d[l+5]=X,X=X>>8,d[l+4]=X;let W=Number(u>>BigInt(32)&BigInt(4294967295));return d[l+3]=W,W=W>>8,d[l+2]=W,W=W>>8,d[l+1]=W,W=W>>8,d[l]=W,l+8}o.prototype.writeBigUInt64LE=he(function(u,l=0){return Ne(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=he(function(u,l=0){return B(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(u,l,v,$){if(u=+u,l=l>>>0,!$){const _e=Math.pow(2,8*v-1);fe(this,u,l,v,_e-1,-_e)}let X=0,W=1,ge=0;for(this[l]=u&255;++X<v&&(W*=256);)u<0&&ge===0&&this[l+X-1]!==0&&(ge=1),this[l+X]=(u/W>>0)-ge&255;return l+v},o.prototype.writeIntBE=function(u,l,v,$){if(u=+u,l=l>>>0,!$){const _e=Math.pow(2,8*v-1);fe(this,u,l,v,_e-1,-_e)}let X=v-1,W=1,ge=0;for(this[l+X]=u&255;--X>=0&&(W*=256);)u<0&&ge===0&&this[l+X+1]!==0&&(ge=1),this[l+X]=(u/W>>0)-ge&255;return l+v},o.prototype.writeInt8=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},o.prototype.writeInt16LE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},o.prototype.writeInt16BE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},o.prototype.writeInt32LE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},o.prototype.writeInt32BE=function(u,l,v){return u=+u,l=l>>>0,v||fe(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},o.prototype.writeBigInt64LE=he(function(u,l=0){return Ne(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=he(function(u,l=0){return B(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(d,u,l,v,$,X){if(l+v>d.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Ie(d,u,l,v,$){return u=+u,l=l>>>0,$||Ae(d,u,l,4),r.write(d,u,l,v,23,4),l+4}o.prototype.writeFloatLE=function(u,l,v){return Ie(this,u,l,!0,v)},o.prototype.writeFloatBE=function(u,l,v){return Ie(this,u,l,!1,v)};function ae(d,u,l,v,$){return u=+u,l=l>>>0,$||Ae(d,u,l,8),r.write(d,u,l,v,52,8),l+8}o.prototype.writeDoubleLE=function(u,l,v){return ae(this,u,l,!0,v)},o.prototype.writeDoubleBE=function(u,l,v){return ae(this,u,l,!1,v)},o.prototype.copy=function(u,l,v,$){if(!o.isBuffer(u))throw new TypeError("argument should be a Buffer");if(v||(v=0),!$&&$!==0&&($=this.length),l>=u.length&&(l=u.length),l||(l=0),$>0&&$<v&&($=v),$===v||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),u.length-l<$-v&&($=u.length-l+v);const X=$-v;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,v,$):Uint8Array.prototype.set.call(u,this.subarray(v,$),l),X},o.prototype.fill=function(u,l,v,$){if(typeof u=="string"){if(typeof l=="string"?($=l,l=0,v=this.length):typeof v=="string"&&($=v,v=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!o.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(u.length===1){const W=u.charCodeAt(0);($==="utf8"&&W<128||$==="latin1")&&(u=W)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<v)throw new RangeError("Out of range index");if(v<=l)return this;l=l>>>0,v=v===void 0?this.length:v>>>0,u||(u=0);let X;if(typeof u=="number")for(X=l;X<v;++X)this[X]=u;else{const W=o.isBuffer(u)?u:o.from(u,$),ge=W.length;if(ge===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(X=0;X<v-l;++X)this[X+l]=W[X%ge]}return this};const Q={};function ie(d,u,l){Q[d]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(d,u){return`The "${d}" argument must be of type number. Received type ${typeof u}`},TypeError),ie("ERR_OUT_OF_RANGE",function(d,u,l){let v=`The value of "${d}" is out of range.`,$=l;return Number.isInteger(l)&&Math.abs(l)>2**32?$=g(String(l)):typeof l=="bigint"&&($=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&($=g($)),$+="n"),v+=` It must be ${u}. Received ${$}`,v},RangeError);function g(d){let u="",l=d.length;const v=d[0]==="-"?1:0;for(;l>=v+4;l-=3)u=`_${d.slice(l-3,l)}${u}`;return`${d.slice(0,l)}${u}`}function _(d,u,l){O(u,"offset"),(d[u]===void 0||d[u+l]===void 0)&&F(u,d.length-(l+1))}function S(d,u,l,v,$,X){if(d>l||d<u){const W=typeof u=="bigint"?"n":"";let ge;throw u===0||u===BigInt(0)?ge=`>= 0${W} and < 2${W} ** ${(X+1)*8}${W}`:ge=`>= -(2${W} ** ${(X+1)*8-1}${W}) and < 2 ** ${(X+1)*8-1}${W}`,new Q.ERR_OUT_OF_RANGE("value",ge,d)}_(v,$,X)}function O(d,u){if(typeof d!="number")throw new Q.ERR_INVALID_ARG_TYPE(u,"number",d)}function F(d,u,l){throw Math.floor(d)!==d?(O(d,l),new Q.ERR_OUT_OF_RANGE("offset","an integer",d)):u<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,d)}const P=/[^+/0-9A-Za-z-_]/g;function h(d){if(d=d.split("=")[0],d=d.trim().replace(P,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function s(d,u){u=u||1/0;let l;const v=d.length;let $=null;const X=[];for(let W=0;W<v;++W){if(l=d.charCodeAt(W),l>55295&&l<57344){if(!$){if(l>56319){(u-=3)>-1&&X.push(239,191,189);continue}else if(W+1===v){(u-=3)>-1&&X.push(239,191,189);continue}$=l;continue}if(l<56320){(u-=3)>-1&&X.push(239,191,189),$=l;continue}l=($-55296<<10|l-56320)+65536}else $&&(u-=3)>-1&&X.push(239,191,189);if($=null,l<128){if((u-=1)<0)break;X.push(l)}else if(l<2048){if((u-=2)<0)break;X.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;X.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;X.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return X}function a(d){const u=[];for(let l=0;l<d.length;++l)u.push(d.charCodeAt(l)&255);return u}function p(d,u){let l,v,$;const X=[];for(let W=0;W<d.length&&!((u-=2)<0);++W)l=d.charCodeAt(W),v=l>>8,$=l%256,X.push($),X.push(v);return X}function m(d){return e.toByteArray(h(d))}function I(d,u,l,v){let $;for($=0;$<v&&!($+l>=u.length||$>=d.length);++$)u[$+l]=d[$];return $}function Y(d,u){return d instanceof u||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===u.name}function se(d){return d!==d}const ue=function(){const d="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const v=l*16;for(let $=0;$<16;++$)u[v+$]=d[l]+d[$]}return u}();function he(d){return typeof BigInt>"u"?be:d}function be(){throw new Error("BigInt not supported")}})(Co);var ss;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(ss||(ss={}));const oi="abcdefghijklmnopqrstuvwxyz234567",Zr=Object.create(null);for(let t=0;t<oi.length;t++)Zr[oi[t]]=t;Zr[0]=Zr.o;Zr[1]=Zr.i;function wu(t){let e=0,r=0,n="";function i(c){return e<0?r|=c>>-e:r=c<<e&248,e>3?(e-=8,1):(e<4&&(n+=oi[r>>3],e+=5),0)}for(let c=0;c<t.length;)c+=i(t[c]);return n+(e<0?oi[r>>3]:"")}function gu(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function c(f){let o=Zr[f.toLowerCase()];if(o===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);o<<=3,r|=o>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=o<<5-e&255:r=0)}for(const f of t)c(f);return n.slice(0,i)}const mu=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function bu(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const c=(e[n]^r)&255;r=mu[c]^r>>>8}return(r^-1)>>>0}const Ur=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function As(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function _u(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function tt(t,...e){if(!As(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Gs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xu(t,e){tt(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function dn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Vi(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Tt(t,e){return t<<32-e|t>>>e}const qo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Eu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xr(t){if(tt(t),qo)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Eu[t[r]];return e}const Vt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Vs(t){if(t>=Vt._0&&t<=Vt._9)return t-Vt._0;if(t>=Vt.A&&t<=Vt.F)return t-(Vt.A-10);if(t>=Vt.a&&t<=Vt.f)return t-(Vt.a-10)}function Go(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(qo)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,c=0;i<r;i++,c+=2){const f=Vs(t.charCodeAt(c)),o=Vs(t.charCodeAt(c+1));if(f===void 0||o===void 0){const w=t[c]+t[c+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+c)}n[i]=f*16+o}return n}function wi(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Vo(t){return typeof t=="string"&&(t=wi(t)),tt(t),t}function qe(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];tt(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const c=t[n];r.set(c,i),i+=c.length}return r}class Bu{}function vs(t){const e=n=>t().update(Vo(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Ho(t=32){if(Ur&&typeof Ur.getRandomValues=="function")return Ur.getRandomValues(new Uint8Array(t));if(Ur&&typeof Ur.randomBytes=="function")return Uint8Array.from(Ur.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Au(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),c=BigInt(4294967295),f=Number(r>>i&c),o=Number(r&c),w=n?4:0,b=n?0:4;t.setUint32(e+w,f,n),t.setUint32(e+b,o,n)}function vu(t,e,r){return t&e^~t&r}function Tu(t,e,r){return t&e^t&r^e&r}class jo extends Bu{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Vi(this.buffer)}update(e){Gs(this),e=Vo(e),tt(e);const{view:r,buffer:n,blockLen:i}=this,c=e.length;for(let f=0;f<c;){const o=Math.min(i-this.pos,c-f);if(o===i){const w=Vi(e);for(;i<=c-f;f+=i)this.process(w,f);continue}n.set(e.subarray(f,f+o),this.pos),this.pos+=o,f+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Gs(this),xu(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:c}=this;let{pos:f}=this;r[f++]=128,dn(this.buffer.subarray(f)),this.padOffset>i-f&&(this.process(n,0),f=0);for(let N=f;N<i;N++)r[N]=0;Au(n,i-8,BigInt(this.length*8),c),this.process(n,0);const o=Vi(e),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=w/4,x=this.get();if(b>x.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<b;N++)o.setUint32(4*N,x[N],c)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:c,destroyed:f,pos:o}=this;return e.destroyed=f,e.finished=c,e.length=i,e.pos=o,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const er=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tr=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),rt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Nn=BigInt(2**32-1),Hs=BigInt(32);function Su(t,e=!1){return e?{h:Number(t&Nn),l:Number(t>>Hs&Nn)}:{h:Number(t>>Hs&Nn)|0,l:Number(t&Nn)|0}}function Nu(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let c=0;c<r;c++){const{h:f,l:o}=Su(t[c],e);[n[c],i[c]]=[f,o]}return[n,i]}const js=(t,e,r)=>t>>>r,zs=(t,e,r)=>t<<32-r|e>>>r,Fr=(t,e,r)=>t>>>r|e<<32-r,Or=(t,e,r)=>t<<32-r|e>>>r,In=(t,e,r)=>t<<64-r|e>>>r-32,Rn=(t,e,r)=>t>>>r-32|e<<64-r;function Ht(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const Iu=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Ru=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Uu=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Fu=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Ou=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),ku=(t,e,r,n,i,c)=>e+r+n+i+c+(t/2**32|0)|0,Mu=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rr=new Uint32Array(64);class zo extends jo{constructor(e=32){super(64,e,8,!1),this.A=er[0]|0,this.B=er[1]|0,this.C=er[2]|0,this.D=er[3]|0,this.E=er[4]|0,this.F=er[5]|0,this.G=er[6]|0,this.H=er[7]|0}get(){const{A:e,B:r,C:n,D:i,E:c,F:f,G:o,H:w}=this;return[e,r,n,i,c,f,o,w]}set(e,r,n,i,c,f,o,w){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=c|0,this.F=f|0,this.G=o|0,this.H=w|0}process(e,r){for(let N=0;N<16;N++,r+=4)rr[N]=e.getUint32(r,!1);for(let N=16;N<64;N++){const U=rr[N-15],E=rr[N-2],y=Tt(U,7)^Tt(U,18)^U>>>3,M=Tt(E,17)^Tt(E,19)^E>>>10;rr[N]=M+rr[N-7]+y+rr[N-16]|0}let{A:n,B:i,C:c,D:f,E:o,F:w,G:b,H:x}=this;for(let N=0;N<64;N++){const U=Tt(o,6)^Tt(o,11)^Tt(o,25),E=x+U+vu(o,w,b)+Mu[N]+rr[N]|0,M=(Tt(n,2)^Tt(n,13)^Tt(n,22))+Tu(n,i,c)|0;x=b,b=w,w=o,o=f+E|0,f=c,c=i,i=n,n=E+M|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,f=f+this.D|0,o=o+this.E|0,w=w+this.F|0,b=b+this.G|0,x=x+this.H|0,this.set(n,i,c,f,o,w,b,x)}roundClean(){dn(rr)}destroy(){this.set(0,0,0,0,0,0,0,0),dn(this.buffer)}}class Pu extends zo{constructor(){super(28),this.A=tr[0]|0,this.B=tr[1]|0,this.C=tr[2]|0,this.D=tr[3]|0,this.E=tr[4]|0,this.F=tr[5]|0,this.G=tr[6]|0,this.H=tr[7]|0}}const Yo=Nu(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Cu=Yo[0],$u=Yo[1],nr=new Uint32Array(80),ir=new Uint32Array(80);class qu extends jo{constructor(e=64){super(128,e,16,!1),this.Ah=rt[0]|0,this.Al=rt[1]|0,this.Bh=rt[2]|0,this.Bl=rt[3]|0,this.Ch=rt[4]|0,this.Cl=rt[5]|0,this.Dh=rt[6]|0,this.Dl=rt[7]|0,this.Eh=rt[8]|0,this.El=rt[9]|0,this.Fh=rt[10]|0,this.Fl=rt[11]|0,this.Gh=rt[12]|0,this.Gl=rt[13]|0,this.Hh=rt[14]|0,this.Hl=rt[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:c,Cl:f,Dh:o,Dl:w,Eh:b,El:x,Fh:N,Fl:U,Gh:E,Gl:y,Hh:M,Hl:C}=this;return[e,r,n,i,c,f,o,w,b,x,N,U,E,y,M,C]}set(e,r,n,i,c,f,o,w,b,x,N,U,E,y,M,C){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=c|0,this.Cl=f|0,this.Dh=o|0,this.Dl=w|0,this.Eh=b|0,this.El=x|0,this.Fh=N|0,this.Fl=U|0,this.Gh=E|0,this.Gl=y|0,this.Hh=M|0,this.Hl=C|0}process(e,r){for(let K=0;K<16;K++,r+=4)nr[K]=e.getUint32(r),ir[K]=e.getUint32(r+=4);for(let K=16;K<80;K++){const ne=nr[K-15]|0,T=ir[K-15]|0,j=Fr(ne,T,1)^Fr(ne,T,8)^js(ne,T,7),Z=Or(ne,T,1)^Or(ne,T,8)^zs(ne,T,7),J=nr[K-2]|0,V=ir[K-2]|0,q=Fr(J,V,19)^In(J,V,61)^js(J,V,6),ee=Or(J,V,19)^Rn(J,V,61)^zs(J,V,6),te=Uu(Z,ee,ir[K-7],ir[K-16]),A=Fu(te,j,q,nr[K-7],nr[K-16]);nr[K]=A|0,ir[K]=te|0}let{Ah:n,Al:i,Bh:c,Bl:f,Ch:o,Cl:w,Dh:b,Dl:x,Eh:N,El:U,Fh:E,Fl:y,Gh:M,Gl:C,Hh:z,Hl:H}=this;for(let K=0;K<80;K++){const ne=Fr(N,U,14)^Fr(N,U,18)^In(N,U,41),T=Or(N,U,14)^Or(N,U,18)^Rn(N,U,41),j=N&E^~N&M,Z=U&y^~U&C,J=Ou(H,T,Z,$u[K],ir[K]),V=ku(J,z,ne,j,Cu[K],nr[K]),q=J|0,ee=Fr(n,i,28)^In(n,i,34)^In(n,i,39),te=Or(n,i,28)^Rn(n,i,34)^Rn(n,i,39),A=n&c^n&o^c&o,R=i&f^i&w^f&w;z=M|0,H=C|0,M=E|0,C=y|0,E=N|0,y=U|0,{h:N,l:U}=Ht(b|0,x|0,V|0,q|0),b=o|0,x=w|0,o=c|0,w=f|0,c=n|0,f=i|0;const G=Iu(q,te,R);n=Ru(G,V,ee,A),i=G|0}({h:n,l:i}=Ht(this.Ah|0,this.Al|0,n|0,i|0)),{h:c,l:f}=Ht(this.Bh|0,this.Bl|0,c|0,f|0),{h:o,l:w}=Ht(this.Ch|0,this.Cl|0,o|0,w|0),{h:b,l:x}=Ht(this.Dh|0,this.Dl|0,b|0,x|0),{h:N,l:U}=Ht(this.Eh|0,this.El|0,N|0,U|0),{h:E,l:y}=Ht(this.Fh|0,this.Fl|0,E|0,y|0),{h:M,l:C}=Ht(this.Gh|0,this.Gl|0,M|0,C|0),{h:z,l:H}=Ht(this.Hh|0,this.Hl|0,z|0,H|0),this.set(n,i,c,f,o,w,b,x,N,U,E,y,M,C,z,H)}roundClean(){dn(nr,ir)}destroy(){dn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ts=vs(()=>new zo),Gu=vs(()=>new Pu),Vu=vs(()=>new qu),Hu=Ts,ju=Gu;function zu(t){return ju.create().update(new Uint8Array(t)).digest()}const Un="__principal__",Yu=2,Ys=4,Ku="aaaaa-aa",Wu=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},Zu=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let xe=class Gn{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([Ys]))}static managementCanister(){return this.fromText(Ku)}static selfAuthenticating(e){const r=zu(e);return new this(new Uint8Array([...r,Yu]))}static from(e){if(typeof e=="string")return Gn.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new Gn(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new Gn(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(Wu(e))}static fromText(e){let r=e;if(e.includes(Un)){const f=JSON.parse(e);Un in f&&(r=f[Un])}const n=r.toLowerCase().replace(/-/g,"");let i=gu(n);i=i.slice(4,i.length);const c=new this(i);if(c.toText()!==r)throw new Error(`Principal "${c.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return c}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===Ys}toUint8Array(){return this._arr}toHex(){return Zu(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,bu(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),c=new Uint8Array([...n,...i]),o=wu(c).match(/.{1,5}/g);if(!o)throw new Error;return o.join("-")}toString(){return this.toText()}toJSON(){return{[Un]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};function qt(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function Ze(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Xu=new RegExp(/^[0-9a-fA-F]+$/);function ai(t){if(!Xu.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function Ko(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function gi(t,e){return Ko(t,e)===0}function Vn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function nn(t){return t instanceof Uint8Array?Vn(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Vn(new Uint8Array(t)):"buffer"in t?nn(t.buffer):Vn(new Uint8Array(t))}class Pe extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=Pe.prototype,Object.setPrototypeOf(this,Pe.prototype)}}function Re(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class Dr{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=ci(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}save(){return this._view}restore(e){this._view=e}get buffer(){return ci(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function Hi(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function ci(t){return t instanceof Uint8Array?Hi(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Hi(new Uint8Array(t)):"buffer"in t?ci(t.buffer):Hi(new Uint8Array(t))}function Lu(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function $t(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Lu(t)}function Wo(){throw new Error("unexpected end of buffer")}function Ar(t,e){return t.byteLength<e&&Wo(),t.read(e)}function vr(t){const e=t.readUint8();return e===void 0&&Wo(),e}function Ce(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new Dr(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function We(t){let e=BigInt(1),r=BigInt(0),n;do n=vr(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function ze(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new Dr(new ArrayBuffer(r),0);for(;;){const c=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&c&64||!e&&t===BigInt(0)&&!(c&64)){n.write(new Uint8Array([c]));break}else n.write(new Uint8Array([c|128]))}function i(c){const f=c%BigInt(128);return Number(e?BigInt(128)-f-BigInt(1):f)}return n.buffer}function or(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return We(t);break}const n=new Uint8Array(Ar(t,r+1));let i=BigInt(0);for(let c=n.byteLength-1;c>=0;c--)i=i*BigInt(128)+BigInt(128-(n[c]&127)-1);return-i-BigInt(1)}function Ju(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return Zo(t,e)}function Zo(t,e){t=BigInt(t);const r=new Dr(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),c=BigInt(0),f=Number(t%i);for(r.write(new Uint8Array([f]));++n<e;)t<0&&c===BigInt(0)&&f!==0&&(c=BigInt(1)),f=Number((t/i-c)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function Xo(t,e){let r=BigInt(vr(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const c=BigInt(vr(t));r=r+n*c}return r}function Qu(t,e){let r=Xo(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function os(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const Hn="DIDL",Ks=400;function pn(t,e,r){return t.map((n,i)=>r(n,e[i]))}class Du{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=Ce(this._typs.length),r=Re(...this._typs);return Re(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return ze(this._idx.get(e)||0)}}class ef{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((c,f)=>[`_${f}_`,c]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class mi{display(){return this.name}valueToString(e){return Ge(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class mt extends mi{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class fr extends mi{checkType(e){if(e instanceof Qt){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class Lo extends mt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return ze(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class Jo extends mi{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof Qt?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Qo extends mt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return ze(-2)}decodeValue(e,r){switch(this.checkType(r),vr(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class ui extends mt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return ze(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class Lr extends mt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return ze(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class Do extends mt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=Ce(r.byteLength);return Re(n,r)}encodeType(){return ze(-15)}decodeValue(e,r){this.checkType(r);const n=We(e),i=Ar(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class ea extends mt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return ze(e)}encodeType(){return ze(-4)}decodeValue(e,r){return this.checkType(r),or(e)}get name(){return"int"}valueToString(e){return e.toString()}}class ta extends mt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return Ce(e)}encodeType(){return ze(-3)}decodeValue(e,r){return this.checkType(r),We(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class Ss extends mt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return ze(e)}decodeValue(e,r){this.checkType(r);const n=Ar(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class Tr extends mt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=os(this._bits-1)*BigInt(-1),n=os(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const c=BigInt(e);i=c>=r&&c<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return Zo(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return ze(-9-e)}decodeValue(e,r){this.checkType(r);const n=Qu(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class ur extends mt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=os(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return Ju(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return ze(-5-e)}decodeValue(e,r){this.checkType(r);const n=Xo(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class bi extends fr{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof ur&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof ur?this._type._bits:this._type instanceof Tr?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(c){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${c.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=Ce(e.length);if(this._blobOptimization)return Re(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Re(r,new Uint8Array(e.buffer));const n=new Dr(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const c=this._type.encodeValue(i);n.write(new Uint8Array(c))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=ze(-19),n=this._type.encodeType(e);e.add(this,Re(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof bi))throw new Error("Not a vector type");const i=Number(We(e));if(this._type instanceof ur){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof Tr){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const c=[];for(let f=0;f<i;f++)c.push(this._type.decodeValue(e,n._type));return c}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Sr extends fr{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Re(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=ze(-18),n=this._type.encodeType(e);e.add(this,Re(r,n))}decodeValue(e,r){if(r instanceof ui)return[];if(r instanceof Lr)return[];let n=r;if(r instanceof Qt){const i=r.getType();if(typeof i>"u")throw new Error("type mismatch with uninitialized type");n=i}if(n instanceof Sr)switch(vr(e)){case 0:return[];case 1:{const i=e.save();try{return[this._type.decodeValue(e,n._type)]}catch{return e.restore(i),n._type.decodeValue(e,n._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof ui||this._type instanceof Sr||this._type instanceof Lr)return n.decodeValue(e,n),[];{const i=e.save();try{return[this._type.decodeValue(e,r)]}catch{return e.restore(i),n.decodeValue(e,r),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class En extends fr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>$t(r[0])-$t(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=pn(this._fields,r,([,i],c)=>i.encodeValue(c));return Re(...n)}_buildTypeTableImpl(e){this._fields.forEach(([c,f])=>f.buildTypeTable(e));const r=ze(-20),n=Ce(this._fields.length),i=this._fields.map(([c,f])=>Re(Ce($t(c)),f.encodeType(e)));e.add(this,Re(r,n,Re(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof En))throw new Error("Not a record type");const i={};let c=0,f=0;for(;f<n._fields.length;){const[o,w]=n._fields[f];if(c>=this._fields.length){w.decodeValue(e,w),f++;continue}const[b,x]=this._fields[c],N=$t(this._fields[c][0]),U=$t(o);if(N===U)i[b]=x.decodeValue(e,w),c++,f++;else if(U>N)if(x instanceof Sr||x instanceof Lr)i[b]=[],c++;else throw new Error("Cannot find required field "+b);else w.decodeValue(e,w),f++}for(const[o,w]of this._fields.slice(c))if(w instanceof Sr||w instanceof Lr)i[o]=[];else throw new Error("Cannot find required field "+o);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${pn(this._fields,r,([i,c],f)=>i+"="+c.valueToString(f)).join("; ")}}`}}class _i extends En{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=pn(this._components,e,(n,i)=>n.encodeValue(i));return Re(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof _i))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[c,f]of n._components.entries())c>=this._components.length?f.decodeValue(e,f):i.push(this._components[c].decodeValue(e,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${pn(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class xi extends fr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>$t(r[0])-$t(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const c=Ce(r),f=i.encodeValue(e[n]);return Re(c,f)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,c])=>{c.buildTypeTable(e)});const r=ze(-21),n=Ce(this._fields.length),i=this._fields.map(([c,f])=>Re(Ce($t(c)),f.encodeType(e)));e.add(this,Re(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof xi))throw new Error("Not a variant type");const i=Number(We(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[c,f]=n._fields[i];for(const[o,w]of this._fields)if($t(c)===$t(o)){const b=w.decodeValue(e,f);return{[o]:b}}throw new Error("Cannot find field hash "+c)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class Qt extends fr{constructor(){super(...arguments),this._id=Qt._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}Qt._counter=0;function Ns(t){if(vr(t)!==1)throw new Error("Cannot decode principal");const r=Number(We(t));return xe.fromUint8Array(new Uint8Array(Ar(t,r)))}class ra extends mt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=Ce(r.byteLength);return Re(new Uint8Array([1]),n,r)}encodeType(){return ze(-24)}decodeValue(e,r){return this.checkType(r),Ns(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class Is extends fr{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=Ce(n.byteLength),c=Re(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),o=Ce(f.byteLength);return Re(new Uint8Array([1]),c,o,f)}_buildTypeTableImpl(e){this.argTypes.forEach(b=>b.buildTypeTable(e)),this.retTypes.forEach(b=>b.buildTypeTable(e));const r=ze(-22),n=Ce(this.argTypes.length),i=Re(...this.argTypes.map(b=>b.encodeType(e))),c=Ce(this.retTypes.length),f=Re(...this.retTypes.map(b=>b.encodeType(e))),o=Ce(this.annotations.length),w=Re(...this.annotations.map(b=>this.encodeAnnotation(b)));e.add(this,Re(r,n,i,c,f,o,w))}decodeValue(e){if(vr(e)!==1)throw new Error("Cannot decode function reference");const n=Ns(e),i=Number(We(e)),c=Ar(e,i),o=new TextDecoder("utf8",{fatal:!0}).decode(c);return[n,o]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e})  (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class na extends fr{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=Ce(r.length);return Re(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([c,f])=>f.buildTypeTable(e));const r=ze(-23),n=Ce(this._fields.length),i=this._fields.map(([c,f])=>{const o=new TextEncoder().encode(c),w=Ce(o.length);return Re(w,o,f.encodeType(e))});e.add(this,Re(r,n,...i))}decodeValue(e){return Ns(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function Ge(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>Ks?e.substring(0,Ks-3)+"...":e}function as(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new Du;t.forEach(w=>w.buildTypeTable(r));const n=new TextEncoder().encode(Hn),i=r.encode(),c=Ce(e.length),f=Re(...t.map(w=>w.encodeType(r))),o=Re(...pn(t,e,(w,b)=>{try{w.covariant(b)}catch(x){throw new Error(x.message+`

`)}return w.encodeValue(b)}));return Re(n,i,c,f,o)}function ia(t,e){const r=new Dr(e);if(e.byteLength<Hn.length)throw new Error("Message length smaller than magic number");const n=Ar(r,Hn.length),i=new TextDecoder().decode(n);if(i!==Hn)throw new Error("Wrong magic number: "+JSON.stringify(i));function c(E){const y=[],M=Number(We(E));for(let H=0;H<M;H++){const K=Number(or(E));switch(K){case-18:case-19:{const ne=Number(or(E));y.push([K,ne]);break}case-20:case-21:{const ne=[];let T=Number(We(E)),j;for(;T--;){const Z=Number(We(E));if(Z>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof j=="number"&&j>=Z)throw new Error("field id collision or not sorted");j=Z;const J=Number(or(E));ne.push([Z,J])}y.push([K,ne]);break}case-22:{const ne=[];let T=Number(We(E));for(;T--;)ne.push(Number(or(E)));const j=[];let Z=Number(We(E));for(;Z--;)j.push(Number(or(E)));const J=[];let V=Number(We(E));for(;V--;)switch(Number(We(E))){case 1:{J.push("query");break}case 2:{J.push("oneway");break}case 3:{J.push("composite_query");break}default:throw new Error("unknown annotation")}y.push([K,[ne,j,J]]);break}case-23:{let ne=Number(We(E));const T=[];for(;ne--;){const j=Number(We(E)),Z=new TextDecoder().decode(Ar(E,j)),J=or(E);T.push([Z,J])}y.push([K,T]);break}default:throw new Error("Illegal op_code: "+K)}}const C=[],z=Number(We(E));for(let H=0;H<z;H++)C.push(Number(or(E)));return[y,C]}const[f,o]=c(r);if(o.length<t.length)throw new Error("Wrong number of return values");const w=f.map(E=>Na());function b(E){if(E<-24)throw new Error("future value not supported");if(E<0)switch(E){case-1:return ca;case-2:return aa;case-3:return la;case-4:return fa;case-5:return ma;case-6:return ba;case-7:return _a;case-8:return xa;case-9:return pa;case-10:return ya;case-11:return wa;case-12:return ga;case-13:return ha;case-14:return da;case-15:return ua;case-16:return oa;case-17:return sa;case-24:return Ea;default:throw new Error("Illegal op_code: "+E)}if(E>=f.length)throw new Error("type index out of range");return w[E]}function x(E){switch(E[0]){case-19:{const y=b(E[1]);return Aa(y)}case-18:{const y=b(E[1]);return va(y)}case-20:{const y={};for(const[z,H]of E[1]){const K=`_${z}_`;y[K]=b(H)}const M=Ta(y),C=M.tryAsTuple();return Array.isArray(C)?Ba(...C):M}case-21:{const y={};for(const[M,C]of E[1]){const z=`_${M}_`;y[z]=b(C)}return Sa(y)}case-22:{const[y,M,C]=E[1];return Ia(y.map(z=>b(z)),M.map(z=>b(z)),C)}case-23:{const y={},M=E[1];for(const[C,z]of M){let H=b(z);if(H instanceof Qt&&(H=H.getType()),!(H instanceof Is))throw new Error("Illegal service definition: services can only contain functions");y[C]=H}return Ra(y)}default:throw new Error("Illegal op_code: "+E[0])}}f.forEach((E,y)=>{if(E[0]===-22){const M=x(E);w[y].fill(M)}}),f.forEach((E,y)=>{if(E[0]!==-22){const M=x(E);w[y].fill(M)}});const N=o.map(E=>b(E)),U=t.map((E,y)=>E.decodeValue(r,N[y]));for(let E=t.length;E<N.length;E++)N[E].decodeValue(r,N[E]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return U}const sa=new Lo,oa=new Lr,tf=new Jo,aa=new Qo,ca=new ui,ua=new Do,fa=new ea,la=new ta,ha=new Ss(32),da=new Ss(64),pa=new Tr(8),ya=new Tr(16),wa=new Tr(32),ga=new Tr(64),ma=new ur(8),ba=new ur(16),_a=new ur(32),xa=new ur(64),Ea=new ra;function Ba(...t){return new _i(t)}function Aa(t){return new bi(t)}function va(t){return new Sr(t)}function Ta(t){return new En(t)}function Sa(t){return new xi(t)}function Na(){return new Qt}function Ia(t,e,r=[]){return new Is(t,e,r)}function Ra(t){return new na(t)}const rf=Object.freeze(Object.defineProperty({__proto__:null,Bool:aa,BoolClass:Qo,ConstructType:fr,Empty:sa,EmptyClass:Lo,FixedIntClass:Tr,FixedNatClass:ur,Float32:ha,Float64:da,FloatClass:Ss,Func:Ia,FuncClass:Is,Int:fa,Int16:ya,Int32:wa,Int64:ga,Int8:pa,IntClass:ea,Nat:la,Nat16:ba,Nat32:_a,Nat64:xa,Nat8:ma,NatClass:ta,Null:ca,NullClass:ui,Opt:va,OptClass:Sr,PrimitiveType:mt,Principal:Ea,PrincipalClass:ra,Rec:Na,RecClass:Qt,Record:Ta,RecordClass:En,Reserved:oa,ReservedClass:Lr,Service:Ra,ServiceClass:na,Text:ua,TextClass:Do,Tuple:Ba,TupleClass:_i,Type:mi,Unknown:tf,UnknownClass:Jo,Variant:Sa,VariantClass:xi,Vec:Aa,VecClass:bi,Visitor:ef,decode:ia,encode:as},Symbol.toStringTag,{value:"Module"}));var Ua={},Bn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=_n,r=xn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=H,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=c(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var h=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(h,s),h.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var s=new Uint8Array(h);return Object.setPrototypeOf(s,o.prototype),s}function o(h,s,a){if(typeof h=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(h)}return w(h,s,a)}o.poolSize=8192;function w(h,s,a){if(typeof h=="string")return U(h,s);if(ArrayBuffer.isView(h))return y(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(O(h,ArrayBuffer)||h&&O(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(h,SharedArrayBuffer)||h&&O(h.buffer,SharedArrayBuffer)))return M(h,s,a);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var p=h.valueOf&&h.valueOf();if(p!=null&&p!==h)return o.from(p,s,a);var m=C(h);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return o.from(h[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}o.from=function(h,s,a){return w(h,s,a)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function b(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function x(h,s,a){return b(h),h<=0?f(h):s!==void 0?typeof a=="string"?f(h).fill(s,a):f(h).fill(s):f(h)}o.alloc=function(h,s,a){return x(h,s,a)};function N(h){return b(h),f(h<0?0:z(h)|0)}o.allocUnsafe=function(h){return N(h)},o.allocUnsafeSlow=function(h){return N(h)};function U(h,s){if((typeof s!="string"||s==="")&&(s="utf8"),!o.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=K(h,s)|0,p=f(a),m=p.write(h,s);return m!==a&&(p=p.slice(0,m)),p}function E(h){for(var s=h.length<0?0:z(h.length)|0,a=f(s),p=0;p<s;p+=1)a[p]=h[p]&255;return a}function y(h){if(O(h,Uint8Array)){var s=new Uint8Array(h);return M(s.buffer,s.byteOffset,s.byteLength)}return E(h)}function M(h,s,a){if(s<0||h.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');var p;return s===void 0&&a===void 0?p=new Uint8Array(h):a===void 0?p=new Uint8Array(h,s):p=new Uint8Array(h,s,a),Object.setPrototypeOf(p,o.prototype),p}function C(h){if(o.isBuffer(h)){var s=z(h.length)|0,a=f(s);return a.length===0||h.copy(a,0,0,s),a}if(h.length!==void 0)return typeof h.length!="number"||F(h.length)?f(0):E(h);if(h.type==="Buffer"&&Array.isArray(h.data))return E(h.data)}function z(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function H(h){return+h!=h&&(h=0),o.alloc(+h)}o.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==o.prototype},o.compare=function(s,a){if(O(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),O(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),!o.isBuffer(s)||!o.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;for(var p=s.length,m=a.length,I=0,Y=Math.min(p,m);I<Y;++I)if(s[I]!==a[I]){p=s[I],m=a[I];break}return p<m?-1:m<p?1:0},o.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return o.alloc(0);var p;if(a===void 0)for(a=0,p=0;p<s.length;++p)a+=s[p].length;var m=o.allocUnsafe(a),I=0;for(p=0;p<s.length;++p){var Y=s[p];if(O(Y,Uint8Array))I+Y.length>m.length?o.from(Y).copy(m,I):Uint8Array.prototype.set.call(m,Y,I);else if(o.isBuffer(Y))Y.copy(m,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=Y.length}return m};function K(h,s){if(o.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||O(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var a=h.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&a===0)return 0;for(var m=!1;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return Q(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return _(h).length;default:if(m)return p?-1:Q(h).length;s=(""+s).toLowerCase(),m=!0}}o.byteLength=K;function ne(h,s,a){var p=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(h||(h="utf8");;)switch(h){case"hex":return le(this,s,a);case"utf8":case"utf-8":return R(this,s,a);case"ascii":return D(this,s,a);case"latin1":case"binary":return re(this,s,a);case"base64":return A(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,s,a);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),p=!0}}o.prototype._isBuffer=!0;function T(h,s,a){var p=h[s];h[s]=h[a],h[a]=p}o.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<s;a+=2)T(this,a,a+1);return this},o.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<s;a+=4)T(this,a,a+3),T(this,a+1,a+2);return this},o.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<s;a+=8)T(this,a,a+7),T(this,a+1,a+6),T(this,a+2,a+5),T(this,a+3,a+4);return this},o.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?R(this,0,s):ne.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(s){if(!o.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:o.compare(this,s)===0},o.prototype.inspect=function(){var s="",a=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(s,a,p,m,I){if(O(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),!o.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(a===void 0&&(a=0),p===void 0&&(p=s?s.length:0),m===void 0&&(m=0),I===void 0&&(I=this.length),a<0||p>s.length||m<0||I>this.length)throw new RangeError("out of range index");if(m>=I&&a>=p)return 0;if(m>=I)return-1;if(a>=p)return 1;if(a>>>=0,p>>>=0,m>>>=0,I>>>=0,this===s)return 0;for(var Y=I-m,se=p-a,ue=Math.min(Y,se),he=this.slice(m,I),be=s.slice(a,p),d=0;d<ue;++d)if(he[d]!==be[d]){Y=he[d],se=be[d];break}return Y<se?-1:se<Y?1:0};function j(h,s,a,p,m){if(h.length===0)return-1;if(typeof a=="string"?(p=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,F(a)&&(a=m?0:h.length-1),a<0&&(a=h.length+a),a>=h.length){if(m)return-1;a=h.length-1}else if(a<0)if(m)a=0;else return-1;if(typeof s=="string"&&(s=o.from(s,p)),o.isBuffer(s))return s.length===0?-1:Z(h,s,a,p,m);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(h,s,a):Uint8Array.prototype.lastIndexOf.call(h,s,a):Z(h,[s],a,p,m);throw new TypeError("val must be string, number or Buffer")}function Z(h,s,a,p,m){var I=1,Y=h.length,se=s.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(h.length<2||s.length<2)return-1;I=2,Y/=2,se/=2,a/=2}function ue(l,v){return I===1?l[v]:l.readUInt16BE(v*I)}var he;if(m){var be=-1;for(he=a;he<Y;he++)if(ue(h,he)===ue(s,be===-1?0:he-be)){if(be===-1&&(be=he),he-be+1===se)return be*I}else be!==-1&&(he-=he-be),be=-1}else for(a+se>Y&&(a=Y-se),he=a;he>=0;he--){for(var d=!0,u=0;u<se;u++)if(ue(h,he+u)!==ue(s,u)){d=!1;break}if(d)return he}return-1}o.prototype.includes=function(s,a,p){return this.indexOf(s,a,p)!==-1},o.prototype.indexOf=function(s,a,p){return j(this,s,a,p,!0)},o.prototype.lastIndexOf=function(s,a,p){return j(this,s,a,p,!1)};function J(h,s,a,p){a=Number(a)||0;var m=h.length-a;p?(p=Number(p),p>m&&(p=m)):p=m;var I=s.length;p>I/2&&(p=I/2);for(var Y=0;Y<p;++Y){var se=parseInt(s.substr(Y*2,2),16);if(F(se))return Y;h[a+Y]=se}return Y}function V(h,s,a,p){return S(Q(s,h.length-a),h,a,p)}function q(h,s,a,p){return S(ie(s),h,a,p)}function ee(h,s,a,p){return S(_(s),h,a,p)}function te(h,s,a,p){return S(g(s,h.length-a),h,a,p)}o.prototype.write=function(s,a,p,m){if(a===void 0)m="utf8",p=this.length,a=0;else if(p===void 0&&typeof a=="string")m=a,p=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(p)?(p=p>>>0,m===void 0&&(m="utf8")):(m=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var I=this.length-a;if((p===void 0||p>I)&&(p=I),s.length>0&&(p<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");for(var Y=!1;;)switch(m){case"hex":return J(this,s,a,p);case"utf8":case"utf-8":return V(this,s,a,p);case"ascii":case"latin1":case"binary":return q(this,s,a,p);case"base64":return ee(this,s,a,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,s,a,p);default:if(Y)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),Y=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(h,s,a){return s===0&&a===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(s,a))}function R(h,s,a){a=Math.min(h.length,a);for(var p=[],m=s;m<a;){var I=h[m],Y=null,se=I>239?4:I>223?3:I>191?2:1;if(m+se<=a){var ue,he,be,d;switch(se){case 1:I<128&&(Y=I);break;case 2:ue=h[m+1],(ue&192)===128&&(d=(I&31)<<6|ue&63,d>127&&(Y=d));break;case 3:ue=h[m+1],he=h[m+2],(ue&192)===128&&(he&192)===128&&(d=(I&15)<<12|(ue&63)<<6|he&63,d>2047&&(d<55296||d>57343)&&(Y=d));break;case 4:ue=h[m+1],he=h[m+2],be=h[m+3],(ue&192)===128&&(he&192)===128&&(be&192)===128&&(d=(I&15)<<18|(ue&63)<<12|(he&63)<<6|be&63,d>65535&&d<1114112&&(Y=d))}}Y===null?(Y=65533,se=1):Y>65535&&(Y-=65536,p.push(Y>>>10&1023|55296),Y=56320|Y&1023),p.push(Y),m+=se}return L(p)}var G=4096;function L(h){var s=h.length;if(s<=G)return String.fromCharCode.apply(String,h);for(var a="",p=0;p<s;)a+=String.fromCharCode.apply(String,h.slice(p,p+=G));return a}function D(h,s,a){var p="";a=Math.min(h.length,a);for(var m=s;m<a;++m)p+=String.fromCharCode(h[m]&127);return p}function re(h,s,a){var p="";a=Math.min(h.length,a);for(var m=s;m<a;++m)p+=String.fromCharCode(h[m]);return p}function le(h,s,a){var p=h.length;(!s||s<0)&&(s=0),(!a||a<0||a>p)&&(a=p);for(var m="",I=s;I<a;++I)m+=P[h[I]];return m}function ye(h,s,a){for(var p=h.slice(s,a),m="",I=0;I<p.length-1;I+=2)m+=String.fromCharCode(p[I]+p[I+1]*256);return m}o.prototype.slice=function(s,a){var p=this.length;s=~~s,a=a===void 0?p:~~a,s<0?(s+=p,s<0&&(s=0)):s>p&&(s=p),a<0?(a+=p,a<0&&(a=0)):a>p&&(a=p),a<s&&(a=s);var m=this.subarray(s,a);return Object.setPrototypeOf(m,o.prototype),m};function oe(h,s,a){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+s>a)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=this[s],I=1,Y=0;++Y<a&&(I*=256);)m+=this[s+Y]*I;return m},o.prototype.readUintBE=o.prototype.readUIntBE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=this[s+--a],I=1;a>0&&(I*=256);)m+=this[s+--a]*I;return m},o.prototype.readUint8=o.prototype.readUInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]|this[s+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]<<8|this[s+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},o.prototype.readIntLE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=this[s],I=1,Y=0;++Y<a&&(I*=256);)m+=this[s+Y]*I;return I*=128,m>=I&&(m-=Math.pow(2,8*a)),m},o.prototype.readIntBE=function(s,a,p){s=s>>>0,a=a>>>0,p||oe(s,a,this.length);for(var m=a,I=1,Y=this[s+--m];m>0&&(I*=256);)Y+=this[s+--m]*I;return I*=128,Y>=I&&(Y-=Math.pow(2,8*a)),Y},o.prototype.readInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},o.prototype.readInt16LE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var p=this[s]|this[s+1]<<8;return p&32768?p|4294901760:p},o.prototype.readInt16BE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var p=this[s+1]|this[s]<<8;return p&32768?p|4294901760:p},o.prototype.readInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},o.prototype.readInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},o.prototype.readFloatLE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!0,23,4)},o.prototype.readFloatBE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!1,23,4)},o.prototype.readDoubleLE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!0,52,8)},o.prototype.readDoubleBE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!1,52,8)};function fe(h,s,a,p,m,I){if(!o.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>m||s<I)throw new RangeError('"value" argument is out of bounds');if(a+p>h.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(s,a,p,m){if(s=+s,a=a>>>0,p=p>>>0,!m){var I=Math.pow(2,8*p)-1;fe(this,s,a,p,I,0)}var Y=1,se=0;for(this[a]=s&255;++se<p&&(Y*=256);)this[a+se]=s/Y&255;return a+p},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(s,a,p,m){if(s=+s,a=a>>>0,p=p>>>0,!m){var I=Math.pow(2,8*p)-1;fe(this,s,a,p,I,0)}var Y=p-1,se=1;for(this[a+Y]=s&255;--Y>=0&&(se*=256);)this[a+Y]=s/se&255;return a+p},o.prototype.writeUint8=o.prototype.writeUInt8=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,1,255,0),this[a]=s&255,a+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,2,65535,0),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=s&255,a+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4},o.prototype.writeIntLE=function(s,a,p,m){if(s=+s,a=a>>>0,!m){var I=Math.pow(2,8*p-1);fe(this,s,a,p,I-1,-I)}var Y=0,se=1,ue=0;for(this[a]=s&255;++Y<p&&(se*=256);)s<0&&ue===0&&this[a+Y-1]!==0&&(ue=1),this[a+Y]=(s/se>>0)-ue&255;return a+p},o.prototype.writeIntBE=function(s,a,p,m){if(s=+s,a=a>>>0,!m){var I=Math.pow(2,8*p-1);fe(this,s,a,p,I-1,-I)}var Y=p-1,se=1,ue=0;for(this[a+Y]=s&255;--Y>=0&&(se*=256);)s<0&&ue===0&&this[a+Y+1]!==0&&(ue=1),this[a+Y]=(s/se>>0)-ue&255;return a+p},o.prototype.writeInt8=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=s&255,a+1},o.prototype.writeInt16LE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,2,32767,-32768),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeInt16BE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeInt32LE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,4,2147483647,-2147483648),this[a]=s&255,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},o.prototype.writeInt32BE=function(s,a,p){return s=+s,a=a>>>0,p||fe(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4};function Ne(h,s,a,p,m,I){if(a+p>h.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function B(h,s,a,p,m){return s=+s,a=a>>>0,m||Ne(h,s,a,4),r.write(h,s,a,p,23,4),a+4}o.prototype.writeFloatLE=function(s,a,p){return B(this,s,a,!0,p)},o.prototype.writeFloatBE=function(s,a,p){return B(this,s,a,!1,p)};function Ae(h,s,a,p,m){return s=+s,a=a>>>0,m||Ne(h,s,a,8),r.write(h,s,a,p,52,8),a+8}o.prototype.writeDoubleLE=function(s,a,p){return Ae(this,s,a,!0,p)},o.prototype.writeDoubleBE=function(s,a,p){return Ae(this,s,a,!1,p)},o.prototype.copy=function(s,a,p,m){if(!o.isBuffer(s))throw new TypeError("argument should be a Buffer");if(p||(p=0),!m&&m!==0&&(m=this.length),a>=s.length&&(a=s.length),a||(a=0),m>0&&m<p&&(m=p),m===p||s.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),s.length-a<m-p&&(m=s.length-a+p);var I=m-p;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,p,m):Uint8Array.prototype.set.call(s,this.subarray(p,m),a),I},o.prototype.fill=function(s,a,p,m){if(typeof s=="string"){if(typeof a=="string"?(m=a,a=0,p=this.length):typeof p=="string"&&(m=p,p=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!o.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(s.length===1){var I=s.charCodeAt(0);(m==="utf8"&&I<128||m==="latin1")&&(s=I)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(a<0||this.length<a||this.length<p)throw new RangeError("Out of range index");if(p<=a)return this;a=a>>>0,p=p===void 0?this.length:p>>>0,s||(s=0);var Y;if(typeof s=="number")for(Y=a;Y<p;++Y)this[Y]=s;else{var se=o.isBuffer(s)?s:o.from(s,m),ue=se.length;if(ue===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(Y=0;Y<p-a;++Y)this[Y+a]=se[Y%ue]}return this};var Ie=/[^+/0-9A-Za-z-_]/g;function ae(h){if(h=h.split("=")[0],h=h.trim().replace(Ie,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function Q(h,s){s=s||1/0;for(var a,p=h.length,m=null,I=[],Y=0;Y<p;++Y){if(a=h.charCodeAt(Y),a>55295&&a<57344){if(!m){if(a>56319){(s-=3)>-1&&I.push(239,191,189);continue}else if(Y+1===p){(s-=3)>-1&&I.push(239,191,189);continue}m=a;continue}if(a<56320){(s-=3)>-1&&I.push(239,191,189),m=a;continue}a=(m-55296<<10|a-56320)+65536}else m&&(s-=3)>-1&&I.push(239,191,189);if(m=null,a<128){if((s-=1)<0)break;I.push(a)}else if(a<2048){if((s-=2)<0)break;I.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;I.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;I.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return I}function ie(h){for(var s=[],a=0;a<h.length;++a)s.push(h.charCodeAt(a)&255);return s}function g(h,s){for(var a,p,m,I=[],Y=0;Y<h.length&&!((s-=2)<0);++Y)a=h.charCodeAt(Y),p=a>>8,m=a%256,I.push(m),I.push(p);return I}function _(h){return e.toByteArray(ae(h))}function S(h,s,a,p){for(var m=0;m<p&&!(m+a>=s.length||m>=h.length);++m)s[m+a]=h[m];return m}function O(h,s){return h instanceof s||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===s.name}function F(h){return h!==h}var P=function(){for(var h="0123456789abcdef",s=new Array(256),a=0;a<16;++a)for(var p=a*16,m=0;m<16;++m)s[p+m]=h[a]+h[m];return s}()})(Bn);var Fa={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,c=Math.floor,f="[BigNumber Error] ",o=f+"Number primitive has more than 15 significant digits: ",w=1e14,b=14,x=9007199254740991,N=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],U=1e7,E=1e9;function y(j){var Z,J,V,q=B.prototype={constructor:B,toString:null,valueOf:null},ee=new B(1),te=20,A=4,R=-7,G=21,L=-1e7,D=1e7,re=!1,le=1,ye=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz",Ne=!0;function B(g,_){var S,O,F,P,h,s,a,p,m=this;if(!(m instanceof B))return new B(g,_);if(_==null){if(g&&g._isBigNumber===!0){m.s=g.s,!g.c||g.e>D?m.c=m.e=null:g.e<L?m.c=[m.e=0]:(m.e=g.e,m.c=g.c.slice());return}if((s=typeof g=="number")&&g*0==0){if(m.s=1/g<0?(g=-g,-1):1,g===~~g){for(P=0,h=g;h>=10;h/=10,P++);P>D?m.c=m.e=null:(m.e=P,m.c=[g]);return}p=String(g)}else{if(!n.test(p=String(g)))return V(m,p,s);m.s=p.charCodeAt(0)==45?(p=p.slice(1),-1):1}(P=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(P<0&&(P=h),P+=+p.slice(h+1),p=p.substring(0,h)):P<0&&(P=p.length)}else{if(H(_,2,fe.length,"Base"),_==10&&Ne)return m=new B(g),Q(m,te+m.e+1,A);if(p=String(g),s=typeof g=="number"){if(g*0!=0)return V(m,p,s,_);if(m.s=1/g<0?(p=p.slice(1),-1):1,B.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+g)}else m.s=p.charCodeAt(0)===45?(p=p.slice(1),-1):1;for(S=fe.slice(0,_),P=h=0,a=p.length;h<a;h++)if(S.indexOf(O=p.charAt(h))<0){if(O=="."){if(h>P){P=a;continue}}else if(!F&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){F=!0,h=-1,P=0;continue}return V(m,String(g),s,_)}s=!1,p=J(p,_,10,m.s),(P=p.indexOf("."))>-1?p=p.replace(".",""):P=p.length}for(h=0;p.charCodeAt(h)===48;h++);for(a=p.length;p.charCodeAt(--a)===48;);if(p=p.slice(h,++a)){if(a-=h,s&&B.DEBUG&&a>15&&(g>x||g!==c(g)))throw Error(o+m.s*g);if((P=P-h-1)>D)m.c=m.e=null;else if(P<L)m.c=[m.e=0];else{if(m.e=P,m.c=[],h=(P+1)%b,P<0&&(h+=b),h<a){for(h&&m.c.push(+p.slice(0,h)),a-=b;h<a;)m.c.push(+p.slice(h,h+=b));h=b-(p=p.slice(h)).length}else h-=a;for(;h--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}B.clone=y,B.ROUND_UP=0,B.ROUND_DOWN=1,B.ROUND_CEIL=2,B.ROUND_FLOOR=3,B.ROUND_HALF_UP=4,B.ROUND_HALF_DOWN=5,B.ROUND_HALF_EVEN=6,B.ROUND_HALF_CEIL=7,B.ROUND_HALF_FLOOR=8,B.EUCLID=9,B.config=B.set=function(g){var _,S;if(g!=null)if(typeof g=="object"){if(g.hasOwnProperty(_="DECIMAL_PLACES")&&(S=g[_],H(S,0,E,_),te=S),g.hasOwnProperty(_="ROUNDING_MODE")&&(S=g[_],H(S,0,8,_),A=S),g.hasOwnProperty(_="EXPONENTIAL_AT")&&(S=g[_],S&&S.pop?(H(S[0],-E,0,_),H(S[1],0,E,_),R=S[0],G=S[1]):(H(S,-E,E,_),R=-(G=S<0?-S:S))),g.hasOwnProperty(_="RANGE"))if(S=g[_],S&&S.pop)H(S[0],-E,-1,_),H(S[1],1,E,_),L=S[0],D=S[1];else if(H(S,-E,E,_),S)L=-(D=S<0?-S:S);else throw Error(f+_+" cannot be zero: "+S);if(g.hasOwnProperty(_="CRYPTO"))if(S=g[_],S===!!S)if(S)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=S;else throw re=!S,Error(f+"crypto unavailable");else re=S;else throw Error(f+_+" not true or false: "+S);if(g.hasOwnProperty(_="MODULO_MODE")&&(S=g[_],H(S,0,9,_),le=S),g.hasOwnProperty(_="POW_PRECISION")&&(S=g[_],H(S,0,E,_),ye=S),g.hasOwnProperty(_="FORMAT"))if(S=g[_],typeof S=="object")oe=S;else throw Error(f+_+" not an object: "+S);if(g.hasOwnProperty(_="ALPHABET"))if(S=g[_],typeof S=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(S))Ne=S.slice(0,10)=="0123456789",fe=S;else throw Error(f+_+" invalid: "+S)}else throw Error(f+"Object expected: "+g);return{DECIMAL_PLACES:te,ROUNDING_MODE:A,EXPONENTIAL_AT:[R,G],RANGE:[L,D],CRYPTO:re,MODULO_MODE:le,POW_PRECISION:ye,FORMAT:oe,ALPHABET:fe}},B.isBigNumber=function(g){if(!g||g._isBigNumber!==!0)return!1;if(!B.DEBUG)return!0;var _,S,O=g.c,F=g.e,P=g.s;e:if({}.toString.call(O)=="[object Array]"){if((P===1||P===-1)&&F>=-E&&F<=E&&F===c(F)){if(O[0]===0){if(F===0&&O.length===1)return!0;break e}if(_=(F+1)%b,_<1&&(_+=b),String(O[0]).length==_){for(_=0;_<O.length;_++)if(S=O[_],S<0||S>=w||S!==c(S))break e;if(S!==0)return!0}}}else if(O===null&&F===null&&(P===null||P===1||P===-1))return!0;throw Error(f+"Invalid BigNumber: "+g)},B.maximum=B.max=function(){return Ie(arguments,-1)},B.minimum=B.min=function(){return Ie(arguments,1)},B.random=function(){var g=9007199254740992,_=Math.random()*g&2097151?function(){return c(Math.random()*g)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(S){var O,F,P,h,s,a=0,p=[],m=new B(ee);if(S==null?S=te:H(S,0,E),h=i(S/b),re)if(crypto.getRandomValues){for(O=crypto.getRandomValues(new Uint32Array(h*=2));a<h;)s=O[a]*131072+(O[a+1]>>>11),s>=9e15?(F=crypto.getRandomValues(new Uint32Array(2)),O[a]=F[0],O[a+1]=F[1]):(p.push(s%1e14),a+=2);a=h/2}else if(crypto.randomBytes){for(O=crypto.randomBytes(h*=7);a<h;)s=(O[a]&31)*281474976710656+O[a+1]*1099511627776+O[a+2]*4294967296+O[a+3]*16777216+(O[a+4]<<16)+(O[a+5]<<8)+O[a+6],s>=9e15?crypto.randomBytes(7).copy(O,a):(p.push(s%1e14),a+=7);a=h/7}else throw re=!1,Error(f+"crypto unavailable");if(!re)for(;a<h;)s=_(),s<9e15&&(p[a++]=s%1e14);for(h=p[--a],S%=b,h&&S&&(s=N[b-S],p[a]=c(h/s)*s);p[a]===0;p.pop(),a--);if(a<0)p=[P=0];else{for(P=-1;p[0]===0;p.splice(0,1),P-=b);for(a=1,s=p[0];s>=10;s/=10,a++);a<b&&(P-=b-a)}return m.e=P,m.c=p,m}}(),B.sum=function(){for(var g=1,_=arguments,S=new B(_[0]);g<_.length;)S=S.plus(_[g++]);return S},J=function(){var g="0123456789";function _(S,O,F,P){for(var h,s=[0],a,p=0,m=S.length;p<m;){for(a=s.length;a--;s[a]*=O);for(s[0]+=P.indexOf(S.charAt(p++)),h=0;h<s.length;h++)s[h]>F-1&&(s[h+1]==null&&(s[h+1]=0),s[h+1]+=s[h]/F|0,s[h]%=F)}return s.reverse()}return function(S,O,F,P,h){var s,a,p,m,I,Y,se,ue,he=S.indexOf("."),be=te,d=A;for(he>=0&&(m=ye,ye=0,S=S.replace(".",""),ue=new B(O),Y=ue.pow(S.length-he),ye=m,ue.c=_(T(C(Y.c),Y.e,"0"),10,F,g),ue.e=ue.c.length),se=_(S,O,F,h?(s=fe,g):(s=g,fe)),p=m=se.length;se[--m]==0;se.pop());if(!se[0])return s.charAt(0);if(he<0?--p:(Y.c=se,Y.e=p,Y.s=P,Y=Z(Y,ue,be,d,F),se=Y.c,I=Y.r,p=Y.e),a=p+be+1,he=se[a],m=F/2,I=I||a<0||se[a+1]!=null,I=d<4?(he!=null||I)&&(d==0||d==(Y.s<0?3:2)):he>m||he==m&&(d==4||I||d==6&&se[a-1]&1||d==(Y.s<0?8:7)),a<1||!se[0])S=I?T(s.charAt(1),-be,s.charAt(0)):s.charAt(0);else{if(se.length=a,I)for(--F;++se[--a]>F;)se[a]=0,a||(++p,se=[1].concat(se));for(m=se.length;!se[--m];);for(he=0,S="";he<=m;S+=s.charAt(se[he++]));S=T(S,p,s.charAt(0))}return S}}(),Z=function(){function g(O,F,P){var h,s,a,p,m=0,I=O.length,Y=F%U,se=F/U|0;for(O=O.slice();I--;)a=O[I]%U,p=O[I]/U|0,h=se*a+p*Y,s=Y*a+h%U*U+m,m=(s/P|0)+(h/U|0)+se*p,O[I]=s%P;return m&&(O=[m].concat(O)),O}function _(O,F,P,h){var s,a;if(P!=h)a=P>h?1:-1;else for(s=a=0;s<P;s++)if(O[s]!=F[s]){a=O[s]>F[s]?1:-1;break}return a}function S(O,F,P,h){for(var s=0;P--;)O[P]-=s,s=O[P]<F[P]?1:0,O[P]=s*h+O[P]-F[P];for(;!O[0]&&O.length>1;O.splice(0,1));}return function(O,F,P,h,s){var a,p,m,I,Y,se,ue,he,be,d,u,l,v,$,X,W,ge,_e=O.s==F.s?1:-1,me=O.c,we=F.c;if(!me||!me[0]||!we||!we[0])return new B(!O.s||!F.s||(me?we&&me[0]==we[0]:!we)?NaN:me&&me[0]==0||!we?_e*0:_e/0);for(he=new B(_e),be=he.c=[],p=O.e-F.e,_e=P+p+1,s||(s=w,p=M(O.e/b)-M(F.e/b),_e=_e/b|0),m=0;we[m]==(me[m]||0);m++);if(we[m]>(me[m]||0)&&p--,_e<0)be.push(1),I=!0;else{for($=me.length,W=we.length,m=0,_e+=2,Y=c(s/(we[0]+1)),Y>1&&(we=g(we,Y,s),me=g(me,Y,s),W=we.length,$=me.length),v=W,d=me.slice(0,W),u=d.length;u<W;d[u++]=0);ge=we.slice(),ge=[0].concat(ge),X=we[0],we[1]>=s/2&&X++;do{if(Y=0,a=_(we,d,W,u),a<0){if(l=d[0],W!=u&&(l=l*s+(d[1]||0)),Y=c(l/X),Y>1)for(Y>=s&&(Y=s-1),se=g(we,Y,s),ue=se.length,u=d.length;_(se,d,ue,u)==1;)Y--,S(se,W<ue?ge:we,ue,s),ue=se.length,a=1;else Y==0&&(a=Y=1),se=we.slice(),ue=se.length;if(ue<u&&(se=[0].concat(se)),S(d,se,u,s),u=d.length,a==-1)for(;_(we,d,W,u)<1;)Y++,S(d,W<u?ge:we,u,s),u=d.length}else a===0&&(Y++,d=[0]);be[m++]=Y,d[0]?d[u++]=me[v]||0:(d=[me[v]],u=1)}while((v++<$||d[0]!=null)&&_e--);I=d[0]!=null,be[0]||be.splice(0,1)}if(s==w){for(m=1,_e=be[0];_e>=10;_e/=10,m++);Q(he,P+(he.e=m+p*b-1)+1,h,I)}else he.e=p,he.r=+I;return he}}();function Ae(g,_,S,O){var F,P,h,s,a;if(S==null?S=A:H(S,0,8),!g.c)return g.toString();if(F=g.c[0],h=g.e,_==null)a=C(g.c),a=O==1||O==2&&(h<=R||h>=G)?ne(a,h):T(a,h,"0");else if(g=Q(new B(g),_,S),P=g.e,a=C(g.c),s=a.length,O==1||O==2&&(_<=P||P<=R)){for(;s<_;a+="0",s++);a=ne(a,P)}else if(_-=h+(O===2&&P>h),a=T(a,P,"0"),P+1>s){if(--_>0)for(a+=".";_--;a+="0");}else if(_+=P-s,_>0)for(P+1==s&&(a+=".");_--;a+="0");return g.s<0&&F?"-"+a:a}function Ie(g,_){for(var S,O,F=1,P=new B(g[0]);F<g.length;F++)O=new B(g[F]),(!O.s||(S=z(P,O))===_||S===0&&P.s===_)&&(P=O);return P}function ae(g,_,S){for(var O=1,F=_.length;!_[--F];_.pop());for(F=_[0];F>=10;F/=10,O++);return(S=O+S*b-1)>D?g.c=g.e=null:S<L?g.c=[g.e=0]:(g.e=S,g.c=_),g}V=function(){var g=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,S=/^\.([^.]+)$/,O=/^-?(Infinity|NaN)$/,F=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(P,h,s,a){var p,m=s?h:h.replace(F,"");if(O.test(m))P.s=isNaN(m)?null:m<0?-1:1;else{if(!s&&(m=m.replace(g,function(I,Y,se){return p=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,!a||a==p?Y:I}),a&&(p=a,m=m.replace(_,"$1").replace(S,"0.$1")),h!=m))return new B(m,p);if(B.DEBUG)throw Error(f+"Not a"+(a?" base "+a:"")+" number: "+h);P.s=null}P.c=P.e=null}}();function Q(g,_,S,O){var F,P,h,s,a,p,m,I=g.c,Y=N;if(I){e:{for(F=1,s=I[0];s>=10;s/=10,F++);if(P=_-F,P<0)P+=b,h=_,a=I[p=0],m=c(a/Y[F-h-1]%10);else if(p=i((P+1)/b),p>=I.length)if(O){for(;I.length<=p;I.push(0));a=m=0,F=1,P%=b,h=P-b+1}else break e;else{for(a=s=I[p],F=1;s>=10;s/=10,F++);P%=b,h=P-b+F,m=h<0?0:c(a/Y[F-h-1]%10)}if(O=O||_<0||I[p+1]!=null||(h<0?a:a%Y[F-h-1]),O=S<4?(m||O)&&(S==0||S==(g.s<0?3:2)):m>5||m==5&&(S==4||O||S==6&&(P>0?h>0?a/Y[F-h]:0:I[p-1])%10&1||S==(g.s<0?8:7)),_<1||!I[0])return I.length=0,O?(_-=g.e+1,I[0]=Y[(b-_%b)%b],g.e=-_||0):I[0]=g.e=0,g;if(P==0?(I.length=p,s=1,p--):(I.length=p+1,s=Y[b-P],I[p]=h>0?c(a/Y[F-h]%Y[h])*s:0),O)for(;;)if(p==0){for(P=1,h=I[0];h>=10;h/=10,P++);for(h=I[0]+=s,s=1;h>=10;h/=10,s++);P!=s&&(g.e++,I[0]==w&&(I[0]=1));break}else{if(I[p]+=s,I[p]!=w)break;I[p--]=0,s=1}for(P=I.length;I[--P]===0;I.pop());}g.e>D?g.c=g.e=null:g.e<L&&(g.c=[g.e=0])}return g}function ie(g){var _,S=g.e;return S===null?g.toString():(_=C(g.c),_=S<=R||S>=G?ne(_,S):T(_,S,"0"),g.s<0?"-"+_:_)}return q.absoluteValue=q.abs=function(){var g=new B(this);return g.s<0&&(g.s=1),g},q.comparedTo=function(g,_){return z(this,new B(g,_))},q.decimalPlaces=q.dp=function(g,_){var S,O,F,P=this;if(g!=null)return H(g,0,E),_==null?_=A:H(_,0,8),Q(new B(P),g+P.e+1,_);if(!(S=P.c))return null;if(O=((F=S.length-1)-M(this.e/b))*b,F=S[F])for(;F%10==0;F/=10,O--);return O<0&&(O=0),O},q.dividedBy=q.div=function(g,_){return Z(this,new B(g,_),te,A)},q.dividedToIntegerBy=q.idiv=function(g,_){return Z(this,new B(g,_),0,1)},q.exponentiatedBy=q.pow=function(g,_){var S,O,F,P,h,s,a,p,m,I=this;if(g=new B(g),g.c&&!g.isInteger())throw Error(f+"Exponent not an integer: "+ie(g));if(_!=null&&(_=new B(_)),s=g.e>14,!I.c||!I.c[0]||I.c[0]==1&&!I.e&&I.c.length==1||!g.c||!g.c[0])return m=new B(Math.pow(+ie(I),s?g.s*(2-K(g)):+ie(g))),_?m.mod(_):m;if(a=g.s<0,_){if(_.c?!_.c[0]:!_.s)return new B(NaN);O=!a&&I.isInteger()&&_.isInteger(),O&&(I=I.mod(_))}else{if(g.e>9&&(I.e>0||I.e<-1||(I.e==0?I.c[0]>1||s&&I.c[1]>=24e7:I.c[0]<8e13||s&&I.c[0]<=9999975e7)))return P=I.s<0&&K(g)?-0:0,I.e>-1&&(P=1/P),new B(a?1/P:P);ye&&(P=i(ye/b+2))}for(s?(S=new B(.5),a&&(g.s=1),p=K(g)):(F=Math.abs(+ie(g)),p=F%2),m=new B(ee);;){if(p){if(m=m.times(I),!m.c)break;P?m.c.length>P&&(m.c.length=P):O&&(m=m.mod(_))}if(F){if(F=c(F/2),F===0)break;p=F%2}else if(g=g.times(S),Q(g,g.e+1,1),g.e>14)p=K(g);else{if(F=+ie(g),F===0)break;p=F%2}I=I.times(I),P?I.c&&I.c.length>P&&(I.c.length=P):O&&(I=I.mod(_))}return O?m:(a&&(m=ee.div(m)),_?m.mod(_):P?Q(m,ye,A,h):m)},q.integerValue=function(g){var _=new B(this);return g==null?g=A:H(g,0,8),Q(_,_.e+1,g)},q.isEqualTo=q.eq=function(g,_){return z(this,new B(g,_))===0},q.isFinite=function(){return!!this.c},q.isGreaterThan=q.gt=function(g,_){return z(this,new B(g,_))>0},q.isGreaterThanOrEqualTo=q.gte=function(g,_){return(_=z(this,new B(g,_)))===1||_===0},q.isInteger=function(){return!!this.c&&M(this.e/b)>this.c.length-2},q.isLessThan=q.lt=function(g,_){return z(this,new B(g,_))<0},q.isLessThanOrEqualTo=q.lte=function(g,_){return(_=z(this,new B(g,_)))===-1||_===0},q.isNaN=function(){return!this.s},q.isNegative=function(){return this.s<0},q.isPositive=function(){return this.s>0},q.isZero=function(){return!!this.c&&this.c[0]==0},q.minus=function(g,_){var S,O,F,P,h=this,s=h.s;if(g=new B(g,_),_=g.s,!s||!_)return new B(NaN);if(s!=_)return g.s=-_,h.plus(g);var a=h.e/b,p=g.e/b,m=h.c,I=g.c;if(!a||!p){if(!m||!I)return m?(g.s=-_,g):new B(I?h:NaN);if(!m[0]||!I[0])return I[0]?(g.s=-_,g):new B(m[0]?h:A==3?-0:0)}if(a=M(a),p=M(p),m=m.slice(),s=a-p){for((P=s<0)?(s=-s,F=m):(p=a,F=I),F.reverse(),_=s;_--;F.push(0));F.reverse()}else for(O=(P=(s=m.length)<(_=I.length))?s:_,s=_=0;_<O;_++)if(m[_]!=I[_]){P=m[_]<I[_];break}if(P&&(F=m,m=I,I=F,g.s=-g.s),_=(O=I.length)-(S=m.length),_>0)for(;_--;m[S++]=0);for(_=w-1;O>s;){if(m[--O]<I[O]){for(S=O;S&&!m[--S];m[S]=_);--m[S],m[O]+=w}m[O]-=I[O]}for(;m[0]==0;m.splice(0,1),--p);return m[0]?ae(g,m,p):(g.s=A==3?-1:1,g.c=[g.e=0],g)},q.modulo=q.mod=function(g,_){var S,O,F=this;return g=new B(g,_),!F.c||!g.s||g.c&&!g.c[0]?new B(NaN):!g.c||F.c&&!F.c[0]?new B(F):(le==9?(O=g.s,g.s=1,S=Z(F,g,0,3),g.s=O,S.s*=O):S=Z(F,g,0,le),g=F.minus(S.times(g)),!g.c[0]&&le==1&&(g.s=F.s),g)},q.multipliedBy=q.times=function(g,_){var S,O,F,P,h,s,a,p,m,I,Y,se,ue,he,be,d=this,u=d.c,l=(g=new B(g,_)).c;if(!u||!l||!u[0]||!l[0])return!d.s||!g.s||u&&!u[0]&&!l||l&&!l[0]&&!u?g.c=g.e=g.s=null:(g.s*=d.s,!u||!l?g.c=g.e=null:(g.c=[0],g.e=0)),g;for(O=M(d.e/b)+M(g.e/b),g.s*=d.s,a=u.length,I=l.length,a<I&&(ue=u,u=l,l=ue,F=a,a=I,I=F),F=a+I,ue=[];F--;ue.push(0));for(he=w,be=U,F=I;--F>=0;){for(S=0,Y=l[F]%be,se=l[F]/be|0,h=a,P=F+h;P>F;)p=u[--h]%be,m=u[h]/be|0,s=se*p+m*Y,p=Y*p+s%be*be+ue[P]+S,S=(p/he|0)+(s/be|0)+se*m,ue[P--]=p%he;ue[P]=S}return S?++O:ue.splice(0,1),ae(g,ue,O)},q.negated=function(){var g=new B(this);return g.s=-g.s||null,g},q.plus=function(g,_){var S,O=this,F=O.s;if(g=new B(g,_),_=g.s,!F||!_)return new B(NaN);if(F!=_)return g.s=-_,O.minus(g);var P=O.e/b,h=g.e/b,s=O.c,a=g.c;if(!P||!h){if(!s||!a)return new B(F/0);if(!s[0]||!a[0])return a[0]?g:new B(s[0]?O:F*0)}if(P=M(P),h=M(h),s=s.slice(),F=P-h){for(F>0?(h=P,S=a):(F=-F,S=s),S.reverse();F--;S.push(0));S.reverse()}for(F=s.length,_=a.length,F-_<0&&(S=a,a=s,s=S,_=F),F=0;_;)F=(s[--_]=s[_]+a[_]+F)/w|0,s[_]=w===s[_]?0:s[_]%w;return F&&(s=[F].concat(s),++h),ae(g,s,h)},q.precision=q.sd=function(g,_){var S,O,F,P=this;if(g!=null&&g!==!!g)return H(g,1,E),_==null?_=A:H(_,0,8),Q(new B(P),g,_);if(!(S=P.c))return null;if(F=S.length-1,O=F*b+1,F=S[F]){for(;F%10==0;F/=10,O--);for(F=S[0];F>=10;F/=10,O++);}return g&&P.e+1>O&&(O=P.e+1),O},q.shiftedBy=function(g){return H(g,-x,x),this.times("1e"+g)},q.squareRoot=q.sqrt=function(){var g,_,S,O,F,P=this,h=P.c,s=P.s,a=P.e,p=te+4,m=new B("0.5");if(s!==1||!h||!h[0])return new B(!s||s<0&&(!h||h[0])?NaN:h?P:1/0);if(s=Math.sqrt(+ie(P)),s==0||s==1/0?(_=C(h),(_.length+a)%2==0&&(_+="0"),s=Math.sqrt(+_),a=M((a+1)/2)-(a<0||a%2),s==1/0?_="5e"+a:(_=s.toExponential(),_=_.slice(0,_.indexOf("e")+1)+a),S=new B(_)):S=new B(s+""),S.c[0]){for(a=S.e,s=a+p,s<3&&(s=0);;)if(F=S,S=m.times(F.plus(Z(P,F,p,1))),C(F.c).slice(0,s)===(_=C(S.c)).slice(0,s))if(S.e<a&&--s,_=_.slice(s-3,s+1),_=="9999"||!O&&_=="4999"){if(!O&&(Q(F,F.e+te+2,0),F.times(F).eq(P))){S=F;break}p+=4,s+=4,O=1}else{(!+_||!+_.slice(1)&&_.charAt(0)=="5")&&(Q(S,S.e+te+2,1),g=!S.times(S).eq(P));break}}return Q(S,S.e+te+1,A,g)},q.toExponential=function(g,_){return g!=null&&(H(g,0,E),g++),Ae(this,g,_,1)},q.toFixed=function(g,_){return g!=null&&(H(g,0,E),g=g+this.e+1),Ae(this,g,_)},q.toFormat=function(g,_,S){var O,F=this;if(S==null)g!=null&&_&&typeof _=="object"?(S=_,_=null):g&&typeof g=="object"?(S=g,g=_=null):S=oe;else if(typeof S!="object")throw Error(f+"Argument not an object: "+S);if(O=F.toFixed(g,_),F.c){var P,h=O.split("."),s=+S.groupSize,a=+S.secondaryGroupSize,p=S.groupSeparator||"",m=h[0],I=h[1],Y=F.s<0,se=Y?m.slice(1):m,ue=se.length;if(a&&(P=s,s=a,a=P,ue-=P),s>0&&ue>0){for(P=ue%s||s,m=se.substr(0,P);P<ue;P+=s)m+=p+se.substr(P,s);a>0&&(m+=p+se.slice(P)),Y&&(m="-"+m)}O=I?m+(S.decimalSeparator||"")+((a=+S.fractionGroupSize)?I.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+(S.fractionGroupSeparator||"")):I):m}return(S.prefix||"")+O+(S.suffix||"")},q.toFraction=function(g){var _,S,O,F,P,h,s,a,p,m,I,Y,se=this,ue=se.c;if(g!=null&&(s=new B(g),!s.isInteger()&&(s.c||s.s!==1)||s.lt(ee)))throw Error(f+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+ie(s));if(!ue)return new B(se);for(_=new B(ee),p=S=new B(ee),O=a=new B(ee),Y=C(ue),P=_.e=Y.length-se.e-1,_.c[0]=N[(h=P%b)<0?b+h:h],g=!g||s.comparedTo(_)>0?P>0?_:p:s,h=D,D=1/0,s=new B(Y),a.c[0]=0;m=Z(s,_,0,1),F=S.plus(m.times(O)),F.comparedTo(g)!=1;)S=O,O=F,p=a.plus(m.times(F=p)),a=F,_=s.minus(m.times(F=_)),s=F;return F=Z(g.minus(S),O,0,1),a=a.plus(F.times(p)),S=S.plus(F.times(O)),a.s=p.s=se.s,P=P*2,I=Z(p,O,P,A).minus(se).abs().comparedTo(Z(a,S,P,A).minus(se).abs())<1?[p,O]:[a,S],D=h,I},q.toNumber=function(){return+ie(this)},q.toPrecision=function(g,_){return g!=null&&H(g,1,E),Ae(this,g,_,2)},q.toString=function(g){var _,S=this,O=S.s,F=S.e;return F===null?O?(_="Infinity",O<0&&(_="-"+_)):_="NaN":(g==null?_=F<=R||F>=G?ne(C(S.c),F):T(C(S.c),F,"0"):g===10&&Ne?(S=Q(new B(S),te+F+1,A),_=T(C(S.c),S.e,"0")):(H(g,2,fe.length,"Base"),_=J(T(C(S.c),F,"0"),10,g,O,!0)),O<0&&S.c[0]&&(_="-"+_)),_},q.valueOf=q.toJSON=function(){return ie(this)},q._isBigNumber=!0,j!=null&&B.set(j),B}function M(j){var Z=j|0;return j>0||j===Z?Z:Z-1}function C(j){for(var Z,J,V=1,q=j.length,ee=j[0]+"";V<q;){for(Z=j[V++]+"",J=b-Z.length;J--;Z="0"+Z);ee+=Z}for(q=ee.length;ee.charCodeAt(--q)===48;);return ee.slice(0,q+1||1)}function z(j,Z){var J,V,q=j.c,ee=Z.c,te=j.s,A=Z.s,R=j.e,G=Z.e;if(!te||!A)return null;if(J=q&&!q[0],V=ee&&!ee[0],J||V)return J?V?0:-A:te;if(te!=A)return te;if(J=te<0,V=R==G,!q||!ee)return V?0:!q^J?1:-1;if(!V)return R>G^J?1:-1;for(A=(R=q.length)<(G=ee.length)?R:G,te=0;te<A;te++)if(q[te]!=ee[te])return q[te]>ee[te]^J?1:-1;return R==G?0:R>G^J?1:-1}function H(j,Z,J,V){if(j<Z||j>J||j!==c(j))throw Error(f+(V||"Argument")+(typeof j=="number"?j<Z||j>J?" out of range: ":" not an integer: ":" not a primitive number: ")+String(j))}function K(j){var Z=j.c.length-1;return M(j.e/b)==Z&&j.c[Z]%2!=0}function ne(j,Z){return(j.length>1?j.charAt(0)+"."+j.slice(1):j)+(Z<0?"e":"e+")+Z}function T(j,Z,J){var V,q;if(Z<0){for(q=J+".";++Z;q+=J);j=q+j}else if(V=j.length,++Z>V){for(q=J,Z-=V;--Z;q+=J);j+=q}else Z<V&&(j=j.slice(0,Z)+"."+j.slice(Z));return j}r=y(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Wr)})(Fa);var Ei=Fa.exports,nf=function(e,r,n){var i=new e.Uint8Array(n),c=r.pushInt,f=r.pushInt32,o=r.pushInt32Neg,w=r.pushInt64,b=r.pushInt64Neg,x=r.pushFloat,N=r.pushFloatSingle,U=r.pushFloatDouble,E=r.pushTrue,y=r.pushFalse,M=r.pushUndefined,C=r.pushNull,z=r.pushInfinity,H=r.pushInfinityNeg,K=r.pushNaN,ne=r.pushNaNNeg,T=r.pushArrayStart,j=r.pushArrayStartFixed,Z=r.pushArrayStartFixed32,J=r.pushArrayStartFixed64,V=r.pushObjectStart,q=r.pushObjectStartFixed,ee=r.pushObjectStartFixed32,te=r.pushObjectStartFixed64,A=r.pushByteString,R=r.pushByteStringStart,G=r.pushUtf8String,L=r.pushUtf8StringStart,D=r.pushSimpleUnassigned,re=r.pushTagStart,le=r.pushTagStart4,ye=r.pushTagStart8,oe=r.pushTagUnassigned,fe=r.pushBreak,Ne=e.Math.pow,B=0,Ae=0,Ie=0;function ae(k){for(k=k|0,B=0,Ae=k;(B|0)<(Ae|0)&&(Ie=Dc[i[B]&255](i[B]|0)|0,!((Ie|0)>0)););return Ie|0}function Q(k){return k=k|0,((B|0)+(k|0)|0)<(Ae|0)?0:1}function ie(k){return k=k|0,i[k|0]<<8|i[k+1|0]|0}function g(k){return k=k|0,i[k|0]<<24|i[k+1|0]<<16|i[k+2|0]<<8|i[k+3|0]|0}function _(k){return k=k|0,c(k|0),B=B+1|0,0}function S(k){return k=k|0,Q(1)|0?1:(c(i[B+1|0]|0),B=B+2|0,0)}function O(k){return k=k|0,Q(2)|0?1:(c(ie(B+1|0)|0),B=B+3|0,0)}function F(k){return k=k|0,Q(4)|0?1:(f(ie(B+1|0)|0,ie(B+3|0)|0),B=B+5|0,0)}function P(k){return k=k|0,Q(8)|0?1:(w(ie(B+1|0)|0,ie(B+3|0)|0,ie(B+5|0)|0,ie(B+7|0)|0),B=B+9|0,0)}function h(k){return k=k|0,c(-1-(k-32|0)|0),B=B+1|0,0}function s(k){return k=k|0,Q(1)|0?1:(c(-1-(i[B+1|0]|0)|0),B=B+2|0,0)}function a(k){k=k|0;var ve=0;return Q(2)|0?1:(ve=ie(B+1|0)|0,c(-1-(ve|0)|0),B=B+3|0,0)}function p(k){return k=k|0,Q(4)|0?1:(o(ie(B+1|0)|0,ie(B+3|0)|0),B=B+5|0,0)}function m(k){return k=k|0,Q(8)|0?1:(b(ie(B+1|0)|0,ie(B+3|0)|0,ie(B+5|0)|0,ie(B+7|0)|0),B=B+9|0,0)}function I(k){k=k|0;var ve=0,Te=0,Ee=0;return Ee=k-64|0,Q(Ee|0)|0?1:(ve=B+1|0,Te=(B+1|0)+(Ee|0)|0,A(ve|0,Te|0),B=Te|0,0)}function Y(k){k=k|0;var ve=0,Te=0,Ee=0;return Q(1)|0||(Ee=i[B+1|0]|0,ve=B+2|0,Te=(B+2|0)+(Ee|0)|0,Q(Ee+1|0)|0)?1:(A(ve|0,Te|0),B=Te|0,0)}function se(k){k=k|0;var ve=0,Te=0,Ee=0;return Q(2)|0||(Ee=ie(B+1|0)|0,ve=B+3|0,Te=(B+3|0)+(Ee|0)|0,Q(Ee+2|0)|0)?1:(A(ve|0,Te|0),B=Te|0,0)}function ue(k){k=k|0;var ve=0,Te=0,Ee=0;return Q(4)|0||(Ee=g(B+1|0)|0,ve=B+5|0,Te=(B+5|0)+(Ee|0)|0,Q(Ee+4|0)|0)?1:(A(ve|0,Te|0),B=Te|0,0)}function he(k){return k=k|0,1}function be(k){return k=k|0,R(),B=B+1|0,0}function d(k){k=k|0;var ve=0,Te=0,Ee=0;return Ee=k-96|0,Q(Ee|0)|0?1:(ve=B+1|0,Te=(B+1|0)+(Ee|0)|0,G(ve|0,Te|0),B=Te|0,0)}function u(k){k=k|0;var ve=0,Te=0,Ee=0;return Q(1)|0||(Ee=i[B+1|0]|0,ve=B+2|0,Te=(B+2|0)+(Ee|0)|0,Q(Ee+1|0)|0)?1:(G(ve|0,Te|0),B=Te|0,0)}function l(k){k=k|0;var ve=0,Te=0,Ee=0;return Q(2)|0||(Ee=ie(B+1|0)|0,ve=B+3|0,Te=(B+3|0)+(Ee|0)|0,Q(Ee+2|0)|0)?1:(G(ve|0,Te|0),B=Te|0,0)}function v(k){k=k|0;var ve=0,Te=0,Ee=0;return Q(4)|0||(Ee=g(B+1|0)|0,ve=B+5|0,Te=(B+5|0)+(Ee|0)|0,Q(Ee+4|0)|0)?1:(G(ve|0,Te|0),B=Te|0,0)}function $(k){return k=k|0,1}function X(k){return k=k|0,L(),B=B+1|0,0}function W(k){return k=k|0,j(k-128|0),B=B+1|0,0}function ge(k){return k=k|0,Q(1)|0?1:(j(i[B+1|0]|0),B=B+2|0,0)}function _e(k){return k=k|0,Q(2)|0?1:(j(ie(B+1|0)|0),B=B+3|0,0)}function me(k){return k=k|0,Q(4)|0?1:(Z(ie(B+1|0)|0,ie(B+3|0)|0),B=B+5|0,0)}function we(k){return k=k|0,Q(8)|0?1:(J(ie(B+1|0)|0,ie(B+3|0)|0,ie(B+5|0)|0,ie(B+7|0)|0),B=B+9|0,0)}function Se(k){return k=k|0,T(),B=B+1|0,0}function Me(k){k=k|0;var ve=0;return ve=k-160|0,Q(ve|0)|0?1:(q(ve|0),B=B+1|0,0)}function ki(k){return k=k|0,Q(1)|0?1:(q(i[B+1|0]|0),B=B+2|0,0)}function Mi(k){return k=k|0,Q(2)|0?1:(q(ie(B+1|0)|0),B=B+3|0,0)}function Pi(k){return k=k|0,Q(4)|0?1:(ee(ie(B+1|0)|0,ie(B+3|0)|0),B=B+5|0,0)}function Ci(k){return k=k|0,Q(8)|0?1:(te(ie(B+1|0)|0,ie(B+3|0)|0,ie(B+5|0)|0,ie(B+7|0)|0),B=B+9|0,0)}function $i(k){return k=k|0,V(),B=B+1|0,0}function Dt(k){return k=k|0,re(k-192|0|0),B=B+1|0,0}function Kl(k){return k=k|0,re(k|0),B=B+1|0,0}function Wl(k){return k=k|0,re(k|0),B=B+1|0,0}function Zl(k){return k=k|0,re(k|0),B=B+1|0,0}function Xl(k){return k=k|0,re(k|0),B=B+1|0,0}function Ke(k){return k=k|0,re(k-192|0|0),B=B+1|0,0}function Ll(k){return k=k|0,re(k|0),B=B+1|0,0}function Jl(k){return k=k|0,re(k|0),B=B+1|0,0}function Ql(k){return k=k|0,re(k|0),B=B+1|0,0}function Gc(k){return k=k|0,Q(1)|0?1:(re(i[B+1|0]|0),B=B+2|0,0)}function Vc(k){return k=k|0,Q(2)|0?1:(re(ie(B+1|0)|0),B=B+3|0,0)}function Hc(k){return k=k|0,Q(4)|0?1:(le(ie(B+1|0)|0,ie(B+3|0)|0),B=B+5|0,0)}function jc(k){return k=k|0,Q(8)|0?1:(ye(ie(B+1|0)|0,ie(B+3|0)|0,ie(B+5|0)|0,ie(B+7|0)|0),B=B+9|0,0)}function Ve(k){return k=k|0,D((k|0)-224|0),B=B+1|0,0}function zc(k){return k=k|0,y(),B=B+1|0,0}function Yc(k){return k=k|0,E(),B=B+1|0,0}function Kc(k){return k=k|0,C(),B=B+1|0,0}function Wc(k){return k=k|0,M(),B=B+1|0,0}function Zc(k){return k=k|0,Q(1)|0?1:(D(i[B+1|0]|0),B=B+2|0,0)}function Xc(k){k=k|0;var ve=0,Te=0,Ee=1,Sn=0,tn=0,Dl=0;return Q(2)|0?1:(ve=i[B+1|0]|0,Te=i[B+2|0]|0,(ve|0)&128&&(Ee=-1),Sn=+(((ve|0)&124)>>2),tn=+(((ve|0)&3)<<8|Te),+Sn==0?x(+(+Ee*5960464477539063e-23*+tn)):+Sn==31?+Ee==1?+tn>0?K():z():+tn>0?ne():H():x(+(+Ee*Ne(2,+(+Sn-25))*+(1024+tn))),B=B+3|0,0)}function Lc(k){return k=k|0,Q(4)|0?1:(N(i[B+1|0]|0,i[B+2|0]|0,i[B+3|0]|0,i[B+4|0]|0),B=B+5|0,0)}function Jc(k){return k=k|0,Q(8)|0?1:(U(i[B+1|0]|0,i[B+2|0]|0,i[B+3|0]|0,i[B+4|0]|0,i[B+5|0]|0,i[B+6|0]|0,i[B+7|0]|0,i[B+8|0]|0),B=B+9|0,0)}function Fe(k){return k=k|0,1}function Qc(k){return k=k|0,fe(),B=B+1|0,0}var Dc=[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,S,O,F,P,Fe,Fe,Fe,Fe,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,s,a,p,m,Fe,Fe,Fe,Fe,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,Y,se,ue,he,Fe,Fe,Fe,be,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,u,l,v,$,Fe,Fe,Fe,X,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,ge,_e,me,we,Fe,Fe,Fe,Se,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,ki,Mi,Pi,Ci,Fe,Fe,Fe,$i,Dt,Dt,Dt,Dt,Dt,Dt,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Gc,Vc,Hc,jc,Fe,Fe,Fe,Fe,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,zc,Yc,Kc,Wc,Zc,Xc,Lc,Jc,Fe,Fe,Fe,Qc];return{parse:ae}},Bi={},at={};const Rs=Ei.BigNumber;at.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};at.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};at.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};at.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};at.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};at.SHIFT32=Math.pow(2,32);at.SHIFT16=Math.pow(2,16);at.MAX_SAFE_HIGH=2097151;at.NEG_ONE=new Rs(-1);at.TEN=new Rs(10);at.TWO=new Rs(2);at.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=Bn,r=Ei.BigNumber,n=at,i=n.SHIFT32,c=n.SHIFT16,f=2097151;t.parseHalf=function(b){var x,N,U;return U=b[0]&128?-1:1,x=(b[0]&124)>>2,N=(b[0]&3)<<8|b[1],x?x===31?U*(N?NaN:1/0):U*Math.pow(2,x-25)*(1024+N):U*5960464477539063e-23*N};function o(w){return w<16?"0"+w.toString(16):w.toString(16)}t.arrayBufferToBignumber=function(w){const b=w.byteLength;let x="";for(let N=0;N<b;N++)x+=o(w[N]);return new r(x,16)},t.buildMap=w=>{const b=new Map,x=Object.keys(w),N=x.length;for(let U=0;U<N;U++)b.set(x[U],w[x[U]]);return b},t.buildInt32=(w,b)=>w*c+b,t.buildInt64=(w,b,x,N)=>{const U=t.buildInt32(w,b),E=t.buildInt32(x,N);return U>f?new r(U).times(i).plus(E):U*i+E},t.writeHalf=function(b,x){const N=e.allocUnsafe(4);N.writeFloatBE(x,0);const U=N.readUInt32BE(0);if(U&8191)return!1;var E=U>>16&32768;const y=U>>23&255,M=U&8388607;if(y>=113&&y<=142)E+=(y-112<<10)+(M>>13);else if(y>=103&&y<113){if(M&(1<<126-y)-1)return!1;E+=M+8388608>>126-y}else return!1;return b.writeUInt16BE(E,0),!0},t.keySorter=function(w,b){var x=w[0].byteLength,N=b[0].byteLength;return x>N?1:N>x?-1:w[0].compare(b[0])},t.isNegativeZero=w=>w===0&&1/w<0,t.nextPowerOf2=w=>{let b=0;if(w&&!(w&w-1))return w;for(;w!==0;)w>>=1,b+=1;return 1<<b}})(Bi);const Us=at,sf=Us.MT,Fn=Us.SIMPLE,ji=Us.SYMS;let of=class cs{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,sf.SIMPLE_FLOAT)}static isSimple(e){return e instanceof cs}static decode(e,r){switch(r==null&&(r=!0),e){case Fn.FALSE:return!1;case Fn.TRUE:return!0;case Fn.NULL:return r?null:ji.NULL;case Fn.UNDEFINED:return r?void 0:ji.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return ji.BREAK;default:return new cs(e)}}};var Oa=of;let af=class us{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=us["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(us,this.value)}catch(i){return r=i,this.err=r,this}}};var ka=af;const Ma=self.location?self.location.protocol+"//"+self.location.host:"",fs=self.URL;let cf=class{constructor(e="",r=Ma){this.super=new fs(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function uf(t){if(typeof t=="string")return new fs(t).toString();if(!(t instanceof fs)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",c=t.host||"",f=t.hostname||"",o=t.search||(t.query?"?"+t.query:""),w=t.hash||"",b=t.pathname||"",x=t.path||b+o;return`${i}${e||r}${c||f+n}${x}${w}`}}var Pa={URLWithLegacySupport:cf,URLSearchParams:self.URLSearchParams,defaultBase:Ma,format:uf};const{URLWithLegacySupport:sh,format:oh}=Pa,{URLWithLegacySupport:ff,format:ah,URLSearchParams:ch,defaultBase:uh}=Pa;var Ca={URL:ff};const{Buffer:kr}=Bn,Ws=xn,lf=Ei.BigNumber,hf=nf,ct=Bi,Ue=at,df=Oa,pf=ka,{URL:yf}=Ca;let ls=class hs{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=ct.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=kr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>ct.arrayBufferToBignumber(r),3:r=>Ue.NEG_ONE.minus(ct.arrayBufferToBignumber(r)),4:r=>Ue.TEN.pow(r[0]).times(r[1]),5:r=>Ue.TWO.pow(r[0]).times(r[1]),32:r=>new yf(r),35:r=>new RegExp(r)},e.tags),this.parser=hf(Wr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Ue.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Ue.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Ue.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Ue.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Ue.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Ue.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Ue.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Ue.PARENT.ARRAY:case Ue.PARENT.BYTE_STRING:case Ue.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Ue.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Ue.PARENT.MAP,n.ref=ct.buildMap(n.ref)));break;case Ue.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Ue.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Ue.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new pf(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return kr.concat(e)}createByteStringFromHeap(e,r){return e===r?kr.alloc(0):kr.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return ct.buildInt32(e,r)}createInt64(e,r,n,i){return ct.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return Ws.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,c,f,o,w){return Ws.read([e,r,n,i,c,f,o,w],0,!1,52,8)}createInt32Neg(e,r){return-1-ct.buildInt32(e,r)}createInt64Neg(e,r,n,i){const c=ct.buildInt32(e,r),f=ct.buildInt32(n,i);return c>Ue.MAX_SAFE_HIGH?Ue.NEG_ONE.minus(new lf(c).times(Ue.SHIFT32).plus(f)):-1-(c*Ue.SHIFT32+f)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new df(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,c,f,o,w){this._push(this.createFloatDouble(e,r,n,i,c,f,o,w))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Ue.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=ct.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const c=ct.buildInt64(e,r,n,i);this._createArrayStartFixed(c)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=ct.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const c=ct.buildInt64(e,r,n,i);this._createObjectStartFixed(c)}pushByteStringStart(){this._parents[this._depth]={type:Ue.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Ue.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Ue.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(ct.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(ct.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Ue.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Ue.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=kr.from(e,r||"hex")),new hs({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=kr.from(e,r||"hex")),new hs({size:e.length}).decodeAll(e)}};ls.decodeFirst=ls.decode;var $a=ls;const{Buffer:zi}=Bn,wf=$a,gf=Bi;class Fs extends wf{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return gf.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,c,f,o,w){return`${super.createFloatDouble(e,r,n,i,c,f,o,w)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${zi.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(Zs(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(Zs(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${zi.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=zi.from(e,r||"hex")),new Fs().decodeFirst(e)}}var mf=Fs;function Zs(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:Ft}=Bn,{URL:bf}=Ca,ds=Ei.BigNumber,Yi=Bi,Ye=at,bt=Ye.MT,On=Ye.NUMBYTES,Xs=Ye.SHIFT32,Ls=Ye.SYMS,Mr=Ye.TAG,_f=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.TWO,xf=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.FOUR,Ef=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.EIGHT,Bf=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.TRUE,Af=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.FALSE,vf=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.UNDEFINED,Js=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.NULL,Tf=new ds("0x20000000000000"),Sf=Ft.from("f97e00","hex"),Nf=Ft.from("f9fc00","hex"),If=Ft.from("f97c00","hex");function Rf(t){return{}.toString.call(t).slice(8,-1)}class fi{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[bf,this._pushUrl],[ds,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const f=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,f}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(Sf)}_pushInfinity(e){const r=e<0?Nf:If;return this.push(r)}_pushFloat(e){const r=Ft.allocUnsafe(2);if(Yi.writeHalf(r,e)&&Yi.parseHalf(r)===e)return this._pushUInt8(_f)&&this.push(r);const n=Ft.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(xf)&&this.push(n):this._pushUInt8(Ef)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|On.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|On.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|On.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|On.EIGHT)&&this._pushUInt32BE(Math.floor(e/Xs))&&this._pushUInt32BE(e%Xs):r===bt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,bt.NEG_INT,e):this._pushInt(e,bt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=Ft.byteLength(e,"utf8");return this._pushInt(r,bt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?Bf:Af)}_pushUndefined(e){return this._pushUInt8(vf)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,bt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,bt.TAG)}_pushDate(e,r){return e._pushTag(Mr.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,bt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(Mr.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,bt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(Mr.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=Mr.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=Mr.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=Ft.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(Mr.DECIMAL_FRAC)&&e._pushInt(2,bt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new ds(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(Tf)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,bt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Js);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var c=Object.keys(e),f=c.length;return this._pushInt(f,bt.MAP)?this._pushRawMap(f,c.map(o=>[o,e[o]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=fi.encode(i[0]),i}).sort(Yi.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=Rf(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Ft.isBuffer(e)?e:Ft.from(e));case"Null":return this._pushUInt8(Js);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Ls.NULL:return this._pushObject(null);case Ls.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,c=0,f=0;f<i;f++)c+=r[f];var o=Ft.allocUnsafe(c),w=0,b=0;for(f=0;f<i;f++){switch(b=r[f],n[f]){case 0:e[f].copy(o,w);break;case 1:o.writeUInt8(e[f],w,!0);break;case 2:o.writeUInt16BE(e[f],w,!0);break;case 3:o.writeUInt32BE(e[f],w,!0);break;case 4:o.writeDoubleBE(e[f],w,!0);break;case 5:o.write(e[f],w,b,"utf8");break;default:throw new Error("unkown method")}w+=b}var x=o;return this._reset(),x}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new fi;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var Uf=fi;(function(t){t.Diagnose=mf,t.Decoder=$a,t.Encoder=Uf,t.Simple=Oa,t.Tagged=ka,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(Ua);const qa=au(Ua);function Bt(t){return Vn(Hu.create().update(new Uint8Array(t)).digest())}function jn(t){if(t instanceof qa.Tagged)return jn(t.value);if(typeof t=="string")return Ga(t);if(typeof t=="number")return Bt(Ce(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return Bt(t);if(Array.isArray(t)){const e=t.map(jn);return Bt(qt(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return Bt(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return jn(t.toHash());if(typeof t=="object")return li(t);if(typeof t=="bigint")return Bt(Ce(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const Ga=t=>{const e=new TextEncoder().encode(t);return Bt(e)};function Qs(t){return li(t)}function li(t){const n=Object.entries(t).filter(([,f])=>f!==void 0).map(([f,o])=>{const w=Ga(f),b=jn(o);return[w,b]}).sort(([f],[o])=>Ko(f,o)),i=qt(...n.map(f=>qt(...f)));return Bt(i)}new TextEncoder().encode(`
ic-request`);class Ds{getPrincipal(){return xe.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var Xt={},en={},ke={};Object.defineProperty(ke,"__esModule",{value:!0});const Ff=9007199254740992;function Jt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,c)=>i+c.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function vt(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(c=>parseInt(c,16)));return new Uint8Array(i).buffer}function Ai(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return vt(t,r,e.toString(16))}}function Va(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Jt(new Uint8Array(Ai(3,t.length)),new Uint8Array(e))}function Of(t,e){if(t==14277111)return Jt(new Uint8Array([217,217,247]),e);if(t<24)return Jt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),c=[192+r].concat(i.match(/../g).map(f=>parseInt(f,16)));return new Uint8Array(c).buffer}}ke.tagged=Of;function An(t){return new Uint8Array(t).buffer}ke.raw=An;function Os(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}ke.uSmall=Os;function Ha(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),vt(0,24,t)}ke.u8=Ha;function ja(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),vt(0,25,t)}ke.u16=ja;function za(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),vt(0,26,t)}ke.u32=za;function ks(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return vt(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),Ff),t=t.toString(16),vt(0,27,t)}ke.u64=ks;function Ya(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return Os(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}ke.iSmall=Ya;function Ka(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),vt(1,24,t)}ke.i8=Ka;function Wa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),vt(1,25,t)}ke.i16=Wa;function Za(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),vt(1,26,t)}ke.i32=Za;function Xa(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,c)=>{if(r)return c+i;let f=parseInt(c,16)-1;return f>=0?(r=!0,f.toString(16)+i):"f"+i},"");return r?vt(1,27,n):ks(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),vt(1,27,t)}ke.i64=Xa;function kf(t){return t>=0?t<24?Os(t):t<=255?Ha(t):t<=65535?ja(t):t<=4294967295?za(t):ks(t):t>=-24?Ya(t):t>=-255?Ka(t):t>=-65535?Wa(t):t>=-4294967295?Za(t):Xa(t)}ke.number=kf;function Mf(t){return Jt(Ai(2,t.byteLength),t)}ke.bytes=Mf;function Pf(t){return Va(t)}ke.string=Pf;function Cf(t){return Jt(Ai(4,t.length),...t)}ke.array=Cf;function $f(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Jt(Ai(5,t.size),...r.map(([n,i])=>Jt(Va(n),i)))}ke.map=$f;function qf(t){const e=new Float32Array([t]);return Jt(new Uint8Array([250]),new Uint8Array(e.buffer))}ke.singleFloat=qf;function Gf(t){const e=new Float64Array([t]);return Jt(new Uint8Array([251]),new Uint8Array(e.buffer))}ke.doubleFloat=Gf;function Vf(t){return t?La():Ja()}ke.bool=Vf;function La(){return An(new Uint8Array([245]))}ke.true_=La;function Ja(){return An(new Uint8Array([244]))}ke.false_=Ja;function Hf(){return An(new Uint8Array([246]))}ke.null_=Hf;function jf(){return An(new Uint8Array([247]))}ke.undefined_=jf;var zf=Wr&&Wr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(en,"__esModule",{value:!0});const _t=zf(ke),Yf=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class Qa{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return _t.undefined_();case"boolean":return _t.bool(e);case"number":return Math.floor(e)===e?_t.number(e):_t.doubleFloat(e);case"string":return _t.string(e);case"object":if(e===null)return _t.null_();if(Array.isArray(e))return _t.array(e.map(r=>this._serializer.serializeValue(r)));if(Yf.find(r=>e instanceof r))return _t.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return _t.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return _t.map(r,this._stable)}default:throw new Error("Invalid value.")}}}en.JsonDefaultCborEncoder=Qa;class Da{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}en.ToCborEncoder=Da;class ec{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new Qa(r,e)),r.addEncoder(new Da),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}en.CborSerializer=ec;class Kf extends ec{serialize(e){return _t.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}en.SelfDescribeCborSerializer=Kf;(function(t){function e(i){for(var c in i)t.hasOwnProperty(c)||(t[c]=i[c])}var r=Wr&&Wr.__importStar||function(i){if(i&&i.__esModule)return i;var c={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(c[f]=i[f]);return c.default=i,c};Object.defineProperty(t,"__esModule",{value:!0}),e(en);const n=r(ke);t.value=n})(Xt);class Wf{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return Xt.value.bytes(e.toUint8Array())}}class Zf{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return Xt.value.bytes(new Uint8Array(e))}}class Xf{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?Xt.value.tagged(2,Xt.value.bytes(ai(e.toString(16)))):Xt.value.tagged(3,Xt.value.bytes(ai((BigInt("-1")*e).toString(16))))}}const vi=Xt.SelfDescribeCborSerializer.withDefaultEncoders(!0);vi.addEncoder(new Wf);vi.addEncoder(new Zf);vi.addEncoder(new Xf);var ps;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(ps||(ps={}));function Ki(t){return vi.serialize(t)}function eo(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class Lf extends qa.Decoder{createByteString(e){return qt(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function Lt(t){const e=new Uint8Array(t),r=new Lf({size:e.byteLength,tags:{2:n=>eo(n),3:n=>-eo(n),[ps.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${Ze(e)}`)}}const kn=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var ys;(function(t){t.Call="call"})(ys||(ys={}));function ws(){const t=new ArrayBuffer(16),e=new DataView(t),r=kn(),n=kn(),i=kn(),c=kn();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,c),t}const to=BigInt(1e6),Jf=60*1e3;class Mn{constructor(e){if(e<90*1e3){const o=BigInt(Date.now()+e)*to/BigInt(1e9);this._value=o*BigInt(1e9);return}const c=BigInt(Math.floor(Date.now()+e-Jf))*to/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=c}toCBOR(){return Xt.value.u64(this._value.toString(16),16)}toHash(){return Ce(this._value)}}function ro(t=ws){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function sn(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class Wi extends Pe{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class Qf extends Pe{constructor(e,r,n,i,c,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class Df extends Pe{constructor(e,r,n,i,c,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class e0 extends Pe{constructor(e,r,n,i,c,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ms=BigInt(0),hi=BigInt(1);function yn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function tc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Ms:BigInt("0x"+t)}function Gt(t){return tc(Xr(t))}function wn(t){return tt(t),tc(Xr(Uint8Array.from(t).reverse()))}function De(t,e){return Go(t.toString(16).padStart(e*2,"0"))}function Ti(t,e){return De(t,e).reverse()}function lt(t,e,r){let n;if(typeof e=="string")try{n=Go(e)}catch(c){throw new Error(t+" must be hex string or Uint8Array, cause: "+c)}else if(As(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Zi=t=>typeof t=="bigint"&&Ms<=t;function rc(t,e,r){return Zi(t)&&Zi(e)&&Zi(r)&&e<=t&&t<r}function on(t,e,r,n){if(!rc(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function ln(t){let e;for(e=0;t>Ms;t>>=hi,e+=1);return e}function t0(t,e){return t>>BigInt(e)&hi}const Yr=t=>(hi<<BigInt(t))-hi;function r0(t){return typeof t=="function"&&Number.isSafeInteger(t.outputLen)}function vn(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,c,f){const o=t[i];if(f&&o===void 0)return;const w=typeof o;if(w!==c||o===null)throw new Error(`param "${i}" is invalid: expected ${c}, got ${w}`)}Object.entries(e).forEach(([i,c])=>n(i,c,!1)),Object.entries(r).forEach(([i,c])=>n(i,c,!0))}const no=()=>{throw new Error("not implemented")};function gn(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const c=t(r,...n);return e.set(r,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dt=BigInt(0),et=BigInt(1),gr=BigInt(2),n0=BigInt(3),nc=BigInt(4),ic=BigInt(5),sc=BigInt(8);function He(t,e){const r=t%e;return r>=dt?r:e+r}function St(t,e,r){let n=t;for(;e-- >dt;)n*=n,n%=r;return n}function io(t,e){if(t===dt)throw new Error("invert: expected non-zero number");if(e<=dt)throw new Error("invert: expected positive modulus, got "+e);let r=He(t,e),n=e,i=dt,c=et;for(;r!==dt;){const o=n/r,w=n%r,b=i-c*o;n=r,r=w,i=c,c=b}if(n!==et)throw new Error("invert: does not exist");return He(i,e)}function oc(t,e){const r=(t.ORDER+et)/nc,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function i0(t,e){const r=(t.ORDER-ic)/sc,n=t.mul(e,gr),i=t.pow(n,r),c=t.mul(e,i),f=t.mul(t.mul(c,gr),i),o=t.mul(c,t.sub(f,t.ONE));if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function s0(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-et,r=0;for(;e%gr===dt;)e/=gr,r++;let n=gr;const i=Ir(t);for(;di(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return oc;let c=i.pow(n,e);const f=(e+et)/gr;return function(w,b){if(w.is0(b))return b;if(di(w,b)!==1)throw new Error("Cannot find square root");let x=r,N=w.mul(w.ONE,c),U=w.pow(b,e),E=w.pow(b,f);for(;!w.eql(U,w.ONE);){if(w.is0(U))return w.ZERO;let y=1,M=w.sqr(U);for(;!w.eql(M,w.ONE);)if(y++,M=w.sqr(M),y===x)throw new Error("Cannot find square root");const C=et<<BigInt(x-y-1),z=w.pow(N,C);x=y,N=w.sqr(z),U=w.mul(U,N),E=w.mul(E,z)}return E}}function o0(t){return t%nc===n0?oc:t%sc===ic?i0:s0(t)}const a0=(t,e)=>(He(t,e)&et)===et,c0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ac(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=c0.reduce((n,i)=>(n[i]="function",n),e);return vn(t,r),t}function zn(t,e,r){if(r<dt)throw new Error("invalid exponent, negatives unsupported");if(r===dt)return t.ONE;if(r===et)return e;let n=t.ONE,i=e;for(;r>dt;)r&et&&(n=t.mul(n,i)),i=t.sqr(i),r>>=et;return n}function Er(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((f,o,w)=>t.is0(o)?f:(n[w]=f,t.mul(f,o)),t.ONE),c=t.inv(i);return e.reduceRight((f,o,w)=>t.is0(o)?f:(n[w]=t.mul(f,n[w]),t.mul(f,o)),c),n}function di(t,e){const r=(t.ORDER-et)/gr,n=t.pow(e,r),i=t.eql(n,t.ONE),c=t.eql(n,t.ZERO),f=t.eql(n,t.neg(t.ONE));if(!i&&!c&&!f)throw new Error("invalid Legendre symbol result");return i?1:c?0:-1}function u0(t,e){e!==void 0&&_u(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Ir(t,e,r=!1,n={}){if(t<=dt)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,c;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const x=e;x.BITS&&(i=x.BITS),x.sqrt&&(c=x.sqrt),typeof x.isLE=="boolean"&&(r=x.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(c=n.sqrt);const{nBitLength:f,nByteLength:o}=u0(t,i);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let w;const b=Object.freeze({ORDER:t,isLE:r,BITS:f,BYTES:o,MASK:Yr(f),ZERO:dt,ONE:et,create:x=>He(x,t),isValid:x=>{if(typeof x!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof x);return dt<=x&&x<t},is0:x=>x===dt,isValidNot0:x=>!b.is0(x)&&b.isValid(x),isOdd:x=>(x&et)===et,neg:x=>He(-x,t),eql:(x,N)=>x===N,sqr:x=>He(x*x,t),add:(x,N)=>He(x+N,t),sub:(x,N)=>He(x-N,t),mul:(x,N)=>He(x*N,t),pow:(x,N)=>zn(b,x,N),div:(x,N)=>He(x*io(N,t),t),sqrN:x=>x*x,addN:(x,N)=>x+N,subN:(x,N)=>x-N,mulN:(x,N)=>x*N,inv:x=>io(x,t),sqrt:c||(x=>(w||(w=o0(t)),w(b,x))),toBytes:x=>r?Ti(x,o):De(x,o),fromBytes:x=>{if(x.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+x.length);return r?wn(x):Gt(x)},invertBatch:x=>Er(b,x),cmov:(x,N,U)=>U?N:x});return Object.freeze(b)}function cc(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function uc(t){const e=cc(t);return e+Math.ceil(e/2)}function f0(t,e,r=!1){const n=t.length,i=cc(e),c=uc(e);if(n<16||n<c||n>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+n);const f=r?wn(t):Gt(t),o=He(f,e-et)+et;return r?Ti(o,i):De(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jr=BigInt(0),mr=BigInt(1);function hn(t,e){const r=e.negate();return t?r:e}function pi(t,e,r){const n=e==="pz"?f=>f.pz:f=>f.ez,i=Er(t.Fp,r.map(n));return r.map((f,o)=>f.toAffine(i[o])).map(t.fromAffine)}function fc(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Xi(t,e){fc(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,c=Yr(t),f=BigInt(t);return{windows:r,windowSize:n,mask:c,maxNumber:i,shiftBy:f}}function so(t,e,r){const{windowSize:n,mask:i,maxNumber:c,shiftBy:f}=r;let o=Number(t&i),w=t>>f;o>n&&(o-=c,w+=mr);const b=e*n,x=b+Math.abs(o)-1,N=o===0,U=o<0,E=e%2!==0;return{nextN:w,offset:x,isZero:N,isNeg:U,isNegF:E,offsetF:b}}function l0(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function h0(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Li=new WeakMap,lc=new WeakMap;function Ji(t){return lc.get(t)||1}function oo(t){if(t!==Jr)throw new Error("invalid wNAF")}function hc(t,e){return{constTimeNegate:hn,hasPrecomputes(r){return Ji(r)!==1},unsafeLadder(r,n,i=t.ZERO){let c=r;for(;n>Jr;)n&mr&&(i=i.add(c)),c=c.double(),n>>=mr;return i},precomputeWindow(r,n){const{windows:i,windowSize:c}=Xi(n,e),f=[];let o=r,w=o;for(let b=0;b<i;b++){w=o,f.push(w);for(let x=1;x<c;x++)w=w.add(o),f.push(w);o=w.double()}return f},wNAF(r,n,i){let c=t.ZERO,f=t.BASE;const o=Xi(r,e);for(let w=0;w<o.windows;w++){const{nextN:b,offset:x,isZero:N,isNeg:U,isNegF:E,offsetF:y}=so(i,w,o);i=b,N?f=f.add(hn(E,n[y])):c=c.add(hn(U,n[x]))}return oo(i),{p:c,f}},wNAFUnsafe(r,n,i,c=t.ZERO){const f=Xi(r,e);for(let o=0;o<f.windows&&i!==Jr;o++){const{nextN:w,offset:b,isZero:x,isNeg:N}=so(i,o,f);if(i=w,!x){const U=n[b];c=c.add(N?U.negate():U)}}return oo(i),c},getPrecomputes(r,n,i){let c=Li.get(n);return c||(c=this.precomputeWindow(n,r),r!==1&&(typeof i=="function"&&(c=i(c)),Li.set(n,c))),c},wNAFCached(r,n,i){const c=Ji(r);return this.wNAF(c,this.getPrecomputes(c,r,i),n)},wNAFCachedUnsafe(r,n,i,c){const f=Ji(r);return f===1?this.unsafeLadder(r,n,c):this.wNAFUnsafe(f,this.getPrecomputes(f,r,i),n,c)},setWindowSize(r,n){fc(n,e),lc.set(r,n),Li.delete(r)}}}function d0(t,e,r,n){let i=e,c=t.ZERO,f=t.ZERO;for(;r>Jr||n>Jr;)r&mr&&(c=c.add(i)),n&mr&&(f=f.add(i)),i=i.double(),r>>=mr,n>>=mr;return{p1:c,p2:f}}function dc(t,e,r,n){l0(r,t),h0(n,e);const i=r.length,c=n.length;if(i!==c)throw new Error("arrays of points and scalars must have equal length");const f=t.ZERO,o=ln(BigInt(i));let w=1;o>12?w=o-3:o>4?w=o-2:o>0&&(w=2);const b=Yr(w),x=new Array(Number(b)+1).fill(f),N=Math.floor((e.BITS-1)/w)*w;let U=f;for(let E=N;E>=0;E-=w){x.fill(f);for(let M=0;M<c;M++){const C=n[M],z=Number(C>>BigInt(E)&b);x[z]=x[z].add(r[M])}let y=f;for(let M=x.length-1,C=f;M>0;M--)C=C.add(x[M]),y=y.add(C);if(U=U.add(y),E!==0)for(let M=0;M<w;M++)U=U.double()}return U}function ao(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ac(e),e}else return Ir(t)}function pc(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const w=e[o];if(!(typeof w=="bigint"&&w>Jr))throw new Error(`CURVE.${o} must be positive bigint`)}const n=ao(e.p,r.Fp),i=ao(e.n,r.Fn),f=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const o of f)if(!n.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}const p0=Gt;function ar(t,e){if(mn(t),mn(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function y0(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function mn(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function w0(t,e,r,n){tt(t),tt(e),mn(r),e.length>255&&(e=n(qe(wi("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:c}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const o=qe(e,ar(e.length,1)),w=ar(0,c),b=ar(r,2),x=new Array(f),N=n(qe(w,t,b,ar(0,1),o));x[0]=n(qe(N,ar(1,1),o));for(let E=1;E<=f;E++){const y=[y0(N,x[E-1]),ar(E+1,1),o];x[E]=n(qe(...y))}return qe(...x).slice(0,r)}function g0(t,e,r,n,i){if(tt(t),tt(e),mn(r),e.length>255){const c=Math.ceil(2*n/8);e=i.create({dkLen:c}).update(wi("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(ar(r,2)).update(e).update(ar(e.length,1)).digest()}function co(t,e,r){vn(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:i,m:c,hash:f,expand:o,DST:w}=r;if(!As(w)&&typeof w!="string")throw new Error("DST must be string or uint8array");if(!r0(r.hash))throw new Error("expected valid hash");tt(t),mn(e);const b=typeof w=="string"?wi(w):w,x=n.toString(2).length,N=Math.ceil((x+i)/8),U=e*c*N;let E;if(o==="xmd")E=w0(t,b,U,f);else if(o==="xof")E=g0(t,b,U,i,f);else if(o==="_internal_pass")E=t;else throw new Error('expand must be "xmd" or "xof"');const y=new Array(e);for(let M=0;M<e;M++){const C=new Array(c);for(let z=0;z<c;z++){const H=N*(z+M*c),K=E.subarray(H,H+N);C[z]=He(p0(K),n)}y[M]=C}return y}function yc(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[c,f,o,w]=r.map(N=>N.reduce((U,E)=>t.add(t.mul(U,n),E))),[b,x]=Er(t,[f,w],!0);return n=t.mul(c,b),i=t.mul(i,t.mul(o,x)),{x:n,y:i}}}function uo(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(c){return t.fromAffine(e(c))}function i(c){const f=c.clearCofactor();return f.equals(t.ZERO)?t.ZERO:(f.assertValidity(),f)}return{defaults:r,hashToCurve(c,f){const o=r.DST?r.DST:{},w=Object.assign({},r,o,f),b=co(c,2,w),x=n(b[0]),N=n(b[1]);return i(x.add(N))},encodeToCurve(c,f){const o=r.encodeDST?r.encodeDST:{},w=Object.assign({},r,o,f),b=co(c,1,w);return i(n(b[0]))},mapToCurve(c){if(!Array.isArray(c))throw new Error("expected array of bigints");for(const f of c)if(typeof f!="bigint")throw new Error("expected array of bigints");return i(n(c))}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gs=BigInt(0),ht=BigInt(1),sr=BigInt(2),Vr=BigInt(3),ms=BigInt(4);function wc(t,e,r){function n(i){const c=t.sqr(i),f=t.mul(c,i);return t.add(t.add(f,t.mul(i,e)),r)}return n}function gc(t,e,r){const{BYTES:n}=t;function i(c){let f;if(typeof c=="bigint")f=c;else{let o=lt("private key",c);if(e){if(!e.includes(o.length*2))throw new Error("invalid private key");const w=new Uint8Array(n);w.set(o,w.length-o.length),o=w}try{f=t.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof c}`)}}if(r&&(f=t.create(f)),!t.isValidNot0(f))throw new Error("invalid private key: out of range [1..N-1]");return f}return i}function m0(t,e={}){const{Fp:r,Fn:n}=pc("weierstrass",t,e),{h:i,n:c}=t;vn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=e;if(f&&(!r.is0(t.a)||typeof f.beta!="bigint"||typeof f.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function o(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function w(J,V,q){const{x:ee,y:te}=V.toAffine(),A=r.toBytes(ee);if(yn("isCompressed",q),q){o();const R=!r.isOdd(te);return qe(b0(R),A)}else return qe(Uint8Array.of(4),A,r.toBytes(te))}function b(J){tt(J);const V=r.BYTES,q=V+1,ee=2*V+1,te=J.length,A=J[0],R=J.subarray(1);if(te===q&&(A===2||A===3)){const G=r.fromBytes(R);if(!r.isValid(G))throw new Error("bad point: is not on curve, wrong x");const L=U(G);let D;try{D=r.sqrt(L)}catch(ye){const oe=ye instanceof Error?": "+ye.message:"";throw new Error("bad point: is not on curve, sqrt error"+oe)}o();const re=r.isOdd(D);return(A&1)===1!==re&&(D=r.neg(D)),{x:G,y:D}}else if(te===ee&&A===4){const G=r.fromBytes(R.subarray(V*0,V*1)),L=r.fromBytes(R.subarray(V*1,V*2));if(!E(G,L))throw new Error("bad point: is not on curve");return{x:G,y:L}}else throw new Error(`bad point: got length ${te}, expected compressed=${q} or uncompressed=${ee}`)}const x=e.toBytes||w,N=e.fromBytes||b,U=wc(r,t.a,t.b);function E(J,V){const q=r.sqr(V),ee=U(J);return r.eql(q,ee)}if(!E(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const y=r.mul(r.pow(t.a,Vr),ms),M=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(y,M)))throw new Error("bad curve params: a or b");function C(J,V,q=!1){if(!r.isValid(V)||q&&r.is0(V))throw new Error(`bad point coordinate ${J}`);return V}function z(J){if(!(J instanceof T))throw new Error("ProjectivePoint expected")}const H=gn((J,V)=>{const{px:q,py:ee,pz:te}=J;if(r.eql(te,r.ONE))return{x:q,y:ee};const A=J.is0();V==null&&(V=A?r.ONE:r.inv(te));const R=r.mul(q,V),G=r.mul(ee,V),L=r.mul(te,V);if(A)return{x:r.ZERO,y:r.ZERO};if(!r.eql(L,r.ONE))throw new Error("invZ was invalid");return{x:R,y:G}}),K=gn(J=>{if(J.is0()){if(e.allowInfinityPoint&&!r.is0(J.py))return;throw new Error("bad point: ZERO")}const{x:V,y:q}=J.toAffine();if(!r.isValid(V)||!r.isValid(q))throw new Error("bad point: x or y not field elements");if(!E(V,q))throw new Error("bad point: equation left != right");if(!J.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ne(J,V,q,ee,te){return q=new T(r.mul(q.px,J),q.py,q.pz),V=hn(ee,V),q=hn(te,q),V.add(q)}class T{constructor(V,q,ee){this.px=C("x",V),this.py=C("y",q,!0),this.pz=C("z",ee),Object.freeze(this)}static fromAffine(V){const{x:q,y:ee}=V||{};if(!V||!r.isValid(q)||!r.isValid(ee))throw new Error("invalid affine point");if(V instanceof T)throw new Error("projective point not allowed");return r.is0(q)&&r.is0(ee)?T.ZERO:new T(q,ee,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(V){return pi(T,"pz",V)}static fromBytes(V){return tt(V),T.fromHex(V)}static fromHex(V){const q=T.fromAffine(N(lt("pointHex",V)));return q.assertValidity(),q}static fromPrivateKey(V){const q=gc(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return T.BASE.multiply(q(V))}static msm(V,q){return dc(T,n,V,q)}precompute(V=8,q=!0){return Z.setWindowSize(this,V),q||this.multiply(Vr),this}_setWindowSize(V){this.precompute(V)}assertValidity(){K(this)}hasEvenY(){const{y:V}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(V)}equals(V){z(V);const{px:q,py:ee,pz:te}=this,{px:A,py:R,pz:G}=V,L=r.eql(r.mul(q,G),r.mul(A,te)),D=r.eql(r.mul(ee,G),r.mul(R,te));return L&&D}negate(){return new T(this.px,r.neg(this.py),this.pz)}double(){const{a:V,b:q}=t,ee=r.mul(q,Vr),{px:te,py:A,pz:R}=this;let G=r.ZERO,L=r.ZERO,D=r.ZERO,re=r.mul(te,te),le=r.mul(A,A),ye=r.mul(R,R),oe=r.mul(te,A);return oe=r.add(oe,oe),D=r.mul(te,R),D=r.add(D,D),G=r.mul(V,D),L=r.mul(ee,ye),L=r.add(G,L),G=r.sub(le,L),L=r.add(le,L),L=r.mul(G,L),G=r.mul(oe,G),D=r.mul(ee,D),ye=r.mul(V,ye),oe=r.sub(re,ye),oe=r.mul(V,oe),oe=r.add(oe,D),D=r.add(re,re),re=r.add(D,re),re=r.add(re,ye),re=r.mul(re,oe),L=r.add(L,re),ye=r.mul(A,R),ye=r.add(ye,ye),re=r.mul(ye,oe),G=r.sub(G,re),D=r.mul(ye,le),D=r.add(D,D),D=r.add(D,D),new T(G,L,D)}add(V){z(V);const{px:q,py:ee,pz:te}=this,{px:A,py:R,pz:G}=V;let L=r.ZERO,D=r.ZERO,re=r.ZERO;const le=t.a,ye=r.mul(t.b,Vr);let oe=r.mul(q,A),fe=r.mul(ee,R),Ne=r.mul(te,G),B=r.add(q,ee),Ae=r.add(A,R);B=r.mul(B,Ae),Ae=r.add(oe,fe),B=r.sub(B,Ae),Ae=r.add(q,te);let Ie=r.add(A,G);return Ae=r.mul(Ae,Ie),Ie=r.add(oe,Ne),Ae=r.sub(Ae,Ie),Ie=r.add(ee,te),L=r.add(R,G),Ie=r.mul(Ie,L),L=r.add(fe,Ne),Ie=r.sub(Ie,L),re=r.mul(le,Ae),L=r.mul(ye,Ne),re=r.add(L,re),L=r.sub(fe,re),re=r.add(fe,re),D=r.mul(L,re),fe=r.add(oe,oe),fe=r.add(fe,oe),Ne=r.mul(le,Ne),Ae=r.mul(ye,Ae),fe=r.add(fe,Ne),Ne=r.sub(oe,Ne),Ne=r.mul(le,Ne),Ae=r.add(Ae,Ne),oe=r.mul(fe,Ae),D=r.add(D,oe),oe=r.mul(Ie,Ae),L=r.mul(B,L),L=r.sub(L,oe),oe=r.mul(B,fe),re=r.mul(Ie,re),re=r.add(re,oe),new T(L,D,re)}subtract(V){return this.add(V.negate())}is0(){return this.equals(T.ZERO)}multiply(V){const{endo:q}=e;if(!n.isValidNot0(V))throw new Error("invalid scalar: out of range");let ee,te;const A=R=>Z.wNAFCached(this,R,T.normalizeZ);if(q){const{k1neg:R,k1:G,k2neg:L,k2:D}=q.splitScalar(V),{p:re,f:le}=A(G),{p:ye,f:oe}=A(D);te=le.add(oe),ee=ne(q.beta,re,ye,R,L)}else{const{p:R,f:G}=A(V);ee=R,te=G}return T.normalizeZ([ee,te])[0]}multiplyUnsafe(V){const{endo:q}=e,ee=this;if(!n.isValid(V))throw new Error("invalid scalar: out of range");if(V===gs||ee.is0())return T.ZERO;if(V===ht)return ee;if(Z.hasPrecomputes(this))return this.multiply(V);if(q){const{k1neg:te,k1:A,k2neg:R,k2:G}=q.splitScalar(V),{p1:L,p2:D}=d0(T,ee,A,G);return ne(q.beta,L,D,te,R)}else return Z.wNAFCachedUnsafe(ee,V)}multiplyAndAddUnsafe(V,q,ee){const te=this.multiplyUnsafe(q).add(V.multiplyUnsafe(ee));return te.is0()?void 0:te}toAffine(V){return H(this,V)}isTorsionFree(){const{isTorsionFree:V}=e;return i===ht?!0:V?V(T,this):Z.wNAFCachedUnsafe(this,c).is0()}clearCofactor(){const{clearCofactor:V}=e;return i===ht?this:V?V(T,this):this.multiplyUnsafe(i)}toBytes(V=!0){return yn("isCompressed",V),this.assertValidity(),x(T,this,V)}toRawBytes(V=!0){return this.toBytes(V)}toHex(V=!0){return Xr(this.toBytes(V))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}T.BASE=new T(t.Gx,t.Gy,r.ONE),T.ZERO=new T(r.ZERO,r.ONE,r.ZERO),T.Fp=r,T.Fn=n;const j=n.BITS,Z=hc(T,e.endo?Math.ceil(j/2):j);return T}function fo(t){const{CURVE:e,curveOpts:r}=_0(t),n=m0(e,r);return x0(t,n)}function b0(t){return Uint8Array.of(t?2:3)}function _0(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Ir(e.n,t.nBitLength),i={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function x0(t,e){const{Fp:r,Fn:n}=e;function i(o){return rc(o,ht,n.ORDER)}const c=wc(r,t.a,t.b),f=gc(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return Object.assign({},{CURVE:t,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:i})}function E0(t,e){const r=t.ORDER;let n=gs;for(let y=r-ht;y%sr===gs;y/=sr)n+=ht;const i=n,c=sr<<i-ht-ht,f=c*sr,o=(r-ht)/f,w=(o-ht)/sr,b=f-ht,x=c,N=t.pow(e,o),U=t.pow(e,(o+ht)/sr);let E=(y,M)=>{let C=N,z=t.pow(M,b),H=t.sqr(z);H=t.mul(H,M);let K=t.mul(y,H);K=t.pow(K,w),K=t.mul(K,z),z=t.mul(K,M),H=t.mul(K,y);let ne=t.mul(H,z);K=t.pow(ne,x);let T=t.eql(K,t.ONE);z=t.mul(H,U),K=t.mul(ne,C),H=t.cmov(z,H,T),ne=t.cmov(K,ne,T);for(let j=i;j>ht;j--){let Z=j-sr;Z=sr<<Z-ht;let J=t.pow(ne,Z);const V=t.eql(J,t.ONE);z=t.mul(H,C),C=t.mul(C,C),J=t.mul(ne,C),H=t.cmov(z,H,V),ne=t.cmov(J,ne,V)}return{isValid:T,value:H}};if(t.ORDER%ms===Vr){const y=(t.ORDER-Vr)/ms,M=t.sqrt(t.neg(e));E=(C,z)=>{let H=t.sqr(z);const K=t.mul(C,z);H=t.mul(H,K);let ne=t.pow(H,y);ne=t.mul(ne,K);const T=t.mul(ne,M),j=t.mul(t.sqr(ne),z),Z=t.eql(j,C);let J=t.cmov(T,ne,Z);return{isValid:Z,value:J}}}return E}function mc(t,e){ac(t);const{A:r,B:n,Z:i}=e;if(!t.isValid(r)||!t.isValid(n)||!t.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const c=E0(t,i);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return f=>{let o,w,b,x,N,U,E,y;o=t.sqr(f),o=t.mul(o,i),w=t.sqr(o),w=t.add(w,o),b=t.add(w,t.ONE),b=t.mul(b,n),x=t.cmov(i,t.neg(w),!t.eql(w,t.ZERO)),x=t.mul(x,r),w=t.sqr(b),U=t.sqr(x),N=t.mul(U,r),w=t.add(w,N),w=t.mul(w,b),U=t.mul(U,x),N=t.mul(U,n),w=t.add(w,N),E=t.mul(o,b);const{isValid:M,value:C}=c(w,U);y=t.mul(o,f),y=t.mul(y,C),E=t.cmov(E,b,M),y=t.cmov(y,C,M);const z=t.isOdd(f)===t.isOdd(y);y=t.cmov(t.neg(y),y,z);const H=Er(t,[x],!0)[0];return E=t.mul(E,H),{x:E,y}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const B0=BigInt(0),Pn=BigInt(1),lo=BigInt(2),Hr=BigInt(3);function A0(t){const e=[];for(;t>Pn;t>>=Pn)(t&Pn)===B0?e.unshift(0):(t&Hr)===Hr?(e.unshift(-1),t+=Pn):e.unshift(1);return e}function v0(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:c}=t.fields,f=t.params.xNegative,o=t.params.twistType,w=fo(t.G1),b=Object.assign(w,uo(w.Point,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),x=fo(t.G2),N=Object.assign(x,uo(x.Point,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let U;if(o==="multiplicative")U=(ae,Q,ie,g,_,S)=>c.mul014(g,ae,n.mul(Q,_),n.mul(ie,S));else if(o==="divisive")U=(ae,Q,ie,g,_,S)=>c.mul034(g,n.mul(ie,S),n.mul(Q,_),ae);else throw new Error("bls: unknown twist type");const E=n.div(n.ONE,n.mul(n.ONE,lo));function y(ae,Q,ie,g){const _=n.sqr(ie),S=n.sqr(g),O=n.mulByB(n.mul(S,Hr)),F=n.mul(O,Hr),P=n.sub(n.sub(n.sqr(n.add(ie,g)),S),_),h=n.sub(O,_),s=n.mul(n.sqr(Q),Hr),a=n.neg(P);return ae.push([h,s,a]),Q=n.mul(n.mul(n.mul(n.sub(_,F),Q),ie),E),ie=n.sub(n.sqr(n.mul(n.add(_,F),E)),n.mul(n.sqr(O),Hr)),g=n.mul(_,P),{Rx:Q,Ry:ie,Rz:g}}function M(ae,Q,ie,g,_,S){const O=n.sub(ie,n.mul(S,g)),F=n.sub(Q,n.mul(_,g)),P=n.sub(n.mul(O,_),n.mul(F,S)),h=n.neg(O),s=F;ae.push([P,h,s]);const a=n.sqr(F),p=n.mul(a,F),m=n.mul(a,Q),I=n.add(n.sub(p,n.mul(m,lo)),n.mul(n.sqr(O),g));return Q=n.mul(F,I),ie=n.sub(n.mul(n.sub(m,I),O),n.mul(p,ie)),g=n.mul(g,p),{Rx:Q,Ry:ie,Rz:g}}const C=A0(t.params.ateLoopSize),z=gn(ae=>{const Q=ae,{x:ie,y:g}=Q.toAffine(),_=ie,S=g,O=n.neg(g);let F=_,P=S,h=n.ONE;const s=[];for(const a of C){const p=[];({Rx:F,Ry:P,Rz:h}=y(p,F,P,h)),a&&({Rx:F,Ry:P,Rz:h}=M(p,F,P,h,_,a===-1?O:S)),s.push(p)}if(t.postPrecompute){const a=s[s.length-1];t.postPrecompute(F,P,h,_,S,M.bind(null,a))}return s});function H(ae,Q=!1){let ie=c.ONE;if(ae.length){const g=ae[0][0].length;for(let _=0;_<g;_++){ie=c.sqr(ie);for(const[S,O,F]of ae)for(const[P,h,s]of S[_])ie=U(P,h,s,ie,O,F)}}return f&&(ie=c.conjugate(ie)),Q?c.finalExponentiate(ie):ie}function K(ae,Q=!0){const ie=[];pi(b.Point,"pz",ae.map(({g1:g})=>g)),pi(N.Point,"pz",ae.map(({g2:g})=>g));for(const{g1:g,g2:_}of ae){if(g.is0()||_.is0())throw new Error("pairing is not available for ZERO point");g.assertValidity(),_.assertValidity();const S=g.toAffine();ie.push([z(_),S.x,S.y])}return H(ie,Q)}function ne(ae,Q,ie=!0){return K([{g1:ae,g2:Q}],ie)}const T=t.randomBytes||Ho,j={randomPrivateKey:()=>{const ae=uc(r.ORDER);return f0(T(ae),r.ORDER)},calcPairingPrecomputes:z};function Z(ae){if(!Array.isArray(ae)||ae.length===0)throw new Error("expected non-empty array")}function J(ae){return ae instanceof b.Point?ae:b.Point.fromHex(ae)}function V(ae){return ae instanceof N.Point?ae:R.fromHex(ae)}function q(ae,Q){function ie(O){return O instanceof ae.Point?O:ae.Point.fromHex(O)}function g(O){return O instanceof Q.Point?O:Q.Point.fromHex(O)}function _(O){if(!(O instanceof Q.Point))throw new Error(`expected valid message hashed to ${S?"G2":"G1"} curve`);return O}const S=Q.Point.Fp.BYTES>ae.Point.Fp.BYTES;return{getPublicKey(O){return ae.Point.fromPrivateKey(O)},sign(O,F,P){if(P!=null)throw new Error("sign() expects 2 arguments");return _(O).assertValidity(),O.multiply(ae.normPrivateKeyToScalar(F))},verify(O,F,P,h){if(h!=null)throw new Error("verify() expects 3 arguments");O=g(O),P=ie(P);const s=P.negate(),a=ae.Point.BASE,p=_(F),m=O,Y=K(S?[{g1:s,g2:p},{g1:a,g2:m}]:[{g1:p,g2:s},{g1:m,g2:a}]);return c.eql(Y,c.ONE)},aggregatePublicKeys(O){Z(O),O=O.map(P=>ie(P));const F=O.reduce((P,h)=>P.add(h),ae.Point.ZERO);return F.assertValidity(),F},aggregateSignatures(O){Z(O),O=O.map(P=>g(P));const F=O.reduce((P,h)=>P.add(h),Q.Point.ZERO);return F.assertValidity(),F},hash(O,F){tt(O);const P=F?{DST:F}:void 0;return Q.hashToCurve(O,P)},Signature:S?t.G2.Signature:t.G1.ShortSignature}}const ee=q(b,N),te=q(N,b),{ShortSignature:A}=t.G1,{Signature:R}=t.G2;function G(ae,Q){return ae instanceof b.Point?ae:te.hash(lt("point",ae),Q==null?void 0:Q.DST)}function L(ae,Q){return ae instanceof N.Point?ae:ee.hash(lt("point",ae),Q==null?void 0:Q.DST)}function D(ae){return ee.getPublicKey(ae).toBytes(!0)}function re(ae){return te.getPublicKey(ae).toBytes(!0)}function le(ae,Q,ie){const g=L(ae,ie),_=ee.sign(g,Q);return ae instanceof N.Point?_:R.toBytes(_)}function ye(ae,Q,ie){const g=G(ae,ie),_=te.sign(g,Q);return ae instanceof b.Point?_:A.toBytes(_)}function oe(ae,Q,ie,g){const _=L(Q,g);return ee.verify(ae,_,ie)}function fe(ae,Q,ie,g){const _=G(Q,g);return te.verify(ae,_,ie)}function Ne(ae){const Q=ee.aggregatePublicKeys(ae);return ae[0]instanceof b.Point?Q:Q.toBytes(!0)}function B(ae){const Q=ee.aggregateSignatures(ae);return ae[0]instanceof N.Point?Q:R.toBytes(Q)}function Ae(ae){const Q=te.aggregateSignatures(ae);return ae[0]instanceof b.Point?Q:A.toBytes(Q)}function Ie(ae,Q,ie,g){if(Z(Q),ie.length!==Q.length)throw new Error("amount of public keys and messages should be equal");const _=V(ae),S=Q.map(h=>L(h,g)),O=ie.map(J),F=new Map;for(let h=0;h<O.length;h++){const s=O[h],a=S[h];let p=F.get(a);p===void 0&&(p=[],F.set(a,p)),p.push(s)}const P=[];try{for(const[h,s]of F){const a=s.reduce((p,m)=>p.add(m));P.push({g1:a,g2:h})}return P.push({g1:b.Point.BASE.negate(),g2:_}),c.eql(K(P),c.ONE)}catch{return!1}}return b.Point.BASE.precompute(4),{longSignatures:ee,shortSignatures:te,millerLoopBatch:H,pairing:ne,pairingBatch:K,verifyBatch:Ie,curves:{G1:w.Point,G2:x.Point},fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:c},params:{ateLoopSize:t.params.ateLoopSize,twistType:t.params.twistType,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:j,getPublicKey:D,getPublicKeyForShortSignatures:re,sign:le,signShortSignature:ye,verify:oe,verifyShortSignature:fe,aggregatePublicKeys:Ne,aggregateSignatures:B,aggregateShortSignatures:Ae,G1:b,G2:N,Signature:R,ShortSignature:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ho=BigInt(0),jr=BigInt(1),Wt=BigInt(2),po=BigInt(3);function Qi(t,e,r,n,i=1,c){const f=BigInt(c===void 0?n:c),o=r**BigInt(n),w=[];for(let b=0;b<i;b++){const x=BigInt(b+1),N=[];for(let U=0,E=jr;U<n;U++){const y=(x*E-x)/f%o;N.push(t.pow(e,y)),E*=r}w.push(N)}return w}function T0(t,e,r){const n=e.pow(r,(t.ORDER-jr)/po),i=e.pow(r,(t.ORDER-jr)/Wt);function c(U,E){const y=e.mul(e.frobeniusMap(U,1),n),M=e.mul(e.frobeniusMap(E,1),i);return[y,M]}const f=e.pow(r,(t.ORDER**Wt-jr)/po),o=e.pow(r,(t.ORDER**Wt-jr)/Wt);if(!e.eql(o,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function w(U,E){return[e.mul(U,f),e.neg(E)]}const b=U=>(E,y)=>{const M=y.toAffine(),C=U(M.x,M.y);return E.fromAffine({x:C[0],y:C[1]})},x=b(c),N=b(w);return{psi:c,psi2:w,G2psi:x,G2psi2:N,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:o}}function S0(t){const{ORDER:e}=t,r=Ir(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=r.div(r.ONE,Wt),c=Qi(r,n,r.ORDER,2)[0],f=({c0:A,c1:R},{c0:G,c1:L})=>({c0:r.add(A,G),c1:r.add(R,L)}),o=({c0:A,c1:R},{c0:G,c1:L})=>({c0:r.sub(A,G),c1:r.sub(R,L)}),w=({c0:A,c1:R},G)=>{if(typeof G=="bigint")return{c0:r.mul(A,G),c1:r.mul(R,G)};const{c0:L,c1:D}=G;let re=r.mul(A,L),le=r.mul(R,D);const ye=r.sub(re,le),oe=r.sub(r.mul(r.add(A,R),r.add(L,D)),r.add(re,le));return{c0:ye,c1:oe}},b=({c0:A,c1:R})=>{const G=r.add(A,R),L=r.sub(A,R),D=r.add(A,A);return{c0:r.mul(G,L),c1:r.mul(D,R)}},x=A=>{if(A.length!==2)throw new Error("invalid tuple");const R=A.map(G=>r.create(G));return{c0:R[0],c1:R[1]}};function N(A,R){return typeof A=="bigint"&&ho<=A&&A<R}const U=e*e,E=x(t.FP2_NONRESIDUE),y={ORDER:U,isLE:r.isLE,NONRESIDUE:E,BITS:ln(U),BYTES:Math.ceil(ln(U)/8),MASK:Yr(ln(U)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:A=>A,isValid:({c0:A,c1:R})=>N(A,U)&&N(R,U),is0:({c0:A,c1:R})=>r.is0(A)&&r.is0(R),isValidNot0:A=>!y.is0(A)&&y.isValid(A),eql:({c0:A,c1:R},{c0:G,c1:L})=>r.eql(A,G)&&r.eql(R,L),neg:({c0:A,c1:R})=>({c0:r.neg(A),c1:r.neg(R)}),pow:(A,R)=>zn(y,A,R),invertBatch:A=>Er(y,A),add:f,sub:o,mul:w,sqr:b,addN:f,subN:o,mulN:w,sqrN:b,div:(A,R)=>y.mul(A,typeof R=="bigint"?r.inv(r.create(R)):y.inv(R)),inv:({c0:A,c1:R})=>{const G=r.inv(r.create(A*A+R*R));return{c0:r.mul(G,r.create(A)),c1:r.mul(G,r.create(-R))}},sqrt:A=>{if(t.Fp2sqrt)return t.Fp2sqrt(A);const{c0:R,c1:G}=A;if(r.is0(G))return di(r,R)===1?y.create({c0:r.sqrt(R),c1:r.ZERO}):y.create({c0:r.ZERO,c1:r.sqrt(r.div(R,n))});const L=r.sqrt(r.sub(r.sqr(R),r.mul(r.sqr(G),n)));let D=r.mul(r.add(L,R),i);di(r,D)===-1&&(D=r.sub(D,L));const le=r.sqrt(D),ye=y.create({c0:le,c1:r.div(r.mul(G,i),le)});if(!y.eql(y.sqr(ye),A))throw new Error("Cannot find square root");const oe=ye,fe=y.neg(oe),{re:Ne,im:B}=y.reim(oe),{re:Ae,im:Ie}=y.reim(fe);return B>Ie||B===Ie&&Ne>Ae?oe:fe},isOdd:A=>{const{re:R,im:G}=y.reim(A),L=R%Wt,D=R===ho,re=G%Wt;return BigInt(L||D&&re)==jr},fromBytes(A){if(A.length!==y.BYTES)throw new Error("fromBytes invalid length="+A.length);return{c0:r.fromBytes(A.subarray(0,r.BYTES)),c1:r.fromBytes(A.subarray(r.BYTES))}},toBytes:({c0:A,c1:R})=>qe(r.toBytes(A),r.toBytes(R)),cmov:({c0:A,c1:R},{c0:G,c1:L},D)=>({c0:r.cmov(A,G,D),c1:r.cmov(R,L,D)}),reim:({c0:A,c1:R})=>({re:A,im:R}),mulByNonresidue:({c0:A,c1:R})=>y.mul({c0:A,c1:R},E),mulByB:t.Fp2mulByB,fromBigTuple:x,frobeniusMap:({c0:A,c1:R},G)=>({c0:A,c1:r.mul(R,c[G%2])})},M=({c0:A,c1:R,c2:G},{c0:L,c1:D,c2:re})=>({c0:y.add(A,L),c1:y.add(R,D),c2:y.add(G,re)}),C=({c0:A,c1:R,c2:G},{c0:L,c1:D,c2:re})=>({c0:y.sub(A,L),c1:y.sub(R,D),c2:y.sub(G,re)}),z=({c0:A,c1:R,c2:G},L)=>{if(typeof L=="bigint")return{c0:y.mul(A,L),c1:y.mul(R,L),c2:y.mul(G,L)};const{c0:D,c1:re,c2:le}=L,ye=y.mul(A,D),oe=y.mul(R,re),fe=y.mul(G,le);return{c0:y.add(ye,y.mulByNonresidue(y.sub(y.mul(y.add(R,G),y.add(re,le)),y.add(oe,fe)))),c1:y.add(y.sub(y.mul(y.add(A,R),y.add(D,re)),y.add(ye,oe)),y.mulByNonresidue(fe)),c2:y.sub(y.add(oe,y.mul(y.add(A,G),y.add(D,le))),y.add(ye,fe))}},H=({c0:A,c1:R,c2:G})=>{let L=y.sqr(A),D=y.mul(y.mul(A,R),Wt),re=y.mul(y.mul(R,G),Wt),le=y.sqr(G);return{c0:y.add(y.mulByNonresidue(re),L),c1:y.add(y.mulByNonresidue(le),D),c2:y.sub(y.sub(y.add(y.add(D,y.sqr(y.add(y.sub(A,R),G))),re),L),le)}},[K,ne]=Qi(y,E,r.ORDER,6,2,3),T={ORDER:y.ORDER,isLE:y.isLE,BITS:3*y.BITS,BYTES:3*y.BYTES,MASK:Yr(3*y.BITS),ZERO:{c0:y.ZERO,c1:y.ZERO,c2:y.ZERO},ONE:{c0:y.ONE,c1:y.ZERO,c2:y.ZERO},create:A=>A,isValid:({c0:A,c1:R,c2:G})=>y.isValid(A)&&y.isValid(R)&&y.isValid(G),is0:({c0:A,c1:R,c2:G})=>y.is0(A)&&y.is0(R)&&y.is0(G),isValidNot0:A=>!T.is0(A)&&T.isValid(A),neg:({c0:A,c1:R,c2:G})=>({c0:y.neg(A),c1:y.neg(R),c2:y.neg(G)}),eql:({c0:A,c1:R,c2:G},{c0:L,c1:D,c2:re})=>y.eql(A,L)&&y.eql(R,D)&&y.eql(G,re),sqrt:no,div:(A,R)=>T.mul(A,typeof R=="bigint"?r.inv(r.create(R)):T.inv(R)),pow:(A,R)=>zn(T,A,R),invertBatch:A=>Er(T,A),add:M,sub:C,mul:z,sqr:H,addN:M,subN:C,mulN:z,sqrN:H,inv:({c0:A,c1:R,c2:G})=>{let L=y.sub(y.sqr(A),y.mulByNonresidue(y.mul(G,R))),D=y.sub(y.mulByNonresidue(y.sqr(G)),y.mul(A,R)),re=y.sub(y.sqr(R),y.mul(A,G)),le=y.inv(y.add(y.mulByNonresidue(y.add(y.mul(G,D),y.mul(R,re))),y.mul(A,L)));return{c0:y.mul(le,L),c1:y.mul(le,D),c2:y.mul(le,re)}},fromBytes:A=>{if(A.length!==T.BYTES)throw new Error("fromBytes invalid length="+A.length);return{c0:y.fromBytes(A.subarray(0,y.BYTES)),c1:y.fromBytes(A.subarray(y.BYTES,2*y.BYTES)),c2:y.fromBytes(A.subarray(2*y.BYTES))}},toBytes:({c0:A,c1:R,c2:G})=>qe(y.toBytes(A),y.toBytes(R),y.toBytes(G)),cmov:({c0:A,c1:R,c2:G},{c0:L,c1:D,c2:re},le)=>({c0:y.cmov(A,L,le),c1:y.cmov(R,D,le),c2:y.cmov(G,re,le)}),fromBigSix:A=>{if(!Array.isArray(A)||A.length!==6)throw new Error("invalid Fp6 usage");return{c0:y.fromBigTuple(A.slice(0,2)),c1:y.fromBigTuple(A.slice(2,4)),c2:y.fromBigTuple(A.slice(4,6))}},frobeniusMap:({c0:A,c1:R,c2:G},L)=>({c0:y.frobeniusMap(A,L),c1:y.mul(y.frobeniusMap(R,L),K[L%6]),c2:y.mul(y.frobeniusMap(G,L),ne[L%6])}),mulByFp2:({c0:A,c1:R,c2:G},L)=>({c0:y.mul(A,L),c1:y.mul(R,L),c2:y.mul(G,L)}),mulByNonresidue:({c0:A,c1:R,c2:G})=>({c0:y.mulByNonresidue(G),c1:A,c2:R}),mul1:({c0:A,c1:R,c2:G},L)=>({c0:y.mulByNonresidue(y.mul(G,L)),c1:y.mul(A,L),c2:y.mul(R,L)}),mul01({c0:A,c1:R,c2:G},L,D){let re=y.mul(A,L),le=y.mul(R,D);return{c0:y.add(y.mulByNonresidue(y.sub(y.mul(y.add(R,G),D),le)),re),c1:y.sub(y.sub(y.mul(y.add(L,D),y.add(A,R)),re),le),c2:y.add(y.sub(y.mul(y.add(A,G),L),re),le)}}},j=Qi(y,E,r.ORDER,12,1,6)[0],Z=({c0:A,c1:R},{c0:G,c1:L})=>({c0:T.add(A,G),c1:T.add(R,L)}),J=({c0:A,c1:R},{c0:G,c1:L})=>({c0:T.sub(A,G),c1:T.sub(R,L)}),V=({c0:A,c1:R},G)=>{if(typeof G=="bigint")return{c0:T.mul(A,G),c1:T.mul(R,G)};let{c0:L,c1:D}=G,re=T.mul(A,L),le=T.mul(R,D);return{c0:T.add(re,T.mulByNonresidue(le)),c1:T.sub(T.mul(T.add(A,R),T.add(L,D)),T.add(re,le))}},q=({c0:A,c1:R})=>{let G=T.mul(A,R);return{c0:T.sub(T.sub(T.mul(T.add(T.mulByNonresidue(R),A),T.add(A,R)),G),T.mulByNonresidue(G)),c1:T.add(G,G)}};function ee(A,R){const G=y.sqr(A),L=y.sqr(R);return{first:y.add(y.mulByNonresidue(L),G),second:y.sub(y.sub(y.sqr(y.add(A,R)),G),L)}}const te={ORDER:y.ORDER,isLE:T.isLE,BITS:2*T.BITS,BYTES:2*T.BYTES,MASK:Yr(2*T.BITS),ZERO:{c0:T.ZERO,c1:T.ZERO},ONE:{c0:T.ONE,c1:T.ZERO},create:A=>A,isValid:({c0:A,c1:R})=>T.isValid(A)&&T.isValid(R),is0:({c0:A,c1:R})=>T.is0(A)&&T.is0(R),isValidNot0:A=>!te.is0(A)&&te.isValid(A),neg:({c0:A,c1:R})=>({c0:T.neg(A),c1:T.neg(R)}),eql:({c0:A,c1:R},{c0:G,c1:L})=>T.eql(A,G)&&T.eql(R,L),sqrt:no,inv:({c0:A,c1:R})=>{let G=T.inv(T.sub(T.sqr(A),T.mulByNonresidue(T.sqr(R))));return{c0:T.mul(A,G),c1:T.neg(T.mul(R,G))}},div:(A,R)=>te.mul(A,typeof R=="bigint"?r.inv(r.create(R)):te.inv(R)),pow:(A,R)=>zn(te,A,R),invertBatch:A=>Er(te,A),add:Z,sub:J,mul:V,sqr:q,addN:Z,subN:J,mulN:V,sqrN:q,fromBytes:A=>{if(A.length!==te.BYTES)throw new Error("fromBytes invalid length="+A.length);return{c0:T.fromBytes(A.subarray(0,T.BYTES)),c1:T.fromBytes(A.subarray(T.BYTES))}},toBytes:({c0:A,c1:R})=>qe(T.toBytes(A),T.toBytes(R)),cmov:({c0:A,c1:R},{c0:G,c1:L},D)=>({c0:T.cmov(A,G,D),c1:T.cmov(R,L,D)}),fromBigTwelve:A=>({c0:T.fromBigSix(A.slice(0,6)),c1:T.fromBigSix(A.slice(6,12))}),frobeniusMap(A,R){const{c0:G,c1:L,c2:D}=T.frobeniusMap(A.c1,R),re=j[R%12];return{c0:T.frobeniusMap(A.c0,R),c1:T.create({c0:y.mul(G,re),c1:y.mul(L,re),c2:y.mul(D,re)})}},mulByFp2:({c0:A,c1:R},G)=>({c0:T.mulByFp2(A,G),c1:T.mulByFp2(R,G)}),conjugate:({c0:A,c1:R})=>({c0:A,c1:T.neg(R)}),mul014:({c0:A,c1:R},G,L,D)=>{let re=T.mul01(A,G,L),le=T.mul1(R,D);return{c0:T.add(T.mulByNonresidue(le),re),c1:T.sub(T.sub(T.mul01(T.add(R,A),G,y.add(L,D)),re),le)}},mul034:({c0:A,c1:R},G,L,D)=>{const re=T.create({c0:y.mul(A.c0,G),c1:y.mul(A.c1,G),c2:y.mul(A.c2,G)}),le=T.mul01(R,L,D),ye=T.mul01(T.add(A,R),y.add(G,L),D);return{c0:T.add(T.mulByNonresidue(le),re),c1:T.sub(ye,T.add(re,le))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:y,Fp6:T,Fp12:te,Fp4Square:ee}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ot=BigInt(0),yi=BigInt(1),Xe=BigInt(2),Si=BigInt(3),bn=BigInt(4),cr=BigInt("0xd201000000010000"),N0=ln(cr),Nr={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:ot,b:bn,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},I0=Ir(Nr.n),{Fp:pe,Fp2:de,Fp6:bs,Fp4Square:Di,Fp12:Be}=S0({ORDER:Nr.p,FP2_NONRESIDUE:[yi,yi],Fp2mulByB:({c0:t,c1:e})=>{const r=pe.mul(t,bn),n=pe.mul(e,bn);return{c0:pe.sub(r,n),c1:pe.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:c,c1:f,c2:o}=e,{first:w,second:b}=Di(r,f),{first:x,second:N}=Di(c,i),{first:U,second:E}=Di(n,o),y=de.mulByNonresidue(E);return{c0:bs.create({c0:de.add(de.mul(de.sub(w,r),Xe),w),c1:de.add(de.mul(de.sub(x,n),Xe),x),c2:de.add(de.mul(de.sub(U,i),Xe),U)}),c1:bs.create({c0:de.add(de.mul(de.add(y,c),Xe),y),c1:de.add(de.mul(de.add(b,f),Xe),b),c2:de.add(de.mul(de.add(N,o),Xe),N)})}},Fp12cyclotomicExp(t,e){let r=Be.ONE;for(let n=N0-1;n>=0;n--)r=Be._cyclotomicSquare(r),t0(e,n)&&(r=Be.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=cr,r=Be.div(Be.frobeniusMap(t,6),t),n=Be.mul(Be.frobeniusMap(r,2),r),i=Be.conjugate(Be._cyclotomicExp(n,e)),c=Be.mul(Be.conjugate(Be._cyclotomicSquare(n)),i),f=Be.conjugate(Be._cyclotomicExp(c,e)),o=Be.conjugate(Be._cyclotomicExp(f,e)),w=Be.mul(Be.conjugate(Be._cyclotomicExp(o,e)),Be._cyclotomicSquare(i)),b=Be.conjugate(Be._cyclotomicExp(w,e)),x=Be.frobeniusMap(Be.mul(i,o),2),N=Be.frobeniusMap(Be.mul(f,n),3),U=Be.frobeniusMap(Be.mul(w,Be.conjugate(n)),1),E=Be.mul(Be.mul(b,Be.conjugate(c)),n);return Be.mul(Be.mul(Be.mul(x,N),U),E)}}),{G2psi:yo,G2psi2:R0}=T0(pe,de,de.div(de.ONE,de.NONRESIDUE)),es=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:pe.ORDER,m:2,k:128,expand:"xmd",hash:Ts}),Ps={p:de.ORDER,n:Nr.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:de.ZERO,b:de.fromBigTuple([bn,bn]),Gx:de.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:de.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},Ni=Tn(pe.toBytes(ot),{infinity:!0,compressed:!0});function Ii(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function Tn(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function U0(t,e,r){const{BYTES:n,ORDER:i}=pe,c=e.is0(),{x:f,y:o}=e.toAffine();if(r){if(c)return Ni.slice();const w=!!(o*Xe/i);return Tn(De(f,n),{compressed:!0,sort:w})}else return c?qe(Uint8Array.of(64),new Uint8Array(2*n-1)):qe(De(f,n),De(o,n))}function ts(t){t.assertValidity();const{BYTES:e,ORDER:r}=pe,{x:n,y:i}=t.toAffine();if(t.is0())return Ni.slice();const c=!!(i*Xe/r);return Tn(De(n,e),{compressed:!0,sort:c})}function F0(t){const{compressed:e,infinity:r,sort:n,value:i}=Ii(t),{BYTES:c,ORDER:f}=pe;if(i.length===48&&e){const o=Gt(i),w=pe.create(o&pe.MASK);if(r){if(w!==ot)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:ot,y:ot}}const b=pe.add(pe.pow(w,Si),pe.create(Nr.b));let x=pe.sqrt(b);if(!x)throw new Error("invalid G1 point: compressed point");return x*Xe/f!==BigInt(n)&&(x=pe.neg(x)),{x:pe.create(w),y:pe.create(x)}}else if(i.length===96&&!e){const o=Gt(i.subarray(0,c)),w=Gt(i.subarray(c));if(r){if(o!==ot||w!==ot)throw new Error("G1: non-empty point at infinity");return Ri.G1.Point.ZERO.toAffine()}return{x:pe.create(o),y:pe.create(w)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function wo(t){const{infinity:e,sort:r,value:n}=Ii(lt("signatureHex",t,48)),i=pe.ORDER,c=Ri.G1.Point,f=Gt(n);if(e)return c.ZERO;const o=pe.create(f&pe.MASK),w=pe.add(pe.pow(o,Si),pe.create(Nr.b));let b=pe.sqrt(w);if(!b)throw new Error("invalid G1 point: compressed");const x=BigInt(r);b*Xe/i!==x&&(b=pe.neg(b));const N=c.fromAffine({x:o,y:b});return N.assertValidity(),N}function O0(t,e,r){const{BYTES:n,ORDER:i}=pe,c=e.is0(),{x:f,y:o}=e.toAffine();if(r){if(c)return qe(Ni,De(ot,n));const w=!!(o.c1===ot?o.c0*Xe/i:o.c1*Xe/i);return qe(Tn(De(f.c1,n),{compressed:!0,sort:w}),De(f.c0,n))}else{if(c)return qe(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:w,im:b}=de.reim(f),{re:x,im:N}=de.reim(o);return qe(De(b,n),De(w,n),De(N,n),De(x,n))}}function rs(t){t.assertValidity();const{BYTES:e}=pe;if(t.is0())return qe(Ni,De(ot,e));const{x:r,y:n}=t.toAffine(),{re:i,im:c}=de.reim(r),{re:f,im:o}=de.reim(n),b=!!((o>ot?o*Xe:f*Xe)/pe.ORDER&yi),x=i;return qe(Tn(De(c,e),{sort:b,compressed:!0}),De(x,e))}function k0(t){const{BYTES:e,ORDER:r}=pe,{compressed:n,infinity:i,sort:c,value:f}=Ii(t);if(!n&&!i&&c||!n&&i&&c||c&&i&&n)throw new Error("invalid encoding flag: "+(t[0]&224));const o=(w,b,x)=>Gt(w.slice(b,x));if(f.length===96&&n){if(i){if(f.reduce((y,M)=>y!==0?M+1:M,0)>0)throw new Error("invalid G2 point: compressed");return{x:de.ZERO,y:de.ZERO}}const w=o(f,0,e),b=o(f,e,2*e),x=de.create({c0:pe.create(b),c1:pe.create(w)}),N=de.add(de.pow(x,Si),Ps.b);let U=de.sqrt(N);const E=U.c1===ot?U.c0*Xe/r:U.c1*Xe/r?yi:ot;return U=c&&E>0?U:de.neg(U),{x,y:U}}else if(f.length===192&&!n){if(i){if(f.reduce((U,E)=>U!==0?E+1:E,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:de.ZERO,y:de.ZERO}}const w=o(f,0*e,1*e),b=o(f,1*e,2*e),x=o(f,2*e,3*e),N=o(f,3*e,4*e);return{x:de.fromBigTuple([b,w]),y:de.fromBigTuple([N,x])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function go(t){const{ORDER:e}=pe,{infinity:r,sort:n,value:i}=Ii(lt("signatureHex",t)),c=Ri.G2.Point,f=i.length/2;if(f!==48&&f!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const o=Gt(i.slice(0,f)),w=Gt(i.slice(f));if(r)return c.ZERO;const b=pe.create(o&pe.MASK),x=pe.create(w),N=de.create({c0:x,c1:b}),U=de.add(de.pow(N,Si),Ps.b);let E=de.sqrt(U);if(!E)throw new Error("Failed to find a square root");const{re:y,im:M}=de.reim(E),C=BigInt(n),z=M>ot&&M*Xe/e!==C,H=M===ot&&y*Xe/e!==C;(z||H)&&(E=de.neg(E));const K=c.fromAffine({x:N,y:E});return K.assertValidity(),K}const Ri=v0({fields:{Fp:pe,Fp2:de,Fp6:bs,Fp12:Be,Fr:I0},G1:{...Nr,Fp:pe,htfDefaults:{...es,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(pe.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(cr).negate().multiplyUnsafe(cr).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(cr).add(e),mapToCurve:q0,fromBytes:F0,toBytes:U0,ShortSignature:{fromBytes(t){return tt(t),wo(t)},fromHex(t){return wo(t)},toBytes(t){return ts(t)},toRawBytes(t){return ts(t)},toHex(t){return Xr(ts(t))}}},G2:{...Ps,Fp:de,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...es},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:G0,isTorsionFree:(t,e)=>e.multiplyUnsafe(cr).negate().equals(yo(t,e)),clearCofactor:(t,e)=>{const r=cr;let n=e.multiplyUnsafe(r).negate(),i=yo(t,e),c=e.double();return c=R0(t,c),c=c.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),c=c.add(i),c=c.subtract(n),c.subtract(e)},fromBytes:k0,toBytes:O0,Signature:{fromBytes(t){return tt(t),go(t)},fromHex(t){return go(t)},toBytes(t){return rs(t)},toRawBytes(t){return rs(t)},toHex(t){return Xr(rs(t))}}},params:{ateLoopSize:cr,r:Nr.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:es,hash:Ts}),M0=yc(de,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>de.fromBigTuple(e.map(BigInt))))),P0=yc(pe,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),C0=mc(pe,{A:pe.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:pe.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:pe.create(BigInt(11))}),$0=mc(de,{A:de.create({c0:pe.create(ot),c1:pe.create(BigInt(240))}),B:de.create({c0:pe.create(BigInt(1012)),c1:pe.create(BigInt(1012))}),Z:de.create({c0:pe.create(BigInt(-2)),c1:pe.create(BigInt(-1))})});function q0(t){const{x:e,y:r}=C0(pe.create(t[0]));return P0(e,r)}function G0(t){const{x:e,y:r}=$0(de.fromBigTuple(t));return M0(e,r)}function V0(t,e,r){const n=typeof t=="string"?t:Ze(t),i=typeof e=="string"?e:Ze(e),c=typeof r=="string"?r:Ze(r);return Ri.verifyShortSignature(i,c,n)}const bc=t=>We(new Dr(t)),Cs=t=>{const e=bc(t);return new Date(Number(e)/1e6)};var H0=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},j0=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Yn;class Mt extends Pe{constructor(e){super(`Invalid certificate: ${e}`)}}var pt;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(pt||(pt={}));function z0(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class Br{constructor(e,r,n,i,c=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=c,Yn.set(this,!1),H0(this,Yn,f,"f"),this.cert=Lt(new Uint8Array(e))}static async create(e){const r=Br.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=V0),new Br(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return Qr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await Kn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=K0(r),c=qt(an("ic-state-root"),e);let f=!1;const o=gt(this.lookup(["time"]));if(!o)throw new Mt("Certificate does not contain a time");if(!j0(this,Yn,"f")){const b=this._maxAgeInMinutes*60*1e3,x=Date.now(),N=x-b,U=x+3e5,E=Cs(o);if(E.getTime()<N)throw new Mt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+E.toISOString()+" Current time: "+new Date(x).toISOString());if(E.getTime()>U)throw new Mt("Certificate is signed more than 5 minutes in the future. Certificate time: "+E.toISOString()+" Current time: "+new Date(x).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(c))}catch{f=!1}if(!f)throw new Mt("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await Br.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Mt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==xl&&!_c({canisterId:this._canisterId,subnetId:xe.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new Mt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${Ze(e.subnet_id)}`);const n=gt(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${Ze(e.subnet_id)}`);return n}}Yn=new WeakMap;const rn=ai("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),Y0=96;function K0(t){const e=rn.byteLength+Y0;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,rn.byteLength);if(!gi(r,rn))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${rn}, but get ${r}`);return t.slice(rn.byteLength)}function gt(t){if(t.status===je.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function Kn(t){switch(t[0]){case pt.Empty:return Bt(an("ic-hashtree-empty"));case pt.Pruned:return t[1];case pt.Leaf:return Bt(qt(an("ic-hashtree-leaf"),t[1]));case pt.Labeled:return Bt(qt(an("ic-hashtree-labeled"),t[1],await Kn(t[2])));case pt.Fork:return Bt(qt(an("ic-hashtree-fork"),await Kn(t[1]),await Kn(t[2])));default:throw new Error("unreachable")}}function an(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return qt(e,r)}var je;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(je||(je={}));var Zt;(function(t){t.Less="less",t.Greater="greater"})(Zt||(Zt={}));function Qr(t,e){if(t.length===0)switch(e[0]){case pt.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:je.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:je.Found,value:e[1].buffer}:{status:je.Found,value:e[1]}}default:return{status:je.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=Wn(r,e);switch(n.status){case je.Found:return Qr(t.slice(1),n.value);case Zt.Greater:case Zt.Less:return{status:je.Absent};default:return n}}function _s(t){switch(t[0]){case pt.Empty:return[];case pt.Fork:return _s(t[1]).concat(_s(t[2]));default:return[t]}}function Wn(t,e){switch(e[0]){case pt.Labeled:return z0(t,e[1])?{status:Zt.Greater}:gi(t,e[1])?{status:je.Found,value:e[2]}:{status:Zt.Less};case pt.Fork:const r=Wn(t,e[1]);switch(r.status){case Zt.Greater:{const n=Wn(t,e[2]);return n.status===Zt.Less?{status:je.Absent}:n}case je.Unknown:{let n=Wn(t,e[2]);return n.status===Zt.Less?{status:je.Unknown}:n}default:return r}case pt.Pruned:return{status:je.Unknown};default:return{status:je.Absent}}}function _c(t){const{canisterId:e,subnetId:r,tree:n}=t,i=Qr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==je.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Lt(i.value).map(w=>[xe.fromUint8Array(w[0]),xe.fromUint8Array(w[1])]).some(w=>w[0].ltEq(e)&&w[1].gtEq(e))}class W0{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const xc=async t=>{const{agent:e,paths:r}=t,n=xe.from(t.canisterId),i=[...new Set(r)],c=i.map(w=>xs(w,n)),f=new Map,o=i.map((w,b)=>(async()=>{var x;try{const N=await e.readState(n,{paths:[c[b]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const U=await Br.create({certificate:N.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),E=(C,z)=>{if(z==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const H=Ec(N.certificate,n,e.rootKey);return{path:z,data:H}}else return{path:z,data:gt(C.lookup(xs(z,n)))}},{path:y,data:M}=E(U,i[b]);if(!M)console.warn(`Expected to find result for path ${y}, but instead found nothing.`),typeof y=="string"?f.set(y,null):f.set(y.key,null);else switch(y){case"time":{f.set(y,Cs(M));break}case"controllers":{f.set(y,X0(M));break}case"module_hash":{f.set(y,mo(M));break}case"subnet":{f.set(y,M);break}case"candid":{f.set(y,new TextDecoder().decode(M));break}default:if(typeof y!="string"&&"key"in y&&"path"in y)switch(y.decodeStrategy){case"raw":f.set(y.key,M);break;case"leb128":{f.set(y.key,bc(M));break}case"cbor":{f.set(y.key,Bc(M));break}case"hex":{f.set(y.key,mo(M));break}case"utf-8":f.set(y.key,Z0(M))}}}catch(N){if(!((x=N==null?void 0:N.message)===null||x===void 0)&&x.includes("Invalid certificate"))throw new Pe(N.message);typeof w!="string"&&"key"in w&&"path"in w?f.set(w.key,null):f.set(w,null),console.group(),console.warn(`Expected to find result for path ${w}, but instead found nothing.`),console.warn(N),console.groupEnd()}})());return await Promise.all(o),f},Ec=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=Lt(new Uint8Array(t)),i=n.tree;let c=n.delegation,f;if(c&&c.subnet_id?f=xe.fromUint8Array(new Uint8Array(c.subnet_id)):!c&&typeof r<"u"?(f=xe.selfAuthenticating(new Uint8Array(r)),c={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=xe.selfAuthenticating(xe.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),c={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!_c({canisterId:e,subnetId:f,tree:i}))throw new Error("Canister not in range");const w=Qr(["subnet",c.subnet_id,"node"],i);if(w.status!==je.Found)throw new Error("Node not found");if(w.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const b=_s(w.value),x=new Map;return b.forEach(N=>{const U=xe.from(new Uint8Array(N[1])).toText(),E=Qr(["public_key"],N[2]);if(E.status!==je.Found)throw new Error("Public key not found");const y=E.value;if(y.byteLength!==44)throw new Error("Invalid public key length");x.set(U,y)}),{subnetId:xe.fromUint8Array(new Uint8Array(c.subnet_id)).toText(),nodeKeys:x}},xs=(t,e)=>{const r=new TextEncoder,n=c=>new DataView(r.encode(c).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const c=t.path,f=typeof c=="string"?n(c):c;return[n("canister"),i,n("metadata"),f]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},mo=t=>Ze(t),Bc=t=>Lt(t),Z0=t=>new TextDecoder().decode(t),X0=t=>Bc(t).map(r=>xe.fromUint8Array(new Uint8Array(r))),L0=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:W0,encodePath:xs,fetchNodeKeys:Ec,request:xc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const It=BigInt(0),ut=BigInt(1),ns=BigInt(2),J0=BigInt(8),Q0={zip215:!0};function D0(t,e,r,n){const i=t.sqr(r),c=t.sqr(n),f=t.add(t.mul(e.a,i),c),o=t.add(t.ONE,t.mul(e.d,t.mul(i,c)));return t.eql(f,o)}function el(t,e={}){const{Fp:r,Fn:n}=pc("edwards",t,e),{h:i,n:c}=t;vn(e,{},{uvRatio:"function"});const f=ns<<BigInt(n.BYTES*8)-ut,o=M=>r.create(M),w=e.uvRatio||((M,C)=>{try{return{isValid:!0,value:r.sqrt(r.div(M,C))}}catch{return{isValid:!1,value:It}}});if(!D0(r,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function b(M,C,z=!1){const H=z?ut:It;return on("coordinate "+M,C,H,f),C}function x(M){if(!(M instanceof E))throw new Error("ExtendedPoint expected")}const N=gn((M,C)=>{const{ex:z,ey:H,ez:K}=M,ne=M.is0();C==null&&(C=ne?J0:r.inv(K));const T=o(z*C),j=o(H*C),Z=o(K*C);if(ne)return{x:It,y:ut};if(Z!==ut)throw new Error("invZ was invalid");return{x:T,y:j}}),U=gn(M=>{const{a:C,d:z}=t;if(M.is0())throw new Error("bad point: ZERO");const{ex:H,ey:K,ez:ne,et:T}=M,j=o(H*H),Z=o(K*K),J=o(ne*ne),V=o(J*J),q=o(j*C),ee=o(J*o(q+Z)),te=o(V+o(z*o(j*Z)));if(ee!==te)throw new Error("bad point: equation left != right (1)");const A=o(H*K),R=o(ne*T);if(A!==R)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(C,z,H,K){this.ex=b("x",C),this.ey=b("y",z),this.ez=b("z",H,!0),this.et=b("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(C){if(C instanceof E)throw new Error("extended point not allowed");const{x:z,y:H}=C||{};return b("x",z),b("y",H),new E(z,H,ut,o(z*H))}static normalizeZ(C){return pi(E,"ez",C)}static msm(C,z){return dc(E,n,C,z)}_setWindowSize(C){this.precompute(C)}precompute(C=8,z=!0){return y.setWindowSize(this,C),z||this.multiply(ns),this}assertValidity(){U(this)}equals(C){x(C);const{ex:z,ey:H,ez:K}=this,{ex:ne,ey:T,ez:j}=C,Z=o(z*j),J=o(ne*K),V=o(H*j),q=o(T*K);return Z===J&&V===q}is0(){return this.equals(E.ZERO)}negate(){return new E(o(-this.ex),this.ey,this.ez,o(-this.et))}double(){const{a:C}=t,{ex:z,ey:H,ez:K}=this,ne=o(z*z),T=o(H*H),j=o(ns*o(K*K)),Z=o(C*ne),J=z+H,V=o(o(J*J)-ne-T),q=Z+T,ee=q-j,te=Z-T,A=o(V*ee),R=o(q*te),G=o(V*te),L=o(ee*q);return new E(A,R,L,G)}add(C){x(C);const{a:z,d:H}=t,{ex:K,ey:ne,ez:T,et:j}=this,{ex:Z,ey:J,ez:V,et:q}=C,ee=o(K*Z),te=o(ne*J),A=o(j*H*q),R=o(T*V),G=o((K+ne)*(Z+J)-ee-te),L=R-A,D=R+A,re=o(te-z*ee),le=o(G*L),ye=o(D*re),oe=o(G*re),fe=o(L*D);return new E(le,ye,fe,oe)}subtract(C){return this.add(C.negate())}multiply(C){const z=C;on("scalar",z,ut,c);const{p:H,f:K}=y.wNAFCached(this,z,E.normalizeZ);return E.normalizeZ([H,K])[0]}multiplyUnsafe(C,z=E.ZERO){const H=C;return on("scalar",H,It,c),H===It?E.ZERO:this.is0()||H===ut?this:y.wNAFCachedUnsafe(this,H,E.normalizeZ,z)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return y.wNAFCachedUnsafe(this,c).is0()}toAffine(C){return N(this,C)}clearCofactor(){return i===ut?this:this.multiplyUnsafe(i)}static fromBytes(C,z=!1){return tt(C),this.fromHex(C,z)}static fromHex(C,z=!1){const{d:H,a:K}=t,ne=r.BYTES;C=lt("pointHex",C,ne),yn("zip215",z);const T=C.slice(),j=C[ne-1];T[ne-1]=j&-129;const Z=wn(T),J=z?f:r.ORDER;on("pointHex.y",Z,It,J);const V=o(Z*Z),q=o(V-ut),ee=o(H*V-K);let{isValid:te,value:A}=w(q,ee);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const R=(A&ut)===ut,G=(j&128)!==0;if(!z&&A===It&&G)throw new Error("Point.fromHex: x=0 and x_0=1");return G!==R&&(A=o(-A)),E.fromAffine({x:A,y:Z})}static fromPrivateScalar(C){return E.BASE.multiply(C)}toBytes(){const{x:C,y:z}=this.toAffine(),H=Ti(z,r.BYTES);return H[H.length-1]|=C&ut?128:0,H}toRawBytes(){return this.toBytes()}toHex(){return Xr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(t.Gx,t.Gy,ut,o(t.Gx*t.Gy)),E.ZERO=new E(It,ut,ut,It),E.Fp=r,E.Fn=n;const y=hc(E,n.BYTES*8);return E}function tl(t,e){vn(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r,hash:n}=e,{BASE:i,Fp:c,Fn:f}=t,o=f.ORDER,w=e.randomBytes||Ho,b=e.adjustScalarBytes||(T=>T),x=e.domain||((T,j,Z)=>{if(yn("phflag",Z),j.length||Z)throw new Error("Contexts/pre-hash are not supported");return T});function N(T){return f.create(T)}function U(T){return N(wn(T))}function E(T){const j=c.BYTES;T=lt("private key",T,j);const Z=lt("hashed private key",n(T),2*j),J=b(Z.slice(0,j)),V=Z.slice(j,2*j),q=U(J);return{head:J,prefix:V,scalar:q}}function y(T){const{head:j,prefix:Z,scalar:J}=E(T),V=i.multiply(J),q=V.toBytes();return{head:j,prefix:Z,scalar:J,point:V,pointBytes:q}}function M(T){return y(T).pointBytes}function C(T=Uint8Array.of(),...j){const Z=qe(...j);return U(n(x(Z,lt("context",T),!!r)))}function z(T,j,Z={}){T=lt("message",T),r&&(T=r(T));const{prefix:J,scalar:V,pointBytes:q}=y(j),ee=C(Z.context,J,T),te=i.multiply(ee).toBytes(),A=C(Z.context,te,q,T),R=N(ee+A*V);on("signature.s",R,It,o);const G=c.BYTES,L=qe(te,Ti(R,G));return lt("result",L,G*2)}const H=Q0;function K(T,j,Z,J=H){const{context:V,zip215:q}=J,ee=c.BYTES;T=lt("signature",T,2*ee),j=lt("message",j),Z=lt("publicKey",Z,ee),q!==void 0&&yn("zip215",q),r&&(j=r(j));const te=wn(T.slice(ee,2*ee));let A,R,G;try{A=t.fromHex(Z,q),R=t.fromHex(T.slice(0,ee),q),G=i.multiplyUnsafe(te)}catch{return!1}if(!q&&A.isSmallOrder())return!1;const L=C(V,R.toBytes(),A.toBytes(),j);return R.add(A.multiplyUnsafe(L)).subtract(G).clearCofactor().is0()}return i.precompute(8),{getPublicKey:M,sign:z,verify:K,utils:{getExtendedPublicKey:y,randomPrivateKey:()=>w(c.BYTES),precompute(T=8,j=t.BASE){return j.precompute(T,!1)}},Point:t}}function rl(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Ir(e.n,t.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:t.uvRatio},c={hash:t.hash,randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,eddsaOpts:c}}function nl(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function il(t){const{CURVE:e,curveOpts:r,eddsaOpts:n}=rl(t),i=el(e,r),c=tl(i,n);return nl(t,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const sl=BigInt(1),bo=BigInt(2);BigInt(3);const ol=BigInt(5),al=BigInt(8),Ui={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:al,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function cl(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),c=Ui.p,o=t*t%c*t%c,w=St(o,bo,c)*o%c,b=St(w,sl,c)*t%c,x=St(b,ol,c)*b%c,N=St(x,e,c)*x%c,U=St(N,r,c)*N%c,E=St(U,n,c)*U%c,y=St(E,i,c)*E%c,M=St(y,i,c)*E%c,C=St(M,e,c)*x%c;return{pow_p_5_8:St(C,bo,c)*t%c,b2:o}}function ul(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const _o=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function fl(t,e){const r=Ui.p,n=He(e*e*e,r),i=He(n*n*e,r),c=cl(t*i).pow_p_5_8;let f=He(t*n*c,r);const o=He(e*f*f,r),w=f,b=He(f*_o,r),x=o===t,N=o===He(-t,r),U=o===He(-t*_o,r);return x&&(f=w),(N||U)&&(f=b),a0(f,r)&&(f=He(-f,r)),{isValid:x||N,value:f}}const ll=Ir(Ui.p,void 0,!0),hl={...Ui,Fp:ll,hash:Vu,adjustScalarBytes:ul,uvRatio:fl},dl=il(hl);var xo=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ft=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},it,cn,Ac,vc;class pl{constructor(e={}){it.set(this,void 0),cn.set(this,void 0),this[Ac]=this.entries.bind(this),this[vc]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();xo(this,it,new Map([...r].map(([c,f])=>[c,{value:f,timestamp:i}])),"f"),xo(this,cn,n,"f")}prune(){const e=Date.now();for(const[r,n]of ft(this,it,"f").entries())e-n.timestamp>ft(this,cn,"f")&&ft(this,it,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return ft(this,it,"f").set(e,n),this}get(e){const r=ft(this,it,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>ft(this,cn,"f")){ft(this,it,"f").delete(e);return}return r.value}}clear(){ft(this,it,"f").clear()}entries(){const e=ft(this,it,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=ft(this,it,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return ft(this,it,"f").keys()}forEach(e,r){for(const[n,i]of ft(this,it,"f").entries())e.call(r,i.value,n,this)}has(e){return ft(this,it,"f").has(e)}delete(e){return ft(this,it,"f").delete(e)}get size(){return ft(this,it,"f").size}}it=new WeakMap,cn=new WeakMap,Ac=Symbol.iterator,vc=Symbol.toStringTag;const Eo=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Bo=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},Es=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},yl=(t,e)=>{const r=Es(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const Ao=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function wl(t,e){const r=2+Eo(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const c=new Uint8Array(1+Eo(n)+n);return c[i++]=48,i+=Bo(c,i,n),c.set(e,i),i+=e.byteLength,c[i++]=3,i+=Bo(c,i,t.byteLength+1),c[i++]=0,c.set(new Uint8Array(t),i),c}const gl=(t,e)=>{let r=0;const n=(o,w)=>{if(i[r++]!==o)throw new Error("Expected: "+w)},i=new Uint8Array(t);if(n(48,"sequence"),r+=Es(i,r),!gi(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const c=yl(i,r)-1;r+=Es(i,r),n(0,"0 padding");const f=i.slice(r);if(c!==f.length)throw new Error(`DER payload mismatch: Expected length ${c} actual length ${f.length}`);return f};var vo=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},To=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Zn,Xn;class br{constructor(e){if(Zn.set(this,void 0),Xn.set(this,void 0),e.byteLength!==br.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");vo(this,Zn,e,"f"),vo(this,Xn,br.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new br(e)}static fromDer(e){return new br(this.derDecode(e))}static derEncode(e){return wl(e,Ao).buffer}static derDecode(e){const r=gl(e,Ao);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return To(this,Zn,"f")}get derKey(){return To(this,Xn,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}Zn=new WeakMap,Xn=new WeakMap;br.RAW_KEY_LENGTH=32;class ml{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class bl extends ml{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var Nt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},nt=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Rt,Ln,Jn,Qn,Dn,ei,ti,ri,Cr;const Tc=.5,Sc=1.5,Nc=500,Ic=6e4,Rc=9e5,Uc=10;class Fi{constructor(e=Fi.default){Rt.set(this,void 0),Ln.set(this,void 0),Jn.set(this,void 0),Qn.set(this,void 0),Dn.set(this,void 0),ei.set(this,void 0),ti.set(this,void 0),ri.set(this,void 0),Cr.set(this,0);const{initialInterval:r=Nc,randomizationFactor:n=Tc,multiplier:i=Sc,maxInterval:c=Ic,maxElapsedTime:f=Rc,maxIterations:o=Uc,date:w=Date}=e;Nt(this,Rt,r,"f"),Nt(this,Ln,n,"f"),Nt(this,Jn,i,"f"),Nt(this,Qn,c,"f"),Nt(this,ri,w,"f"),Nt(this,Dn,w.now(),"f"),Nt(this,ei,f,"f"),Nt(this,ti,o,"f")}get ellapsedTimeInMsec(){return nt(this,ri,"f").now()-nt(this,Dn,"f")}get currentInterval(){return nt(this,Rt,"f")}get count(){return nt(this,Cr,"f")}get randomValueFromInterval(){const e=nt(this,Ln,"f")*nt(this,Rt,"f"),r=nt(this,Rt,"f")-e,n=nt(this,Rt,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return Nt(this,Rt,Math.min(nt(this,Rt,"f")*nt(this,Jn,"f"),nt(this,Qn,"f")),"f"),Nt(this,Cr,(e=nt(this,Cr,"f"),e++,e),"f"),nt(this,Rt,"f")}next(){return this.ellapsedTimeInMsec>=nt(this,ei,"f")||nt(this,Cr,"f")>=nt(this,ti,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}Rt=new WeakMap,Ln=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,Dn=new WeakMap,ei=new WeakMap,ti=new WeakMap,ri=new WeakMap,Cr=new WeakMap;Fi.default={initialInterval:Nc,randomizationFactor:Tc,multiplier:Sc,maxInterval:Ic,maxElapsedTime:Rc,maxIterations:Uc,date:Date};var Le=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ce=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},st,lr,Kr,Ut,jt,zr,un,$r,xt,Et,hr,dr,fn,qr,Gr,pr,wr,Fc,ni,ii,yr,zt;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(zt||(zt={}));const Cn=60*1e3,_l="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",xl="aaaaa-aa",El="ic0.app",Bl=".ic0.app",Al="icp0.io",vl=".icp0.io",Tl="icp-api.io",Sl=".icp-api.io";class is extends Pe{constructor(e){super(e),this.message=e}}class $n extends Pe{constructor(e){super(e),this.message=e}}function Nl(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new is("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new is("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new is("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function Il(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,c=i==null?void 0:i.hostname;let f;c&&typeof c=="string"&&(n.some(o=>c.endsWith(o))?f=c:f=r.find(o=>c.endsWith(o))),i&&f?e=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class _r{constructor(e={}){var r,n;st.add(this),lr.set(this,null),Kr.set(this,!1),Ut.set(this,void 0),jt.set(this,void 0),zr.set(this,void 0),un.set(this,void 0),$r.set(this,0),xt.set(this,void 0),Et.set(this,void 0),hr.set(this,void 0),dr.set(this,void 0),this._isAgent=!0,this.config={},fn.set(this,0),this.log=new bl,qr.set(this,[]),Gr.set(this,[]),pr.set(this,new pl({expirationTime:5*60*1e3})),wr.set(this,!0),ii.set(this,(f,o)=>{if(ce(this,wr,"f")===!1)return f;if(!o)throw new Mt("Invalid signature from replica signed query: no matching node key found.");const{status:w,signatures:b=[],requestId:x}=f,N=nn(new TextEncoder().encode("\vic-response"));for(const U of b){const{timestamp:E,identity:y}=U,M=xe.fromUint8Array(y).toText();let C;if(w==="replied"){const{reply:T}=f;C=li({status:w,reply:T,timestamp:BigInt(E),request_id:x})}else if(w==="rejected"){const{reject_code:T,reject_message:j,error_code:Z}=f;C=li({status:w,reject_code:T,reject_message:j,error_code:Z,timestamp:BigInt(E),request_id:x})}else throw new Error(`Unknown status: ${w}`);const z=qt(N,nn(new Uint8Array(C))),H=o==null?void 0:o.nodeKeys.get(M);if(!H)throw new Mt("Invalid signature from replica signed query: no matching node key found.");const K=br.fromDer(H).rawKey;if(dl.verify(U.signature,new Uint8Array(z),new Uint8Array(K)))return f;throw new Mt(`Invalid signature from replica ${M} signed query.`)}return f}),this.config=e,Le(this,jt,e.fetch||Nl()||fetch.bind(global),"f"),Le(this,zr,e.fetchOptions,"f"),Le(this,un,e.callOptions,"f"),Le(this,Kr,(r=e.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),e.rootKey?this.rootKey=e.rootKey:ce(this,Kr,"f")?this.rootKey=null:this.rootKey=ai(_l);const i=Il(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&Le(this,wr,e.verifyQuerySignatures,"f"),Le(this,Et,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const c=()=>new Fi({maxIterations:ce(this,Et,"f")});if(Le(this,hr,e.backoffStrategy||c,"f"),this.host.hostname.endsWith(Bl)?this.host.hostname=El:this.host.hostname.endsWith(vl)?this.host.hostname=Al:this.host.hostname.endsWith(Sl)&&(this.host.hostname=Tl),e.credentials){const{name:f,password:o}=e.credentials;Le(this,xt,`${f}${o?":"+o:""}`,"f")}if(Le(this,Ut,Promise.resolve(e.identity||new Ds),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new Pe(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new Pe(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);Le(this,dr,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",ro(ws)),e.useQueryNonces&&this.addTransform("query",ro(ws)),e.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return ce(this,fn,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const r=_r.createSync(e),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(e){var r;try{return"config"in e?await _r.create(e.config):await _r.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(r=e._identity)!==null&&r!==void 0?r:void 0})}catch{throw new Pe("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=ce(this,Gr,"f").findIndex(c=>(c.priority||0)<n);ce(this,Gr,"f").splice(i>=0?i:ce(this,Gr,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=ce(this,qr,"f").findIndex(c=>(c.priority||0)<n);ce(this,qr,"f").splice(i>=0?i:ce(this,qr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ce(this,Ut,"f"))throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ce(this,Ut,"f")).getPrincipal()}async call(e,r,n){var i,c;await ce(this,st,"m",yr).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,o=await(n!==void 0?await n:await ce(this,Ut,"f"));if(!o)throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");const w=xe.from(e),b=r.effectiveCanisterId?xe.from(r.effectiveCanisterId):w,x=o.getPrincipal()||xe.anonymous();let N=new Mn(ce(this,dr,"f")*Cn);Math.abs(ce(this,$r,"f"))>1e3*30&&(N=new Mn(ce(this,dr,"f")*Cn+ce(this,$r,"f")));const U={request_type:ys.Call,canister_id:w,method_name:r.methodName,arg:r.arg,sender:x,ingress_expiry:N};let E=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,xt,"f")?{Authorization:"Basic "+btoa(ce(this,xt,"f"))}:{})},endpoint:"call",body:U}),y;r!=null&&r.nonce?y=M(r.nonce):E.body.nonce?y=M(E.body.nonce):y=void 0,U.nonce=y;function M(K){return new Uint8Array(K)}E=await o.transformRequest(E);const C=Ki(E.body),z=ce(this,hr,"f").call(this),H=Qs(U);try{const K=()=>(this.log.print(`fetching "/api/v3/canister/${b.toText()}/call" with request:`,E),ce(this,jt,"f").call(this,""+new URL(`/api/v3/canister/${b.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,un,"f")),E.request),{body:C}))),ne=()=>(this.log.print(`fetching "/api/v2/canister/${b.toText()}/call" with request:`,E),ce(this,jt,"f").call(this,""+new URL(`/api/v2/canister/${b.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,un,"f")),E.request),{body:C}))),j=await ce(this,st,"m",ni).call(this,{request:f?K:ne,backoff:z,tries:0}),Z=await j.arrayBuffer(),J=j.status===200&&Z.byteLength>0?Lt(Z):null;if(J&&"certificate"in J){const V=await this.parseTimeFromResponse({certificate:J.certificate});Le(this,fn,V,"f")}return{requestId:H,response:{ok:j.ok,status:j.status,statusText:j.statusText,body:J,headers:sn(j.headers)},requestDetails:U}}catch(K){if(K.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},r),{callSync:!1}),n);const ne=`Error while making call: ${(c=K.message)!==null&&c!==void 0?c:String(K)}`,T=new Qf(ne,K,Ze(H),Ze(E.body.sender_pubkey),Ze(E.body.sender_sig),String(E.body.content.ingress_expiry._value));throw this.log.error(ne,T),T}}async query(e,r,n){var i,c,f,o;await ce(this,st,"m",yr).call(this);const w=ce(this,hr,"f").call(this),b=r.effectiveCanisterId?xe.from(r.effectiveCanisterId):xe.from(e);this.log.print(`ecid ${b.toString()}`),this.log.print(`canisterId ${e.toString()}`);let x,N;const U=await(n!==void 0?n:ce(this,Ut,"f"));if(!U)throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");const E=xe.from(e),y=(U==null?void 0:U.getPrincipal())||xe.anonymous(),M={request_type:"query",canister_id:E,method_name:r.methodName,arg:r.arg,sender:y,ingress_expiry:new Mn(ce(this,dr,"f")*Cn)},C=Qs(M);x=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,xt,"f")?{Authorization:"Basic "+btoa(ce(this,xt,"f"))}:{})},endpoint:"read",body:M}),x=await(U==null?void 0:U.transformRequest(x));const z=Ki(x.body),H={canister:E.toText(),ecid:b,transformedRequest:x,body:z,requestId:C,backoff:w,tries:0},K=async()=>({requestDetails:M,query:await ce(this,st,"m",Fc).call(this,H)}),ne=async()=>{if(!ce(this,wr,"f"))return;const T=ce(this,pr,"f").get(b.toString());return T||(await this.fetchSubnetKeys(b.toString()),ce(this,pr,"f").get(b.toString()))};try{const[T,j]=await Promise.all([K(),ne()]);N=T;const{requestDetails:Z,query:J}=N,V=Object.assign(Object.assign({},J),{requestDetails:Z});if(this.log.print("Query response:",V),!ce(this,wr,"f"))return V;try{return ce(this,ii,"f").call(this,V,j)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ce(this,pr,"f").delete(e.toString()),await this.fetchSubnetKeys(b.toString());const ee=ce(this,pr,"f").get(e.toString());if(!ee)throw new Mt("Invalid signature from replica signed query: no matching node key found.");return ce(this,ii,"f").call(this,V,ee)}}catch(T){const j=`Error while making call: ${(i=T.message)!==null&&i!==void 0?i:String(T)}`,Z=new Df(j,T,String(C),Ze((c=x==null?void 0:x.body)===null||c===void 0?void 0:c.sender_pubkey),Ze((f=x==null?void 0:x.body)===null||f===void 0?void 0:f.sender_sig),String((o=x==null?void 0:x.body)===null||o===void 0?void 0:o.content.ingress_expiry._value));throw this.log.error(j,Z),Z}}async createReadStateRequest(e,r){await ce(this,st,"m",yr).call(this);const n=await(r!==void 0?await r:await ce(this,Ut,"f"));if(!n)throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||xe.anonymous(),c=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,xt,"f")?{Authorization:"Basic "+btoa(ce(this,xt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new Mn(ce(this,dr,"f")*Cn)}});return n==null?void 0:n.transformRequest(c)}async readState(e,r,n,i){var c,f,o,w;function b(M){for(const C of M.paths){const[z,H]=C,K=nn(new TextEncoder().encode("request_status"));if(gi(z,K))return H}}const x=b(r);await ce(this,st,"m",yr).call(this);const N=typeof e=="string"?xe.fromText(e):e,U=i??await this.createReadStateRequest(r,n),E=Ki(U.body);this.log.print(`fetching "/api/v2/canister/${N}/read_state" with request:`,U);const y=ce(this,hr,"f").call(this);try{const M=await ce(this,st,"m",ni).call(this,{request:()=>ce(this,jt,"f").call(this,""+new URL(`/api/v2/canister/${N.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,zr,"f")),U.request),{body:E})),backoff:y,tries:0});if(!M.ok)throw new Error(`Server returned an error:
  Code: ${M.status} (${M.statusText})
  Body: ${await M.text()}
`);const C=Lt(await M.arrayBuffer());this.log.print("Read state response:",C);const z=await this.parseTimeFromResponse(C);return z>0&&(this.log.print("Read state response time:",z),Le(this,fn,z,"f")),C}catch(M){const C=`Caught exception while attempting to read state: ${(c=M.message)!==null&&c!==void 0?c:String(M)}`,z=new e0(C,M,String(x),Ze((f=U==null?void 0:U.body)===null||f===void 0?void 0:f.sender_pubkey),Ze((o=U==null?void 0:U.body)===null||o===void 0?void 0:o.sender_sig),String((w=U==null?void 0:U.body)===null||w===void 0?void 0:w.content.ingress_expiry._value));throw this.log.error(C,z),z}}async parseTimeFromResponse(e){let r;if(e.certificate){const n=Lt(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=Qr(["time"],r);if(i.status!==je.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const c=Cs(nn(i.value));return this.log.print("Time from response:",c),this.log.print("Time from response in milliseconds:",Number(c)),Number(c)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await ce(this,st,"m",yr).call(this);const r=await ou(()=>Promise.resolve().then(()=>L0),void 0,import.meta.url),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=_r.createSync({identity:new Ds,host:this.host.toString(),fetch:ce(this,jt,"f"),retryTimes:0}),f=(await r.request({canisterId:e??xe.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(Le(this,$r,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ce(this,$r,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=ce(this,xt,"f")?{Authorization:"Basic "+btoa(ce(this,xt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ce(this,hr,"f").call(this),n=await ce(this,st,"m",ni).call(this,{backoff:r,request:()=>ce(this,jt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},ce(this,zr,"f"))),tries:0});return Lt(await n.arrayBuffer())}async fetchRootKey(){let e;return ce(this,lr,"f")?e=await ce(this,lr,"f"):(Le(this,lr,new Promise((r,n)=>{this.status().then(i=>{const c=i.root_key;this.rootKey=c,r(c)}).catch(n)}),"f"),e=await ce(this,lr,"f")),Le(this,lr,null,"f"),e}invalidateIdentity(){Le(this,Ut,null,"f")}replaceIdentity(e){Le(this,Ut,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await ce(this,st,"m",yr).call(this);const r=xe.from(e),i=(await xc({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ce(this,pr,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of ce(this,Gr,"f"))r=r.then(i=>n(i).then(c=>c||i));else for(const n of ce(this,qr,"f"))r=r.then(i=>n(i).then(c=>c||i));return r}}lr=new WeakMap,Kr=new WeakMap,Ut=new WeakMap,jt=new WeakMap,zr=new WeakMap,un=new WeakMap,$r=new WeakMap,xt=new WeakMap,Et=new WeakMap,hr=new WeakMap,dr=new WeakMap,fn=new WeakMap,qr=new WeakMap,Gr=new WeakMap,pr=new WeakMap,wr=new WeakMap,ii=new WeakMap,st=new WeakSet,Fc=async function t(e){var r,n;const{ecid:i,transformedRequest:c,body:f,requestId:o,backoff:w,tries:b}=e,x=b===0?0:w.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:b,backoff:w,delay:x}),x===null)throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,Et,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);x>0&&await new Promise(y=>setTimeout(y,x));let N;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,c);const y=await ce(this,jt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,zr,"f")),c.request),{body:f}));if(y.status===200){const M=Lt(await y.arrayBuffer());N=Object.assign(Object.assign({},M),{httpDetails:{ok:y.ok,status:y.status,statusText:y.statusText,headers:sn(y.headers)},requestId:o})}else throw new Wi(`Gateway returned an error:
  Code: ${y.status} (${y.statusText})
  Body: ${await y.text()}
`,{ok:y.ok,status:y.status,statusText:y.statusText,headers:sn(y.headers)})}catch(y){if(b<ce(this,Et,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${y}
  Retrying query.`),await ce(this,st,"m",t).call(this,Object.assign(Object.assign({},e),{tries:b+1}));throw y}const U=(n=(r=N.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ce(this,wr,"f"))return N;if(!U)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const E=Number(BigInt(U)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:E}),Number(this.waterMark)>E){const y=new Pe("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",y,{timestamp:U,waterMark:this.waterMark}),b<ce(this,Et,"f"))return await ce(this,st,"m",t).call(this,Object.assign(Object.assign({},e),{tries:b+1}));throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,Et,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return N},ni=async function t(e){const{request:r,backoff:n,tries:i}=e,c=i===0?0:n.next();if(c===null)throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,Et,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);c>0&&await new Promise(b=>setTimeout(b,c));let f;try{f=await r()}catch(b){if(ce(this,Et,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${b}
  Retrying request.`),await ce(this,st,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw b}if(f.ok)return f;const o=await f.clone().text(),w=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${o}
`;if(f.status===404&&f.url.includes("api/v3"))throw new Wi("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:sn(f.headers)});if(i<ce(this,Et,"f"))return await ce(this,st,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new Wi(w,{ok:f.ok,status:f.status,statusText:f.statusText,headers:sn(f.headers)})},yr=async function(){if(!this.rootKey)if(this.rootKey===null&&ce(this,Kr,"f"))await this.fetchRootKey();else throw new Pe(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ce(this,Kr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var So;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(So||(So={}));function No(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const Rl=5*60*1e3;function Oc(){return Ml(Fl(Ul(),1e3),kl(1e3,1.2),Ol(Rl))}function Ul(){let t=!0;return async()=>t?(t=!1,!0):!1}function Fl(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(c=>setTimeout(c,e))}}function Ol(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${Ze(n)}
  Request status: ${i}
`)}}function kl(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function Ml(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function kc(t,e,r,n=Oc(),i,c){var f;const o=[new TextEncoder().encode("request_status"),r],w=i??await((f=t.createReadStateRequest)===null||f===void 0?void 0:f.call(t,{paths:[o]})),b=await t.readState(e,{paths:[o]},void 0,w);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const x=await Br.create({certificate:b.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:c}),N=gt(x.lookup([...o,new TextEncoder().encode("status")]));let U;switch(typeof N>"u"?U=zt.Unknown:U=new TextDecoder().decode(N),U){case zt.Replied:return{reply:gt(x.lookup([...o,"reply"])),certificate:x};case zt.Received:case zt.Unknown:case zt.Processing:return await n(e,r,U),kc(t,e,r,n,w,c);case zt.Rejected:{const E=new Uint8Array(gt(x.lookup([...o,"reject_code"])))[0],y=new TextDecoder().decode(gt(x.lookup([...o,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${Ze(r)}
  Reject code: ${E}
  Reject text: ${y}
`)}case zt.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Ze(r)}
`)}throw new Error("unreachable")}const Pl=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,c=i,f=t.Nat32,o=t.Record({start_height:f,end_height:t.Opt(f),network:e}),w=t.Vec(t.Nat8),b=t.Record({tip_height:f,block_headers:t.Vec(w)}),x=t.Record({network:e}),N=t.Nat64,U=t.Vec(N),E=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),y=t.Vec(t.Nat8),M=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),C=t.Record({height:t.Nat32,value:i,outpoint:M}),z=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:f,tip_block_hash:y,utxos:t.Vec(C)}),H=t.Record({transaction:t.Vec(t.Nat8),network:e}),K=t.Principal,ne=t.Record({canister_id:K,num_requested_changes:t.Opt(t.Nat64)}),T=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),j=t.Vec(t.Nat8),Z=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),load_snapshot:t.Record({canister_version:t.Nat64,taken_at_timestamp:t.Nat64,snapshot_id:j}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),J=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:T,details:Z}),V=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(J),total_num_changes:t.Nat64}),q=t.Record({canister_id:K}),ee=t.Variant({controllers:t.Null,public:t.Null,allowed_viewers:t.Vec(t.Principal)}),te=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:ee,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),A=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:te,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),R=t.Record({canister_id:K}),G=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(ee),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),L=t.Record({settings:t.Opt(G),sender_canister_version:t.Opt(t.Nat64)}),D=t.Record({canister_id:K}),re=t.Record({canister_id:K}),le=t.Record({canister_id:K,snapshot_id:j}),ye=t.Record({canister_id:K}),oe=t.Variant({secp256k1:t.Null}),fe=t.Record({key_id:t.Record({name:t.Text,curve:oe}),canister_id:t.Opt(K),derivation_path:t.Vec(t.Vec(t.Nat8))}),Ne=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),B=t.Record({canister_id:K}),Ae=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),Ie=t.Record({canister_log_records:t.Vec(Ae)}),ae=t.Record({value:t.Text,name:t.Text}),Q=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(ae)}),ie=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:Q})],[Q],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(ae)}),g=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),_=t.Record({hash:t.Vec(t.Nat8)}),S=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:g,chunk_hashes_list:t.Vec(_),target_canister:K,store_canister:t.Opt(K),sender_canister_version:t.Opt(t.Nat64)}),O=t.Vec(t.Nat8),F=t.Record({arg:t.Vec(t.Nat8),wasm_module:O,mode:g,canister_id:K,sender_canister_version:t.Opt(t.Nat64)}),P=t.Record({canister_id:K}),h=t.Record({id:j,total_size:t.Nat64,taken_at_timestamp:t.Nat64}),s=t.Vec(h),a=t.Record({canister_id:K,sender_canister_version:t.Opt(t.Nat64),snapshot_id:j}),p=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),m=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),I=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(m)})),Y=t.Record({settings:t.Opt(G),specified_id:t.Opt(K),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),se=t.Record({canister_id:K}),ue=t.Record({canister_id:K,amount:t.Nat}),he=t.Vec(t.Nat8),be=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),d=t.Record({key_id:t.Record({algorithm:be,name:t.Text}),canister_id:t.Opt(K),derivation_path:t.Vec(t.Vec(t.Nat8))}),u=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),l=t.Record({key_id:t.Record({name:t.Text,curve:oe}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),v=t.Record({signature:t.Vec(t.Nat8)}),$=t.Variant({bip341:t.Record({merkle_root_hash:t.Vec(t.Nat8)})}),X=t.Record({aux:t.Opt($),key_id:t.Record({algorithm:be,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),W=t.Record({signature:t.Vec(t.Nat8)}),ge=t.Record({canister_id:K}),_e=t.Record({canister_id:K}),me=t.Record({canister_id:K}),we=t.Vec(_),Se=t.Record({subnet_id:t.Principal}),Me=t.Record({replica_version:t.Text}),ki=t.Record({replace_snapshot:t.Opt(j),canister_id:K}),Mi=h,Pi=t.Record({canister_id:K,sender_canister_version:t.Opt(t.Nat64)}),Ci=t.Record({canister_id:t.Principal,settings:G,sender_canister_version:t.Opt(t.Nat64)}),$i=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),Dt=_;return t.Service({bitcoin_get_balance:t.Func([n],[c],[]),bitcoin_get_block_headers:t.Func([o],[b],[]),bitcoin_get_current_fee_percentiles:t.Func([x],[U],[]),bitcoin_get_utxos:t.Func([E],[z],[]),bitcoin_send_transaction:t.Func([H],[],[]),canister_info:t.Func([ne],[V],[]),canister_status:t.Func([q],[A],[]),clear_chunk_store:t.Func([R],[],[]),create_canister:t.Func([L],[D],[]),delete_canister:t.Func([re],[],[]),delete_canister_snapshot:t.Func([le],[],[]),deposit_cycles:t.Func([ye],[],[]),ecdsa_public_key:t.Func([fe],[Ne],[]),fetch_canister_logs:t.Func([B],[Ie],["query"]),http_request:t.Func([ie],[Q],[]),install_chunked_code:t.Func([S],[],[]),install_code:t.Func([F],[],[]),list_canister_snapshots:t.Func([P],[s],[]),load_canister_snapshot:t.Func([a],[],[]),node_metrics_history:t.Func([p],[I],[]),provisional_create_canister_with_cycles:t.Func([Y],[se],[]),provisional_top_up_canister:t.Func([ue],[],[]),raw_rand:t.Func([],[he],[]),schnorr_public_key:t.Func([d],[u],[]),sign_with_ecdsa:t.Func([l],[v],[]),sign_with_schnorr:t.Func([X],[W],[]),start_canister:t.Func([ge],[],[]),stop_canister:t.Func([_e],[],[]),stored_chunks:t.Func([me],[we],[]),subnet_info:t.Func([Se],[Me],[]),take_canister_snapshot:t.Func([ki],[Mi],[]),uninstall_code:t.Func([Pi],[],[]),update_settings:t.Func([Ci],[],[]),upload_chunk:t.Func([$i],[Dt],[])})};class Mc extends Pe{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(c=>`  "${c}": ${JSON.stringify(i[c])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class Cl extends Mc{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=ss[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class Io extends Mc{constructor(e,r,n,i,c,f,o){super(e,r,"update",Object.assign({"Request ID":Ze(n)},i.body?Object.assign(Object.assign({},o?{"Error code":o}:{}),{"Reject code":String(c),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=c,this.reject_message=f,this.error_code=o}}const wt=Symbol.for("ic-agent-metadata");class Oi{constructor(e){this[wt]=Object.freeze(e)}static agentOf(e){return e[wt].config.agent}static interfaceOf(e){return e[wt].service}static canisterIdOf(e){return xe.from(e[wt].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],c=[...new Uint8Array(e.module)],f=typeof r.canisterId=="string"?xe.fromText(r.canisterId):r.canisterId;await Ro(r).install_code({mode:n,arg:i,wasm_module:c,canister_id:f,sender_canister_version:[]})}static async createCanister(e,r){function n(c){return[{controllers:c.controllers?[c.controllers]:[],compute_allocation:c.compute_allocation?[c.compute_allocation]:[],freezing_threshold:c.freezing_threshold?[c.freezing_threshold]:[],memory_allocation:c.memory_allocation?[c.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await Ro(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:rf});class i extends Oi{constructor(f){if(!f.canisterId)throw new Pe(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const o=typeof f.canisterId=="string"?xe.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},Pc),f),{canisterId:o}),service:n});for(const[w,b]of n._fields)r!=null&&r.httpDetails&&b.annotations.push(Bs),r!=null&&r.certificate&&b.annotations.push(Cc),this[w]=$l(this,w,b,f.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new Pe(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(e,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,n))(r)}}function Pr(t,e){const r=ia(t,Co.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const Pc={pollingStrategyFactory:Oc},Bs="http-details",Cc="certificate";function $l(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...o)=>{var w,b;f=Object.assign(Object.assign({},f),(b=(w=t[wt].config).queryTransform)===null||b===void 0?void 0:b.call(w,e,o,Object.assign(Object.assign({},t[wt].config),f)));const x=f.agent||t[wt].config.agent||No(),N=xe.from(f.canisterId||t[wt].config.canisterId),U=as(r.argTypes,o),E=await x.query(N,{methodName:e,arg:U,effectiveCanisterId:f.effectiveCanisterId}),y=Object.assign(Object.assign({},E.httpDetails),{requestDetails:E.requestDetails});switch(E.status){case"rejected":throw new Cl(N,e,E);case"replied":return r.annotations.includes(Bs)?{httpDetails:y,result:Pr(r.retTypes,E.reply.arg)}:Pr(r.retTypes,E.reply.arg)}}:i=async(f,...o)=>{var w,b;f=Object.assign(Object.assign({},f),(b=(w=t[wt].config).callTransform)===null||b===void 0?void 0:b.call(w,e,o,Object.assign(Object.assign({},t[wt].config),f)));const x=f.agent||t[wt].config.agent||No(),{canisterId:N,effectiveCanisterId:U,pollingStrategyFactory:E}=Object.assign(Object.assign(Object.assign({},Pc),t[wt].config),f),y=xe.from(N),M=U!==void 0?xe.from(U):y,C=as(r.argTypes,o),{requestId:z,response:H,requestDetails:K}=await x.call(y,{methodName:e,arg:C,effectiveCanisterId:M});let ne,T;if(H.body&&H.body.certificate){if(x.rootKey==null)throw new Error("Agent is missing root key");const V=H.body.certificate;T=await Br.create({certificate:ci(V),rootKey:x.rootKey,canisterId:xe.from(N),blsVerify:n});const q=[new TextEncoder().encode("request_status"),z];switch(new TextDecoder().decode(gt(T.lookup([...q,"status"])))){case"replied":ne=gt(T.lookup([...q,"reply"]));break;case"rejected":{const te=new Uint8Array(gt(T.lookup([...q,"reject_code"])))[0],A=new TextDecoder().decode(gt(T.lookup([...q,"reject_message"]))),R=gt(T.lookup([...q,"error_code"])),G=R?new TextDecoder().decode(R):void 0;throw new Io(y,e,z,H,te,A,G)}}}else if(H.body&&"reject_message"in H.body){const{reject_code:V,reject_message:q,error_code:ee}=H.body;throw new Io(y,e,z,H,V,q,ee)}if(H.status===202){const V=E(),q=await kc(x,M,z,V,n);T=q.certificate,ne=q.reply}const j=r.annotations.includes(Bs),Z=r.annotations.includes(Cc),J=Object.assign(Object.assign({},H),{requestDetails:K});if(ne!==void 0)return j&&Z?{httpDetails:J,certificate:T,result:Pr(r.retTypes,ne)}:Z?{certificate:T,result:Pr(r.retTypes,ne)}:j?{httpDetails:J,result:Pr(r.retTypes,ne)}:Pr(r.retTypes,ne);if(r.retTypes.length===0)return j?{httpDetails:H,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const c=(...f)=>i({},...f);return c.withOptions=f=>(...o)=>i(f,...o),c}function Ro(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:xe.from(t.effectiveCanisterId)};const i=n[0];let c=xe.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(c=xe.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(c=xe.from(i.canister_id)),{effectiveCanisterId:c}}return Oi.createActor(Pl,Object.assign(Object.assign(Object.assign({},t),{canisterId:xe.fromHex("")}),{callTransform:e,queryTransform:e}))}const ql=({IDL:t})=>{const e=t.Variant({CanisterError:t.Record({message:t.Text}),InvalidCanister:t.Null}),r=t.Variant({Ok:t.Text,Err:e}),n=t.Record({primary_key:t.Bool,name:t.Text,data_type:t.Text,not_null:t.Bool}),i=t.Record({schema:t.Vec(n),column_count:t.Nat32,row_count:t.Nat64,table_name:t.Text}),c=t.Record({tables:t.Vec(i),total_tables:t.Nat32,database_size_mb:t.Float64}),f=t.Variant({Ok:c,Err:e}),o=t.Variant({Ok:t.Vec(t.Vec(t.Text)),Err:e});return t.Service({balance:t.Func([],[t.Nat64],["query"]),execute:t.Func([t.Text],[r],[]),get_database_info:t.Func([],[f],["query"]),instruction_counter:t.Func([],[t.Nat64],["query"]),query:t.Func([t.Text],[o],["query"])})},$c="bkyz2-fmaaa-aaaaa-qaaaq-cai",qc=(t,e={})=>{const r=e.agent||new _r({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),Oi.createActor(ql,{agent:r,canisterId:t,...e.actorOptions})};qc($c);function Gl(){const t=new _r({host:"http://127.0.0.1:8000",fetchOptions:{credentials:"include"}});return t.fetchRootKey().catch(e=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),qc($c,{agent:t})}const Vl=Gl();function Uo(t,e,r){const n=t.slice();return n[2]=e[r],n}function Fo(t,e,r){const n=t.slice();return n[5]=e[r],n}function Oo(t){let e;function r(c,f){return c[0].Ok?jl:Hl}let n=r(t),i=n(t);return{c(){i.c(),e=qs()},l(c){i.l(c),e=qs()},m(c,f){i.m(c,f),Pt(c,e,f)},p(c,f){n===(n=r(c))&&i?i.p(c,f):(i.d(1),i=n(c),i&&(i.c(),i.m(e.parentNode,e)))},d(c){c&&$e(e),i.d(c)}}}function Hl(t){let e,r=JSON.stringify(t[0],null,2)+"",n;return{c(){e=Qe("pre"),n=kt(r)},l(i){e=Je(i,"PRE",{});var c=At(e);n=Ot(c,r),c.forEach($e)},m(i,c){Pt(i,e,c),Oe(e,n)},p(i,c){c&1&&r!==(r=JSON.stringify(i[0],null,2)+"")&&xr(n,r)},d(i){i&&$e(e)}}}function jl(t){let e,r,n="Database Size (MB):",i,c=t[0].Ok.database_size_mb+"",f,o,w,b,x="Total Tables:",N,U=t[0].Ok.total_tables+"",E,y,M,C,z="Tables:",H,K,ne=si(t[0].Ok.tables),T=[];for(let j=0;j<ne.length;j+=1)T[j]=Mo(Uo(t,ne,j));return{c(){e=Qe("div"),r=Qe("strong"),r.textContent=n,i=Kt(),f=kt(c),o=Kt(),w=Qe("div"),b=Qe("strong"),b.textContent=x,N=Kt(),E=kt(U),y=Kt(),M=Qe("div"),C=Qe("strong"),C.textContent=z,H=Kt(),K=Qe("ul");for(let j=0;j<T.length;j+=1)T[j].c()},l(j){e=Je(j,"DIV",{});var Z=At(e);r=Je(Z,"STRONG",{"data-svelte-h":!0}),qn(r)!=="svelte-1pnqke0"&&(r.textContent=n),i=Yt(Z),f=Ot(Z,c),Z.forEach($e),o=Yt(j),w=Je(j,"DIV",{});var J=At(w);b=Je(J,"STRONG",{"data-svelte-h":!0}),qn(b)!=="svelte-xsv8v"&&(b.textContent=x),N=Yt(J),E=Ot(J,U),J.forEach($e),y=Yt(j),M=Je(j,"DIV",{});var V=At(M);C=Je(V,"STRONG",{"data-svelte-h":!0}),qn(C)!=="svelte-nctpwt"&&(C.textContent=z),H=Yt(V),K=Je(V,"UL",{});var q=At(K);for(let ee=0;ee<T.length;ee+=1)T[ee].l(q);q.forEach($e),V.forEach($e)},m(j,Z){Pt(j,e,Z),Oe(e,r),Oe(e,i),Oe(e,f),Pt(j,o,Z),Pt(j,w,Z),Oe(w,b),Oe(w,N),Oe(w,E),Pt(j,y,Z),Pt(j,M,Z),Oe(M,C),Oe(M,H),Oe(M,K);for(let J=0;J<T.length;J+=1)T[J]&&T[J].m(K,null)},p(j,Z){if(Z&1&&c!==(c=j[0].Ok.database_size_mb+"")&&xr(f,c),Z&1&&U!==(U=j[0].Ok.total_tables+"")&&xr(E,U),Z&1){ne=si(j[0].Ok.tables);let J;for(J=0;J<ne.length;J+=1){const V=Uo(j,ne,J);T[J]?T[J].p(V,Z):(T[J]=Mo(V),T[J].c(),T[J].m(K,null))}for(;J<T.length;J+=1)T[J].d(1);T.length=ne.length}},d(j){j&&($e(e),$e(o),$e(w),$e(y),$e(M)),Po(T,j)}}}function ko(t){let e,r=JSON.stringify(t[5])+"",n;return{c(){e=Qe("li"),n=kt(r)},l(i){e=Je(i,"LI",{});var c=At(e);n=Ot(c,r),c.forEach($e)},m(i,c){Pt(i,e,c),Oe(e,n)},p(i,c){c&1&&r!==(r=JSON.stringify(i[5])+"")&&xr(n,r)},d(i){i&&$e(e)}}}function Mo(t){let e,r,n=t[2].table_name+"",i,c,f=t[2].row_count+"",o,w,b=t[2].column_count+"",x,N,U,E,y=si(t[2].schema),M=[];for(let C=0;C<y.length;C+=1)M[C]=ko(Fo(t,y,C));return{c(){e=Qe("li"),r=Qe("strong"),i=kt(n),c=kt(" ("),o=kt(f),w=kt(" rows, "),x=kt(b),N=kt(` columns)
                `),U=Qe("ul");for(let C=0;C<M.length;C+=1)M[C].c();E=Kt()},l(C){e=Je(C,"LI",{});var z=At(e);r=Je(z,"STRONG",{});var H=At(r);i=Ot(H,n),H.forEach($e),c=Ot(z," ("),o=Ot(z,f),w=Ot(z," rows, "),x=Ot(z,b),N=Ot(z,` columns)
                `),U=Je(z,"UL",{});var K=At(U);for(let ne=0;ne<M.length;ne+=1)M[ne].l(K);K.forEach($e),E=Yt(z),z.forEach($e)},m(C,z){Pt(C,e,z),Oe(e,r),Oe(r,i),Oe(e,c),Oe(e,o),Oe(e,w),Oe(e,x),Oe(e,N),Oe(e,U);for(let H=0;H<M.length;H+=1)M[H]&&M[H].m(U,null);Oe(e,E)},p(C,z){if(z&1&&n!==(n=C[2].table_name+"")&&xr(i,n),z&1&&f!==(f=C[2].row_count+"")&&xr(o,f),z&1&&b!==(b=C[2].column_count+"")&&xr(x,b),z&1){y=si(C[2].schema);let H;for(H=0;H<y.length;H+=1){const K=Fo(C,y,H);M[H]?M[H].p(K,z):(M[H]=ko(K),M[H].c(),M[H].m(U,null))}for(;H<M.length;H+=1)M[H].d(1);M.length=y.length}},d(C){C&&$e(e),Po(M,C)}}}function zl(t){let e,r,n,i,c,f,o,w='<button type="submit">Click Me!</button>',b,x,N,U,E=t[0]&&Oo(t);return{c(){e=Qe("main"),r=Qe("img"),i=Kt(),c=Qe("br"),f=Kt(),o=Qe("form"),o.innerHTML=w,b=Kt(),x=Qe("section"),E&&E.c(),this.h()},l(y){e=Je(y,"MAIN",{});var M=At(e);r=Je(M,"IMG",{src:!0,alt:!0}),i=Yt(M),c=Je(M,"BR",{}),f=Yt(M),o=Je(M,"FORM",{action:!0,"data-svelte-h":!0}),qn(o)!=="svelte-hh1haf"&&(o.innerHTML=w),b=Yt(M),x=Je(M,"SECTION",{});var C=At(x);E&&E.l(C),C.forEach($e),M.forEach($e),this.h()},h(){su(r.src,n="/logo2.svg")||qi(r,"src",n),qi(r,"alt","DFINITY logo"),qi(o,"action","#")},m(y,M){Pt(y,e,M),Oe(e,r),Oe(e,i),Oe(e,c),Oe(e,f),Oe(e,o),Oe(e,b),Oe(e,x),E&&E.m(x,null),N||(U=nu(o,"submit",iu(t[1])),N=!0)},p(y,[M]){y[0]?E?E.p(y,M):(E=Oo(y),E.c(),E.m(x,null)):E&&(E.d(1),E=null)},i:$s,o:$s,d(y){y&&$e(e),E&&E.d(),N=!1,U()}}}function Yl(t,e,r){let n=null;function i(c){return Vl.get_database_info().then(f=>{r(0,n=f),console.log(f)}),!1}return[n,i]}class fh extends eu{constructor(e){super(),tu(this,e,Yl,zl,ru,{})}}export{fh as component};
